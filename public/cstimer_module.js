var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var g=0;return function(){return g<a.length?{done:!1,value:a[g++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var g="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return g?g.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,d){a!=Array.prototype&&a!=Object.prototype&&(a[g]=d.value)};
$jscomp.polyfill=function(a,g,d,l){if(g){d=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var c=a[l];c in d||(d[c]={});d=d[c]}a=a[a.length-1];l=d[a];g=g(l);g!=l&&null!=g&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:g})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function g(){this.batch_=null}function d(a){return a instanceof c?a:new c(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;g.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};g.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var l=$jscomp.global.setTimeout;g.prototype.asyncExecuteFunction=function(a){l(a,
0)};g.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var d=a[c];a[c]=null;try{d()}catch(B){this.asyncThrow_(B)}}}this.batch_=null};g.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(C){b.reject(C)}};c.prototype.createResolveAndReject_=
function(){function a(a){return function(b){d||(d=!0,a.call(c,b))}}var c=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(C){this.reject_(C);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)A.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var A=new g;c.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};c.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(B){b.reject(B)}};c.prototype.then=function(a,d){function b(a,b){return"function"==typeof a?function(b){try{y(a(b))}catch(w){f(w)}}:
b}var y,f,q=new c(function(a,b){y=a;f=b});this.callWhenSettled_(b(a,y),b(d,f));return q};c.prototype["catch"]=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function b(){switch(d.state_){case 1:a(d.result_);break;case 2:c(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?A.asyncExecute(b):this.onSettledCallbacks_.push(b)};c.resolve=d;c.reject=function(a){return new c(function(b,c){c(a)})};c.race=function(a){return new c(function(b,
c){for(var y=$jscomp.makeIterator(a),f=y.next();!f.done;f=y.next())d(f.value).callWhenSettled_(b,c)})};c.all=function(a){var b=$jscomp.makeIterator(a),l=b.next();return l.done?d([]):new c(function(a,c){function f(b){return function(c){r[b]=c;y--;0==y&&a(r)}}var r=[],y=0;do r.push(void 0),y++,d(l.value).callWhenSettled_(f(r.length-1),c),l=b.next();while(!l.done)})};return c},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,d,l){var c=this.length||0;0>d&&(d=Math.max(0,c+d));if(null==l||l>c)l=c;l=Number(l);0>l&&(l=Math.max(0,c+l));for(d=Number(d||0);d<l;d++)this[d]=a;return this}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},g=Object.create(new $jscomp.global.Proxy(a,{get:function(d,l,c){return d==a&&"q"==l&&c==g}}));return!0===g.q}catch(d){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(g){return $jscomp.SYMBOL_PREFIX+(g||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.owns=function(a,g){return Object.prototype.hasOwnProperty.call(a,g)};
$jscomp.polyfill("WeakMap",function(a){function g(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),f=new a([[b,2],[c,3]]);if(2!=f.get(b)||3!=f.get(c))return!1;f["delete"](b);f.set(c,4);return!f.has(b)&&4==f.get(c)}catch(q){return!1}}function d(){}function l(a){if(!$jscomp.owns(a,A)){var b=new d;$jscomp.defineProperty(a,A,{value:b})}}function c(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof d)return a;l(a);return b(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&
$jscomp.ES6_CONFORMANCE)return a}else if(g())return a;var A="$jscomp_hidden_"+Math.random();c("freeze");c("preventExtensions");c("seal");var b=0,y=function(a){this.id_=(b+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};y.prototype.set=function(a,b){l(a);if(!$jscomp.owns(a,A))throw Error("WeakMap key fail: "+a);a[A][this.id_]=b;return this};y.prototype.get=function(a){return $jscomp.owns(a,A)?a[A][this.id_]:void 0};y.prototype.has=
function(a){return $jscomp.owns(a,A)&&$jscomp.owns(a[A],this.id_)};y.prototype["delete"]=function(a){return $jscomp.owns(a,A)&&$jscomp.owns(a[A],this.id_)?delete a[A][this.id_]:!1};return y},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function g(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var f=c.entries(),q=f.next();if(q.done||q.value[0]!=b||"s"!=q.value[1])return!1;q=f.next();return q.done||4!=q.value[0].x||"t"!=q.value[1]||!f.next().done?!1:!0}catch(r){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(g())return a;$jscomp.initSymbolIterator();var d=new WeakMap,l=function(a){this.data_={};this.head_=b();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};l.prototype.set=function(a,b){a=0===a?0:a;var f=c(this,a);f.list||(f.list=this.data_[f.id]=[]);f.entry?f.entry.value=b:(f.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},f.list.push(f.entry),this.head_.previous.next=f.entry,this.head_.previous=f.entry,this.size++);return this};l.prototype["delete"]=function(a){a=c(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};l.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=b();this.size=0};l.prototype.has=function(a){return!!c(this,a).entry};
l.prototype.get=function(a){return(a=c(this,a).entry)&&a.value};l.prototype.entries=function(){return A(this,function(a){return[a.key,a.value]})};l.prototype.keys=function(){return A(this,function(a){return a.key})};l.prototype.values=function(){return A(this,function(a){return a.value})};l.prototype.forEach=function(a,b){for(var c=this.entries(),q;!(q=c.next()).done;)q=q.value,a.call(b,q[1],q[0],this)};l.prototype[Symbol.iterator]=l.prototype.entries;var c=function(a,b){var c=b&&typeof b;"object"==
c||"function"==c?d.has(b)?c=d.get(b):(c=""+ ++y,d.set(b,c)):c="p_"+b;var q=a.data_[c];if(q&&$jscomp.owns(a.data_,c))for(var r=0;r<q.length;r++){var D=q[r];if(b!==b&&D.key!==D.key||b===D.key)return{id:c,list:q,index:r,entry:D}}return{id:c,list:q,index:-1,entry:void 0}},A=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},b=function(){var a={};
return a.previous=a.next=a.head=a},y=0;return l},"es6","es3");$jscomp.polyfill("Math.clz32",function(a){return a?a:function(a){a=Number(a)>>>0;if(0===a)return 32;var d=0;0===(a&4294901760)&&(a<<=16,d+=16);0===(a&4278190080)&&(a<<=8,d+=8);0===(a&4026531840)&&(a<<=4,d+=4);0===(a&3221225472)&&(a<<=2,d+=2);0===(a&2147483648)&&d++;return d}},"es6","es3");
$jscomp.polyfill("Set",function(a){function g(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),c=new a($jscomp.makeIterator([d]));if(!c.has(d)||1!=c.size||c.add(d)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var g=c.entries(),b=g.next();if(b.done||b.value[0]!=d||b.value[1]!=d)return!1;b=g.next();return b.done||b.value[0]==d||4!=b.value[0].x||b.value[1]!=b.value[0]?!1:g.next().done}catch(y){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(g())return a;$jscomp.initSymbolIterator();var d=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};d.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};d.prototype["delete"]=function(a){a=this.map_["delete"](a);this.size=this.map_.size;return a};d.prototype.clear=function(){this.map_.clear();
this.size=0};d.prototype.has=function(a){return this.map_.has(a)};d.prototype.entries=function(){return this.map_.entries()};d.prototype.values=function(){return this.map_.values()};d.prototype.keys=d.prototype.values;d.prototype[Symbol.iterator]=d.prototype.values;d.prototype.forEach=function(a,c){var d=this;this.map_.forEach(function(b){return a.call(c,b,b,d)})};return d},"es6","es3");
$jscomp.polyfill("Math.hypot",function(a){return a?a:function(a,d,l){a=Number(a);d=Number(d);var c,g=Math.max(Math.abs(a),Math.abs(d));for(c=2;c<arguments.length;c++)g=Math.max(g,Math.abs(arguments[c]));if(1E100<g||1E-100>g){if(!g)return g;a/=g;d/=g;var b=a*a+d*d;for(c=2;c<arguments.length;c++){var y=Number(arguments[c])/g;b+=y*y}return Math.sqrt(b)*g}b=a*a+d*d;for(c=2;c<arguments.length;c++)y=Number(arguments[c]),b+=y*y;return Math.sqrt(b)}},"es6","es3");
$jscomp.checkStringArgs=function(a,g,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,d){var g=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var c=g.length,A=a.length,b=Math.max(0,Math.min(d|0,g.length)),y=0;y<A&&b<c;)if(g[b++]!=a[y++])return!1;return y>=A}},"es6","es3");$jscomp.findInternal=function(a,g,d){a instanceof String&&(a=String(a));for(var l=a.length,c=0;c<l;c++){var A=a[c];if(g.call(d,A,c,a))return{i:c,v:A}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var g="";a;)if(a&1&&(g+=d),a>>>=1)d+=d;return g}},"es6","es3");
$jscomp.stringPadding=function(a,g){var d=void 0!==a?String(a):" ";return 0<g&&d?d.repeat(Math.ceil(g/d.length)).substring(0,g):""};$jscomp.polyfill("String.prototype.padStart",function(a){return a?a:function(a,d){var g=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(d,a-g.length)+g}},"es8","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,d){var g=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===d&&(d=g.length);for(var c=Math.max(0,Math.min(d|0,g.length)),A=a.length;0<A&&0<c;)if(g[--c]!=a[--A])return!1;return 0>=A}},"es6","es3");$jscomp.polyfill("String.prototype.padEnd",function(a){return a?a:function(a,d){var g=$jscomp.checkStringArgs(this,null,"padStart");return g+$jscomp.stringPadding(d,a-g.length)}},"es8","es3");
var isInNode="object"===typeof process&&"function"===typeof require&&"object"===typeof global,isInWorker="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||isInNode;function execBoth(a,g,d){return!isInWorker&&a?a.apply(this,d||[]):isInWorker&&g?g.apply(this,d||[]):{}}function execWorker(a,g){return execBoth(void 0,a,g)}function execMain(a,g){return execBoth(a,void 0,g)}
execWorker(function(){isInNode&&(global.self=global);self.$={isArray:Array.isArray||function(a){return"array"===jQuery.type(a)},noop:function(){},now:function(){return+new Date}}});
execMain(function(){$.beacon=function(a,g){g=g||"stat.php";a="string"==typeof a?a:JSON.stringify(a);navigator.sendBeacon?navigator.sendBeacon(g,a):$.post(g,a)};window.onerror=function(a,g,c,A,b){if((c||A)&&!/extension|adsbygoogle/i.exec(g)&&/\.js/i.exec(g)){void 0==b&&(b={});var d="";try{d=$.fingerprint()}catch(C){}$.beacon({version:CSTIMER_VERSION,fp:d,msg:a,url:g,line:c,col:A,stack:b.stack},"bug.php");DEBUG&&console.log(CSTIMER_VERSION,d,a,g,c,A,b)}};for(var a="CSTIMER_VERSION LANG_SET LANG_STR LANG_CUR OK_LANG CANCEL_LANG RESET_LANG ABOUT_LANG ZOOM_LANG COPY_LANG BUTTON_TIME_LIST BUTTON_OPTIONS BUTTON_EXPORT BUTTON_DONATE PROPERTY_SR PROPERTY_USEINS PROPERTY_USEINS_STR PROPERTY_SHOWINS PROPERTY_VOICEINS PROPERTY_VOICEINS_STR PROPERTY_VOICEVOL PROPERTY_PHASES PROPERTY_TIMERSIZE PROPERTY_USEMILLI PROPERTY_SMALLADP PROPERTY_SCRSIZE PROPERTY_SCRMONO PROPERTY_SCRLIM PROPERTY_SCRALIGN PROPERTY_SCRALIGN_STR PROPERTY_SCRNEUT PROPERTY_SCRNEUT_STR PROPERTY_SCREQPR PROPERTY_SCRFAST PROPERTY_SCRKEYM PROPERTY_SCRCLK PROPERTY_SCRCLK_STR PROPERTY_WNDSCR PROPERTY_WNDSTAT PROPERTY_WNDTOOL PROPERTY_WND_STR EXPORT_DATAEXPORT EXPORT_TOFILE EXPORT_FROMFILE EXPORT_TOSERV EXPORT_FROMSERV EXPORT_FROMOTHER EXPORT_USERID EXPORT_INVID EXPORT_ERROR EXPORT_NODATA EXPORT_UPLOADED EXPORT_CODEPROMPT EXPORT_ONLYOPT EXPORT_ACCOUNT EXPORT_LOGINGGL EXPORT_LOGINWCA EXPORT_LOGOUTCFM EXPORT_LOGINAUTHED EXPORT_AEXPALERT IMPORT_FINAL_CONFIRM BUTTON_SCRAMBLE BUTTON_TOOLS IMAGE_UNAVAILABLE TOOLS_SELECTFUNC TOOLS_CROSS TOOLS_EOLINE TOOLS_ROUX1 TOOLS_222FACE TOOLS_GIIKER TOOLS_IMAGE TOOLS_STATS TOOLS_HUGESTATS TOOLS_DISTRIBUTION TOOLS_TREND TOOLS_METRONOME TOOLS_RECONS TOOLS_RECONS_NODATA TOOLS_RECONS_TITLE TOOLS_TRAINSTAT TOOLS_BLDHELPER TOOLS_CFMTIME TOOLS_SOLVERS TOOLS_DLYSTAT TOOLS_DLYSTAT1 TOOLS_DLYSTAT_OPT1 TOOLS_DLYSTAT_OPT2 TOOLS_SYNCSEED TOOLS_SYNCSEED_SEED TOOLS_SYNCSEED_INPUT TOOLS_SYNCSEED_30S TOOLS_SYNCSEED_HELP TOOLS_SYNCSEED_DISABLE TOOLS_SYNCSEED_INPUTA TOOLS_BATTLE TOOLS_BATTLE_HEAD TOOLS_BATTLE_TITLE TOOLS_BATTLE_STATUS TOOLS_BATTLE_INFO TOOLS_BATTLE_JOINALERT TOOLS_BATTLE_LEAVEALERT OLCOMP_UPDATELIST OLCOMP_VIEWRESULT OLCOMP_VIEWMYRESULT OLCOMP_START OLCOMP_SUBMIT OLCOMP_SUBMITAS OLCOMP_WCANOTICE OLCOMP_OLCOMP OLCOMP_ANONYM OLCOMP_ME OLCOMP_WCAACCOUNT OLCOMP_ABORT OLCOMP_WITHANONYM PROPERTY_IMGSIZE PROPERTY_IMGREP TIMER_INSPECT TIMER_SOLVE PROPERTY_USEMOUSE PROPERTY_TIMEU PROPERTY_TIMEU_STR PROPERTY_PRETIME PROPERTY_ENTERING PROPERTY_ENTERING_STR PROPERTY_INTUNIT PROPERTY_INTUNIT_STR PROPERTY_COLOR PROPERTY_COLORS PROPERTY_VIEW PROPERTY_VIEW_STR PROPERTY_UIDESIGN PROPERTY_UIDESIGN_STR COLOR_EXPORT COLOR_IMPORT COLOR_FAIL PROPERTY_FONTCOLOR_STR PROPERTY_COLOR_STR PROPERTY_FONT PROPERTY_FONT_STR PROPERTY_FORMAT PROPERTY_USEKSC PROPERTY_USEGES PROPERTY_NTOOLS PROPERTY_AHIDE SCRAMBLE_LAST SCRAMBLE_NEXT SCRAMBLE_SCRAMBLE SCRAMBLE_SCRAMBLING SCRAMBLE_LENGTH SCRAMBLE_INPUT PROPERTY_VRCSPEED PROPERTY_VRCMP PROPERTY_VRCMPS PROPERTY_GIIKERVRC PROPERTY_GIISOK_DELAY PROPERTY_GIISOK_DELAYS PROPERTY_GIISOK_KEY PROPERTY_GIISOK_MOVE PROPERTY_GIISOK_MOVES PROPERTY_GIISBEEP PROPERTY_GIIRST PROPERTY_GIIRSTS PROPERTY_GIIMODE PROPERTY_GIIMODES PROPERTY_VRCAH PROPERTY_VRCAHS CONFIRM_GIIRST PROPERTY_GIIAED scrdata SCRAMBLE_NOOBST SCRAMBLE_NOOBSS SCROPT_TITLE SCROPT_BTNALL SCROPT_BTNNONE SCROPT_EMPTYALT STATS_CFM_RESET STATS_CFM_DELSS STATS_CFM_DELMUL STATS_CFM_DELETE STATS_COMMENT STATS_REVIEW STATS_DATE STATS_SSSTAT STATS_SSRETRY STATS_CURROUND STATS_CURSESSION STATS_CURSPLIT STATS_EXPORTCSV STATS_SSMGR_TITLE STATS_SSMGR_NAME STATS_SSMGR_DETAIL STATS_SSMGR_OPS STATS_SSMGR_ORDER STATS_SSMGR_ODCFM STATS_SSMGR_SORTCFM STATS_ALERTMG STATS_PROMPTSPL STATS_ALERTSPL STATS_AVG STATS_SUM STATS_SOLVE STATS_TIME STATS_SESSION STATS_SESSION_NAME STATS_SESSION_NAMEC STATS_STRING STATS_PREC STATS_PREC_STR STATS_TYPELEN STATS_STATCLR STATS_ABSIDX STATS_XSESSION_DATE STATS_XSESSION_NAME STATS_XSESSION_SCR STATS_XSESSION_CALC STATS_RSFORSS PROPERTY_PRINTSCR PROPERTY_PRINTCOMM PROPERTY_PRINTDATE PROPERTY_SUMMARY PROPERTY_IMRENAME PROPERTY_SCR2SS PROPERTY_SS2SCR PROPERTY_SS2PHASES PROPERTY_STATINV PROPERTY_STATSSUM PROPERTY_STATTHRES PROPERTY_STATBPA PROPERTY_STATWPA PROPERTY_STATAL PROPERTY_STATALU PROPERTY_HLPBS PROPERTY_HLPBS_STR PROPERTY_DELMUL PROPERTY_TOOLSFUNC PROPERTY_TRIM PROPERTY_TRIMR PROPERTY_TRIM_MED PROPERTY_STKHEAD PROPERTY_TOOLPOS PROPERTY_TOOLPOS_STR PROPERTY_HIDEFULLSOL PROPERTY_IMPPREV PROPERTY_AUTOEXP PROPERTY_AUTOEXP_OPT PROPERTY_SCRASIZE MODULE_NAMES BGIMAGE_URL BGIMAGE_INVALID BGIMAGE_OPACITY BGIMAGE_IMAGE BGIMAGE_IMAGE_STR SHOW_AVG_LABEL SHOW_DIFF_LABEL SHOW_DIFF_LABEL_STR USE_LOGOHINT TOOLS_SCRGEN SCRGEN_NSCR SCRGEN_PRE SCRGEN_GEN VRCREPLAY_TITLE VRCREPLAY_ORI VRCREPLAY_SHARE GIIKER_CONNECT GIIKER_RESET GIIKER_REQMACMSG GIIKER_NOBLEMSG PROPERTY_SHOWAD PROPERTY_GIIORI LGHINT_INVALID LGHINT_NETERR LGHINT_SERVERR LGHINT_SUBMITED LGHINT_SSBEST LGHINT_SCRCOPY LGHINT_LINKCOPY LGHINT_SOLVCOPY LGHINT_SORT0 LGHINT_IMPORTED LGHINT_IMPORT0 LGHINT_BTCONSUC LGHINT_BTDISCON LGHINT_BTNOTSUP LGHINT_BTINVMAC LGHINT_AEXPABT LGHINT_AEXPSUC LGHINT_AEXPFAL".split(" "),
g=0;g<a.length;g++)window[a[g]]=window[a[g]]||"|||||||||||||||";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,g){return window.setTimeout(a,1E3/60)}}();window.localStorage||(window.localStorage={});"properties"in localStorage||"https:"==location.protocol||"localhost"==location.hostname||(location.href="https:"+location.href.substring(location.protocol.length));
window.performance&&window.performance.now&&($.now=function(){return Math.floor(window.performance.now())});$.urlParam=function(a){a=(new RegExp("[?&]"+a+"=([^&#]*)")).exec(window.location.href);return null==a?null:a[1]||0};$.hashParam=function(a){a=(new RegExp("[#&]"+a+"=([^&#]*)")).exec(window.location.hash);return null==a?null:a[1]||0};$.clearUrl=function(a){var d=(new RegExp("[?&]("+a+"=[^&#]*&?)")).exec(window.location.href);a=a?location.href.replace(d[1],"").replace(/\?$/,""):location.pathname;
history&&history.replaceState?history.replaceState(void 0,void 0,a):location.href=a};$.clearHash=function(a){var d=(new RegExp("[#&]("+a+"=[^&#]*&?)")).exec(window.location.href);a=a?location.href.replace(d[1],"").replace(/#$/,""):location.pathname+location.search;history&&history.replaceState?history.replaceState(void 0,void 0,a):location.href=a};$.clipboardCopy=function(a){if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(a);DEBUG&&console.log("[utillib] clipboard copy fallback");
a=$("<textarea>"+a+"</textarea>").appendTo(document.body);a.focus().select();var d=!1;try{d=document.execCommand("copy")}catch(c){}a.remove();return d?Promise.resolve():Promise.reject()};$.fingerprint=function(){var a=window.screen&&[Math.max(screen.height,screen.width),Math.min(screen.height,screen.width),screen.colorDepth].join("x"),g=(new Date).getTimezoneOffset(),c=$.map(navigator.plugins,function(a){return[a.name,a.description,$.map(a,function(a){return[a.type,a.suffixes].join("~")}).sort().join(",")].join("::")}).sort().join(";");
a=[navigator.userAgent,navigator.language,!!window.sessionStorage,!!window.localStorage,!!window.indexedDB,navigator.doNotTrack,a,g,c].join("###");return $.sha256(a)};$.delayExec=function(){var a={};return function(d,c,g){a[d]&&(clearTimeout(a[d][0]),delete a[d]);g=setTimeout(c,g);a[d]=[g,c]}}();$.waitUser=function(){var a=[];return{reg:function(d){a.push(d)},call:function(){for(var d=0;d<a.length;d++)a[d]();a=[]}}}();"serviceWorker"in navigator?$(function(){navigator.serviceWorker.register("sw.js")}):
window.applicationCache&&$(function(){applicationCache.addEventListener("updateready",function(a){applicationCache.status==applicationCache.UPDATEREADY&&(applicationCache.swapCache(),location.reload())},!1)});navigator.storage&&navigator.storage.persisted&&navigator.storage.persisted().then(function(a){if(a)return Promise.resolve(a);if(navigator.storage.persist)return navigator.storage.persist()}).then(function(a){$.persistent=a})});
(function(){$.svg=function(){function a(a,g){this.elems=[];this.width=a;this.height=g}function g(a){return parseFloat(a.toFixed(3)).toString()}a.prototype.addElem=function(a){this.elems.push(a)};a.prototype.addPoly=function(a,l,c){for(var d=[],b=0;b<a[0].length;b++)d.push(g(a[0][b])+","+g(a[1][b]));this.elems.push('<polygon points="'+d.join(" ")+'" style="fill:'+l+";stroke:"+(c||"#000")+';" />')};a.prototype.addText=function(a,l,c,A){var b="paint-order:stroke;",d;for(d in c)b+=d+":"+c[d]+";";c='dominant-baseline="middle" text-anchor="middle"';
1==A&&(c='dominant-baseline="hanging" text-anchor="start"');this.elems.push('<text x="'+g(l[0])+'" y="'+g(l[1])+'" style="'+b+'" '+c+">"+encodeURIComponent(a)+"</text>")};a.prototype.render=function(){return'<svg width="'+g(this.width)+'" height="'+g(this.height)+'" xmlns="http://www.w3.org/2000/svg">'+this.elems.join("")+"</svg>"};a.prototype.renderGroup=function(a,l,c,A){var b=Math.min(c/this.width,A/this.height);return'<g transform="translate('+g(a+(c-this.width*b)/2)+","+g(l+(A-this.height*b)/
2)+") scale("+g(b)+')">'+this.elems.join("")+"</g>"};return a}();$.ctxDrawPolygon=function(a,g,d,l){if(a){l=l||[1,0,0,0,1,0];d=$.ctxTransform(d,l);if(a instanceof $.svg)return a.addPoly(d,g);a.beginPath();a.fillStyle=g;a.moveTo(d[0][0],d[1][0]);for(g=1;g<d[0].length;g++)a.lineTo(d[0][g],d[1][g]);a.closePath();a.fill();a.stroke()}};$.ctxRotate=function(a,g){return $.ctxTransform(a,[Math.cos(g),-Math.sin(g),0,Math.sin(g),Math.cos(g),0])};$.ctxTransform=function(a){for(var g,d=1;d<arguments.length;d++){var l=
arguments[d];3==l.length&&(l=[l[0],0,l[1]*l[0],0,l[0],l[2]*l[0]]);g=[[],[]];for(d=0;d<a[0].length;d++)g[0][d]=a[0][d]*l[0]+a[1][d]*l[1]+l[2],g[1][d]=a[0][d]*l[3]+a[1][d]*l[4]+l[5]}return g};$.nearColor=function(a,g,d){var l,c;(c=/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/.exec(a))&&(l=[c[1]+c[1],c[2]+c[2],c[3]+c[3]]);(c=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/.exec(a))&&(l=[c[1],c[2],c[3]]);for(a=0;3>a;a++)l[a]=parseInt(l[a],16)+(g||0),l[a]=Math.min(Math.max(l[a],0),255),l[a]=Math.round(l[a]/
17).toString(16);return"#"+(d?l[0]+l[0]+l[1]+l[1]+l[2]+l[2]:l[0]+l[1]+l[2])};$.col2std=function(a,g){var d=[];a=(a||"").match(/#[0-9a-fA-F]{3}/g)||[];for(var l=0;l<a.length;l++)d.push(~~$.nearColor(a[g[l]],0,!0).replace("#","0x"));return d};$.UDPOLY_RE="skb|m?pyr|prc|heli(?:2x2|cv)?|crz3a|giga|mgm|klm|redi|fto|ctico";$.TWISTY_RE="sq1|clk|udpoly|"+$.UDPOLY_RE})();var DEBUGM=!0,DEBUGWK=!1,DEBUG=isInWorker?DEBUGWK:DEBUGM&&!!$.urlParam("debug"),DEBUGBL=!1;
Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var g=0;g<this.length;g++)if(this[g]==a)return g;return-1});
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var g=Array.prototype.slice.call(arguments,1),d=this,l=function(){},c=function(){return d.apply(this instanceof l?this:a,g.concat(Array.prototype.slice.call(arguments)))};this.prototype&&(l.prototype=this.prototype);c.prototype=new l;return c});var isaac=function(){function a(a,b){var c=(a&65535)+(b&65535);return(a>>>16)+(b>>>16)+(c>>>16)<<16|c&65535}function g(){for(var a=b=y=C=0;256>a;++a)A[a]=B[a]=0;f=0}function d(b){function c(){m^=q<<11;d=a(d,m);q=a(q,k);q^=k>>>2;y=a(y,q);k=a(k,d);k^=d<<8;x=a(x,k);d=a(d,y);d^=y>>>16;G=a(G,d);y=a(y,x);y^=x<<10;u=a(u,y);x=a(x,G);x^=G>>>4;m=a(m,x);G=a(G,u);G^=u<<8;q=a(q,G);u=a(u,m);u^=m>>>9;k=a(k,u);m=a(m,q)}var q,k,d,y,x,G,u,p;var m=q=k=d=y=x=G=u=2654435769;b&&"number"===typeof b&&(b=[b]);if(b instanceof
Array)for(g(),p=0;p<b.length;p++)B[p&255]+="number"===typeof b[p]?b[p]:0;for(p=0;4>p;p++)c();for(p=0;256>p;p+=8)b&&(m=a(m,B[p+0]),q=a(q,B[p+1]),k=a(k,B[p+2]),d=a(d,B[p+3]),y=a(y,B[p+4]),x=a(x,B[p+5]),G=a(G,B[p+6]),u=a(u,B[p+7])),c(),A[p+0]=m,A[p+1]=q,A[p+2]=k,A[p+3]=d,A[p+4]=y,A[p+5]=x,A[p+6]=G,A[p+7]=u;if(b)for(p=0;256>p;p+=8)m=a(m,A[p+0]),q=a(q,A[p+1]),k=a(k,A[p+2]),d=a(d,A[p+3]),y=a(y,A[p+4]),x=a(x,A[p+5]),G=a(G,A[p+6]),u=a(u,A[p+7]),c(),A[p+0]=m,A[p+1]=q,A[p+2]=k,A[p+3]=d,A[p+4]=y,A[p+5]=x,A[p+
6]=G,A[p+7]=u;l();f=256}function l(c){var f,q;for(c=c&&"number"===typeof c?Math.abs(Math.floor(c)):1;c--;)for(C=a(C,1),y=a(y,C),f=0;256>f;f++){switch(f&3){case 0:b^=b<<13;break;case 1:b^=b>>>6;break;case 2:b^=b<<2;break;case 3:b^=b>>>16}b=a(A[f+128&255],b);var k=A[f];A[f]=q=a(A[k>>>2&255],a(b,y));B[f]=y=a(A[q>>>10&255],k)}}function c(){f--||(l(),f=255);return B[f]}var A=Array(256),b=0,y=0,C=0,B=Array(256),f=0;d(4294967295*Math.random());return{reset:g,seed:d,prng:l,rand:c,random:function(){return(67108864*
(c()>>>5)+(c()>>>6))/9007199254740992},internals:function(a){var c={a:b,b:y,c:C,m:A.slice(),r:B.slice(),g:f};a&&(b=a.a,y=a.b,C=a.c,A=a.m.slice(),B=a.r.slice(),f=a.g);return c}}}();var mathlib=function(){function a(a,n,b,c,e,f){var H=a[n];a[n]=a[e]^f;a[e]=a[c]^f;a[c]=a[b]^f;a[b]=H^f}function g(a){for(var n=arguments.length-1,b=a[arguments[n]];1<n;n--)a[arguments[n]]=a[arguments[n-1]];a[arguments[1]]=b;return g}function d(a,n,b,c){b=b||1;for(var e=n.length,H=[],f=0;f<e;f++)H[f]=a[n[f]];for(f=0;f<e;f++){var M=(f+b)%e;a[n[M]]=H[f];c&&(a[n[M]]+=c[M]-c[f]+c[c.length-1])}return d}function l(a,n){return a[n>>3]>>((n&7)<<2)&15}function c(a,n,b,c){var e=0;0>c&&(n<<=1);if(16<=b){a[b-
1]=0;for(var f=b-2;0<=f;f--){a[f]=n%(b-f);e^=a[f];n=~~(n/(b-f));for(var H=f+1;H<b;H--)a[H]>=a[f]&&a[H]++}0>c&&0!=(e&1)&&(n=a[b-1],a[b-1]=a[b-2],a[b-2]=n);return a}H=1985229328;var M=4275878552;for(f=0;f<b-1;f++){var v=p[b-1-f],I=n/v;n%=v;e^=I;I<<=2;32<=I?(I-=32,a[f]=M>>I&15,v=(1<<I)-1,M=(M&v)+(M>>4&~v)):(a[f]=H>>I&15,v=(1<<I)-1,H=(H&v)+(H>>>4&~v)+(M<<28),M>>=4)}0>c&&0!=(e&1)?(a[b-1]=a[b-2],a[b-2]=H&15):a[b-1]=H&15;return a}function A(a,b,c){b=b||a.length;var n=0;if(16<=b){for(var e=0;e<b-1;e++){n*=
b-e;for(var f=e+1;f<b;f++)a[f]<a[e]&&n++}return 0>c?n>>1:n}f=1985229328;var M=4275878552;for(e=0;e<b-1;e++){var h=a[e]<<2;n*=b-e;32<=h?(n+=M>>h-32&15,M-=286331152<<h-32):(n+=f>>h&15,M-=286331153,f-=286331152<<h)}return 0>c?n>>1:n}function b(a,b){var n;var c=0;for(n=b-2;0<=n;--n)c^=a%(b-n),a=~~(a/(b-n));return c&1}function y(a,b,c){var n=Math.abs(c);c=0>c?0:a[0]%n;for(--b;0<b;b--)c=c*n+a[b]%n;return c}function C(a,b,c,e){for(var n=Math.abs(e),f=n*c,H=1;H<c;H++)a[H]=b%n,f-=a[H],b=~~(b/n);a[0]=(0>e?
f:b)%n;return a}function B(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}function f(a,b,e){this.length=b;this.evenbase=e;if("p"==a)this.get=function(a){return A(a,this.length,this.evenbase)},this.set=function(a,b){return c(a,b,this.length,this.evenbase)};else if("o"==a)this.get=function(a){return y(a,this.length,this.evenbase)},this.set=function(a,b){return C(a,b,this.length,this.evenbase)};else if("c"==a){this.cnts=e.slice();this.cums=[0];for(a=1;a<=
this.cntn;a++)this.cums[a]=this.cums[a-1]+e[a-1];b=this.n=this.cums[this.cntn];var n=1;for(a=0;a<this.cntn;a++)for(var f=1;f<=e[a];f++,b--)n*=b/f;this.x=Math.round(n);this.get=function(a){for(var b=this.n,n=this.cnts.slice(),c=this.cums,e=-1,f=0,H=1,h=0;h<b;h++){var z=a[h];f=f*(b-h)+B(e&(1<<c[z])-1)*H;H*=n[z]--;e&=~(1<<c[z]+n[z])}return Math.round(f/H)};this.set=function(a,b){for(var n=b,c=this.n,e=this.cnts.slice(),f=this.x,H=0;H<c;H++)for(var h=0;h<e.length;h++)if(0!=e[h]){var z=~~(f*e[h]/(c-H));
if(n<z){e[h]--;a[H]=h;f=z;break}n-=z}}}else debugger}function q(a,b,c,e){e=e||6;if($.isArray(c)){var n=new f(c[1],c[2],c[3]);c=c[0];for(var H=0;H<e;H++){a[H]=[];for(var h=0;h<b;h++){var t=n.set([],h);c(t,H);a[H][h]=n.get(t)}}}else for(H=0;H<e;H++)for(a[H]=[],h=0;h<b;h++)a[H][h]=c(h,H)}function r(){this.ca=[0,1,2,3,4,5,6,7];this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function D(a,b,c,e,f,h,t,k){var n=$.isArray(f);h=h||6;t=t||3;k=k||256;e=e||256;for(var H=0,z=c+7>>>3;H<z;H++)a[H]=-1;$.isArray(b)||(b=[b]);
for(H=0;H<b.length;H++)a[b[H]>>3]^=15<<((b[H]&7)<<2);for(H=b=0;H<=e;H++){z=0;var q=H>=k,m=H+1^15,S=q?15:H,p=q?H:15,M=0;a:for(;M<c;M++,b>>=4){if(0==(M&7)&&(b=a[M>>3],!q&&-1==b)){M+=7;continue}if((b&15)==S)for(var d=0;d<h;d++)for(var r=M,L=0;L<t;L++)if(r=n?f[d][r]:f(r,d),l(a,r)==p){++z;if(q){a[M>>3]^=m<<((M&7)<<2);continue a}a[r>>3]^=m<<((r&7)<<2)}}if(0==z)break;DEBUG&&console.log("[prun]",z)}}function k(a,b,c){this.N_STATES=c.length;this.N_MOVES=a;this.N_POWER=b;this.state_params=c;this.inited=!1}
function w(a,b,c,e,f,h){this.isSolved=a||function(){return!0};this.getPrun=b;this.doMove=c;this.N_AXIS=e;this.N_POWER=f;this.ckmv=h||G(e,function(a){return 1<<a})}function E(a,b,c){this.solvedStates=a;this.doMove=b;this.movesList=[];for(var n in c)this.movesList.push([n,c[n]]);this.prunTable={};this.toUpdateArr=null;this.prunTableSize=0;this.prunDepth=-1;this.cost=0;this.MAX_PRUN_SIZE=1E5}function x(a){return~~(L.random()*a)}function G(a,b){for(var n=[],c="function"==typeof b,e=0;e<a;e++)n[e]=c?b(e):
b;return n}for(var u=[],p=[1],m=0;32>m;++m){u[m]=[];for(var h=0;32>h;++h)u[m][h]=0}for(m=0;32>m;++m)for(u[m][0]=u[m][m]=1,p[m+1]=p[m]*(m+1),h=1;h<m;++h)u[m][h]=u[m-1][h-1]+u[m-1][h];r.SOLVED=new r;r.EdgeMult=function(a,b,c){for(var n=0;12>n;n++)c.ea[n]=a.ea[b.ea[n]>>1]^b.ea[n]&1};r.CornMult=function(a,b,c){for(var n=0;8>n;n++)c.ca[n]=a.ca[b.ca[n]&7]&7|((a.ca[b.ca[n]&7]>>3)+(b.ca[n]>>3))%3<<3};r.CubeMult=function(a,b,c){r.CornMult(a,b,c);r.EdgeMult(a,b,c)};r.prototype.init=function(a,b){this.ca=a.slice();
this.ea=b.slice();return this};r.prototype.hashCode=function(){for(var a=0,b=0;20>b;b++)a=0|31*a+(12>b?this.ea[b]:this.ca[b-12]);return a};r.prototype.isEqual=function(a){a=a||r.SOLVED;for(var b=0;8>b;b++)if(this.ca[b]!=a.ca[b])return!1;for(b=0;12>b;b++)if(this.ea[b]!=a.ea[b])return!1;return!0};var t=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],e=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];r.prototype.toFaceCube=
function(a,b){a=a||t;b=b||e;for(var c=[],n=0;54>n;n++)c[n]="URFDLB"[~~(n/9)];for(var f=0;8>f;f++){n=this.ca[f]&7;for(var h=this.ca[f]>>3,k=0;3>k;k++)c[a[f][(k+h)%3]]="URFDLB"[~~(a[n][k]/9)]}for(f=0;12>f;f++)for(n=this.ea[f]>>1,h=this.ea[f]&1,k=0;2>k;k++)c[b[f][(k+h)%2]]="URFDLB"[~~(b[n][k]/9)];return c.join("")};r.prototype.invFrom=function(a){for(var b=0;12>b;b++)this.ea[a.ea[b]>>1]=b<<1|a.ea[b]&1;for(b=0;8>b;b++)this.ca[a.ca[b]&7]=b|32>>(a.ca[b]>>3)&24;return this};r.prototype.fromFacelet=function(a,
b,c){b=b||t;c=c||e;for(var n=0,f=[],h=a[4]+a[13]+a[22]+a[31]+a[40]+a[49],k=0;54>k;++k){f[k]=h.indexOf(a[k]);if(-1==f[k])return-1;n+=1<<(f[k]<<2)}if(10066329!=n)return-1;var q;for(k=0;8>k;++k){for(q=0;3>q&&0!=f[b[k][q]]&&3!=f[b[k][q]];++q);a=f[b[k][(q+1)%3]];n=f[b[k][(q+2)%3]];for(h=0;8>h;++h)if(a==~~(b[h][1]/9)&&n==~~(b[h][2]/9)){this.ca[k]=h|q%3<<3;break}}for(k=0;12>k;++k)for(h=0;12>h;++h){if(f[c[k][0]]==~~(c[h][0]/9)&&f[c[k][1]]==~~(c[h][1]/9)){this.ea[k]=h<<1;break}if(f[c[k][0]]==~~(c[h][1]/9)&&
f[c[k][1]]==~~(c[h][0]/9)){this.ea[k]=h<<1|1;break}}return this};r.prototype.verify=function(){for(var a=0,c=0,e=0;12>e;e++)a|=256<<(this.ea[e]>>1),c^=this.ea[e]&1;e=[];for(var f=0;8>f;f++)a|=1<<(this.ca[f]&7),c+=this.ca[f]>>3<<1,e.push(this.ca[f]&7);return 1048575!=a||0!=c%6||b(A(this.ea,12),12)!=b(A(e,8),8)?-1:0};r.moveCube=function(){for(var a=[],b=0;18>b;b++)a[b]=new r;a[0].init([3,0,1,2,4,5,6,7],[6,0,2,4,8,10,12,14,16,18,20,22]);a[3].init([20,1,2,8,15,5,6,19],[16,2,4,6,22,10,12,14,8,18,20,0]);
a[6].init([9,21,2,3,16,12,6,7],[0,19,4,6,8,17,12,14,3,11,20,22]);a[9].init([0,1,2,3,5,6,7,4],[0,2,4,6,10,12,14,8,16,18,20,22]);a[12].init([0,10,22,3,4,17,13,7],[0,2,20,6,8,10,18,14,16,4,12,22]);a[15].init([0,1,11,23,4,5,18,14],[0,2,4,23,8,10,12,21,16,18,7,15]);for(b=0;18>b;b+=3)for(var c=0;2>c;c++)r.EdgeMult(a[b+c],a[b],a[b+c+1]),r.CornMult(a[b+c],a[b],a[b+c+1]);return a}();r.rotCube=function(){for(var a=(new r).init([3,0,1,2,7,4,5,6],[6,0,2,4,14,8,10,12,23,17,19,21]),b=(new r).init([5,4,7,6,1,0,
3,2],[12,10,8,14,4,2,0,6,18,16,22,20]),c=(new r).init([8,20,13,17,19,15,22,10],[3,16,11,18,7,22,15,20,1,9,13,5]),e=new r,f=new r,h=[],k=0;24>k;k++)h[k]=(new r).init(e.ca,e.ea),r.CornMult(e,a,f),r.EdgeMult(e,a,f),e.init(f.ca,f.ea),3==k%4&&(r.CornMult(e,b,f),r.EdgeMult(e,b,f),e.init(f.ca,f.ea)),7==k%8&&(r.CornMult(e,c,f),r.EdgeMult(e,c,f),e.init(f.ca,f.ea));a=[];b=[];c=[];var t=[],v=[];for(k=0;24>k;k++)b[k]=h[k].hashCode(),c[k]=[],t[k]=[],v[k]=[];for(k=0;18>k;k++)a[k]=r.moveCube[k].hashCode();for(k=
0;24>k;k++)for(var q=0;24>q;q++){r.CornMult(h[k],h[q],e);r.EdgeMult(h[k],h[q],e);var m=b.indexOf(e.hashCode());c[k][q]=m;t[m][q]=k}for(k=0;24>k;k++)for(q=0;18>q;q++)r.CornMult(h[t[0][k]],r.moveCube[q],e),r.EdgeMult(h[t[0][k]],r.moveCube[q],e),r.CornMult(e,h[k],f),r.EdgeMult(e,h[k],f),m=a.indexOf(f.hashCode()),v[k][q]=m;r.rotMult=c;r.rotMulI=t;r.rotMulM=v;r.rot2str=";y';y2;y;z2;y' z2;y2 z2;y z2;y' x';y2 x';y x';x';y' x;y2 x;y x;x;y z;z;y' z;y2 z;y' z';y2 z';y z';z'".split(";");return h}();r.prototype.edgeCycles=
function(){for(var a=[],b=[0,0,0],c=0,e=!1,f=0;12>f;++f)if(!a[f]){var h=-1,k=!1,q=f;do a[q]=!0,++h,k^=this.ea[q]&1,q=this.ea[q]>>1;while(q!=f);c+=h>>1;h&1&&(e=!e,++c);k&&(0==h?++b[0]:h&1?b[2]^=1:++b[1])}b[1]+=b[2];c=b[0]<b[1]?c+(b[0]+b[1]>>1):c+(b[1]+[0,2,3,5,6,8,9][b[0]-b[1]>>1]);return c-e};var J=/^\s*([URFDLB]w?|[EMSyxz]|2-2[URFDLB]w)(['2]?)(@\d+)?\s*$/,K=new r;r.prototype.selfMoveStr=function(a,b){var c=J.exec(a);if(c){var e=c[1],f="2'".indexOf(c[2]||"-")+2;b&&(f=4-f);c[3]&&(this.tstamp=~~c[3].slice(1));
this.ori=this.ori||0;var n="URFDLB".indexOf(e);if(-1!=n)return c=r.rotMulM[this.ori][3*n+f%4-1],r.EdgeMult(this,r.moveCube[c],K),r.CornMult(this,r.moveCube[c],K),this.init(K.ca,K.ea),c;n="UwRwFwDwLwBw".indexOf(e);if(-1!=n){n>>=1;c=r.rotMulM[this.ori][(n+3)%6*3+f%4-1];r.EdgeMult(this,r.moveCube[c],K);r.CornMult(this,r.moveCube[c],K);this.init(K.ca,K.ea);n=[3,15,17,1,11,23][n];for(e=0;e<f;e++)this.ori=r.rotMult[n][this.ori];return c}n="2-2Uw 2-2Rw 2-2Fw 2-2Dw 2-2Lw 2-2Bw".split(" ").indexOf(e);-1==
n&&(n=[null,null,"S","E","M",null].indexOf(e));if(-1!=n){e=(n+3)%6*3+f%4-1;c=r.rotMulM[this.ori][3*n+(4-f)%4-1];r.EdgeMult(this,r.moveCube[c],K);r.CornMult(this,r.moveCube[c],K);this.init(K.ca,K.ea);e=r.rotMulM[this.ori][e];r.EdgeMult(this,r.moveCube[e],K);r.CornMult(this,r.moveCube[e],K);this.init(K.ca,K.ea);n=[3,15,17,1,11,23][n];for(e=0;e<f;e++)this.ori=r.rotMult[n][this.ori];return c+18}n="yxz".indexOf(e);if(-1!=n)for(n=[3,15,17][n],e=0;e<f;e++)this.ori=r.rotMult[n][this.ori]}};r.prototype.selfConj=
function(a){void 0===a&&(a=this.ori);0!=a&&(r.CornMult(r.rotCube[a],this,K),r.EdgeMult(r.rotCube[a],this,K),r.CornMult(K,r.rotCube[r.rotMulI[0][a]],this),r.EdgeMult(K,r.rotCube[r.rotMulI[0][a]],this),this.ori=r.rotMulI[this.ori][a]||0)};m=function(){var a=[11,8,9,10,6,7,4,5,1,2,3,0],b=[[5,1,2,3,4],[10,6,2,0,5],[6,7,3,0,1],[7,8,4,0,2],[8,9,5,0,3],[9,10,1,0,4],[11,7,2,1,10],[11,8,3,2,6],[11,9,4,3,7],[11,10,5,4,8],[11,6,1,5,9],[6,10,9,8,7]];return{doMove:function(c,e,f,n){f=(f%5+5)%5;if(0!=f){for(var h=
11*e,k=[[],[],[],[],[]],v=0;5>v;v++){var q=b[e][v],t=b[q].indexOf(e);if(0==n||1==n)k[v].push(h+v),k[v].push(h+v+5),k[v].push(11*q+t%5+5),k[v].push(11*q+t%5),k[v].push(11*q+(t+1)%5);if(1==n||2==n){k[v].push(11*q+10);for(var m=1;5>m;m++)k[v].push(11*q+(t+m)%5+5);for(m=2;5>m;m++)k[v].push(11*q+(t+m)%5);m=4-v;var p=a[e];q=b[p][m];t=b[q].indexOf(p);k[v].push(11*p+m);k[v].push(11*p+m+5);k[v].push(11*q+10);for(m=0;5>m;m++)k[v].push(11*q+(t+m)%5+5),k[v].push(11*q+(t+m)%5)}}for(v=0;v<k[0].length;v++)mathlib.acycle(c,
[k[0][v],k[1][v],k[2][v],k[3][v],k[4][v]],f)}},oppFace:a,adjFaces:b}}();h=k.prototype;h.search=function(a,b,c){c=(c||99)+1;if(!this.inited){this.move=[];this.prun=[];for(var e=0;e<this.N_STATES;e++){var f=this.state_params[e],n=f[0],h=f[1],k=f[2],v=f[3];f=f[4];this.move[e]=[];this.prun[e]=[];q(this.move[e],k,h,this.N_MOVES);D(this.prun[e],n,k,v,this.move[e],this.N_MOVES,this.N_POWER,f)}this.inited=!0}for(this.sol=[];b<c&&!this.idaSearch(a,b,-1);b++);return b==c?null:this.sol.reverse()};h.toStr=function(a,
b,c){for(var e=[],f=0;f<a.length;f++)e.push(b[a[f][0]]+c[a[f][1]]);return e.join(" ").replace(/ +/g," ")};h.idaSearch=function(a,b,c){for(var e=this.N_STATES,f=0;f<e;f++)if(l(this.prun[f],a[f])>b)return!1;if(0==b)return!0;for(var n=a[0]+b+c+1,k=0;k<this.N_MOVES;k++){var h=(k+n)%this.N_MOVES;if(h!=c)for(var v=a.slice(),q=0;q<this.N_POWER;q++){for(f=0;f<e;f++)v[f]=this.move[f][h][v[f]];if(this.idaSearch(v,b-1,h))return this.sol.push([h,q]),!0}}return!1};h=w.prototype;h.solve=function(a,b,c){a=this.solveMulti([a],
b,c);return null==a?null:a[0]};h.solveMulti=function(a,b,c){this.callback=c||function(){return!0};c=[];var e=0;a:for(;e<=b;e++){for(var f=0;f<a.length;f++)if(this.sidx=f,0==this.idaSearch(a[f],e,-1,c))break a;this.sidx=-1}return-1==this.sidx?null:[c,this.sidx]};h.idaSearch=function(a,b,c,e){var f=this.getPrun(a);if(f>b)return f>b+1?2:1;if(0==b)return this.isSolved(a)&&this.callback(e,this.sidx)?0:1;if(0==f&&this.isSolved(a)&&1==b)return 1;for(f=0;f<this.N_AXIS;f++)if(!(this.ckmv[c]>>f&1))for(var n=
a,h=0;h<this.N_POWER;h++){n=this.doMove(n,f);if(null==n)break;e.push([f,h]);var k=this.idaSearch(n,b-1,f,e);if(0==k)return 0;e.pop();if(2==k)break}return 1};h=E.prototype;h.updatePrun=function(a){a=void 0===a?this.prunDepth+1:a;for(var b=this.prunDepth+1;b<=a;b++){if(this.prevSize>=this.MAX_PRUN_SIZE){DEBUG&&console.log("[gSolver] skipPrun",b,this.prunTableSize);break}var c=+new Date;if(1>b)for(var e=this.prevSize=0;e<this.solvedStates.length;e++){var f=this.solvedStates[e];f in this.prunTable||(this.prunTable[f]=
b,this.prunTableSize++)}else this.updatePrunBFS(b-1);if(0==this.cost)break;this.prunDepth=b;DEBUG&&console.log("[gSolver] updatePrun",b,this.prunTableSize-this.prevSize,+new Date-c);this.prevSize=this.prunTableSize}};h.updatePrunBFS=function(a){if(null==this.toUpdateArr){this.toUpdateArr=[];for(var b in this.prunTable)this.prunTable[b]==a&&this.toUpdateArr.push(b)}for(;0!=this.toUpdateArr.length;){b=this.toUpdateArr.pop();for(var c=0;c<this.movesList.length;c++){var e=this.doMove(b,this.movesList[c][0]);
!e||e in this.prunTable||(this.prunTable[e]=a+1,this.prunTableSize++)}if(0<=this.cost){if(0==this.cost)return;this.cost--}}this.toUpdateArr=null};h.search=function(a,b,c){this.sol=[];this.subOpt=!1;this.state=a;this.visited={};this.maxl=b||0;return this.searchNext(c)};h.searchNext=function(a,b){a=a+1||99;this.prevSolStr=this.solArr?this.solArr.join(","):null;this.solArr=null;for(this.cost=b||-1;this.maxl<a;this.maxl++){this.updatePrun(Math.ceil(this.maxl/2));if(0==this.cost)return null;if(this.idaSearch(this.state,
this.maxl,null,0))break}return this.solArr};h.getPruning=function(a){a=this.prunTable[a];return void 0===a?this.prunDepth+1:a};h.idaSearch=function(a,b,c,e){if(this.getPruning(a)>b)return!1;if(0==b){if(-1==this.solvedStates.indexOf(a))return!1;a=this.getSolArr();this.subOpt=!0;if(a.join(",")==this.prevSolStr)return!1;this.solArr=a;return!0}if(!this.subOpt){if(a in this.visited&&this.visited[a]<e)return!1;this.visited[a]=e}if(0<=this.cost){if(0==this.cost)return!0;this.cost--}var f=null==c?"":this.movesList[c][0];
c=null==c?-1:this.movesList[c][1];for(var n=this.sol[e]||0;n<this.movesList.length;n++){var h=this.movesList[n],k=h[1]^c;h=h[0];if(!(0==k||0==(k&15)&&h<=f)&&(k=this.doMove(a,h))&&k!=a){this.sol[e]=n;if(this.idaSearch(k,b-1,n,e+1))return!0;this.sol.pop()}}return!1};h.getSolArr=function(){for(var a=[],b=0;b<this.sol.length;b++)a.push(this.movesList[this.sol[b]][0]);return a};var L=function(){function a(a,f){if(f&&(f!=e||c>a)){for(var n=[],h=0;h<f.length;h++)n[h]=f.charCodeAt(h);isaac.seed(n);b=isaac.random;
c=0;e=f}for(;c<a;)b(),c++}var b,c,e,f=""+(new Date).getTime();"undefined"!=typeof crypto&&crypto.getRandomValues?(f=String.fromCharCode.apply(null,crypto.getRandomValues(new Uint16Array(256))),DEBUG&&console.log("[mathlib] use crypto seed",f)):DEBUG&&console.log("[mathlib] use datetime seed",f);a(256,f);return{random:function(){c++;return b()},getSeed:function(){return[c,e]},setSeed:a}}(),O=/^\s*(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)\s*$/;Math.TAU=2*Math.PI;return{Cnk:u,fact:p,bitCount:B,getPruning:l,
setNOri:C,getNOri:y,setNPerm:c,getNPerm:A,getNParity:b,coord:f,createMove:q,createMoveHash:function(a,b,c,e){var f=[a],h={},n=[];h[c(a)]=0;n[0]=1;a=[];for(var k=0;k<b.length;k++)a[k]=[];for(var v=+new Date,q=0;q<f.length;q++){q==n[n.length-1]&&n.push(f.length);9999==q%1E4&&DEBUG&&console.log(q,"states scanned, tt=",+new Date-v);var t=f[q];for(k=0;k<b.length;k++){var m=e(t,b[k]);if(m){var p=c(m);p in h||(h[p]=f.length,f.push(m));a[k][q]=h[p]}else a[k][q]=-1}}DEBUG&&console.log("[move hash] "+f.length+
" states generated, tt=",+new Date-v,JSON.stringify(n));return[a,h]},edgeMove:function(b,c){0==c?a(b,0,7,8,4,1):1==c?a(b,3,6,11,7,0):2==c?a(b,0,1,2,3,0):3==c?a(b,2,5,10,6,1):4==c?a(b,1,4,9,5,0):5==c&&a(b,11,10,9,8,0)},circle:g,circleOri:a,acycle:d,createPrun:D,CubieCube:r,minx:m,SOLVED_FACELET:"UUUUUUUUURRRRRRRRRFFFFFFFFFDDDDDDDDDLLLLLLLLLBBBBBBBBB",fillFacelet:function(a,b,c,e,f){for(var h=0;h<a.length;h++){var k=a[h];if("number"==typeof k)b[k]=~~(a[c[h]]/f);else for(var n=e[h]||0,q=0;q<k.length;q++)b[k[(q+
n)%k.length]]=~~(a[c[h]][q]/f)}},detectFacelet:function(a,b,c,e,f){for(var h=0;h<a.length;h++){var k=a[h].length,n=0;a:for(;n<a.length+1;n++){if(n==a.length)return-1;if(a[n].length==k)for(var q=0;q<k;q++){for(var t=!0,m=0;m<k;m++)if(~~(a[n][m]/f)!=b[a[h][(m+q)%k]]){t=!1;break}if(t){c[h]=n;e[h]=q;break a}}}}return 0},rn:x,rndEl:function(a){return a[~~(L.random()*a.length)]},rndProb:function(a){for(var b=0,c=0,e=0;e<a.length;e++)0!=a[e]&&(L.random()<a[e]/(b+a[e])&&(c=e),b+=a[e]);return c},rndHit:function(a){return L.random()<
a},time2str:function(a,b){if(!a)return"N/A";var c=new Date(1E3*a);return(b||"%Y-%M-%D %h:%m:%s").replace("%Y",c.getFullYear()).replace("%M",("0"+(c.getMonth()+1)).slice(-2)).replace("%D",("0"+c.getDate()).slice(-2)).replace("%h",("0"+c.getHours()).slice(-2)).replace("%m",("0"+c.getMinutes()).slice(-2)).replace("%s",("0"+c.getSeconds()).slice(-2))},str2time:function(a){a=O.exec(a);if(!a)return null;var b=new Date(0);b.setFullYear(~~a[1]);b.setMonth(~~a[2]-1);b.setDate(~~a[3]);b.setHours(~~a[4]);b.setMinutes(~~a[5]);
b.setSeconds(~~a[6]);return~~(b.getTime()/1E3)},obj2str:function(a){return"string"==typeof a?a:JSON.stringify(a)},str2obj:function(a){return"string"!=typeof a?a:JSON.parse(a)},valuedArray:G,idxArray:function(a,b){for(var c=[],e=0;e<a.length;e++)c.push(a[e][b]);return c},Solver:k,Searcher:w,rndPerm:function(a,b){for(var c=0,e=[],f=0;f<a;f++)e[f]=f;for(f=0;f<a-1;f++){var h=x(a-f);g(e,f,f+h);c^=0!=h}b&&c&&g(e,0,1);return e},gSolver:E,getSeed:L.getSeed,setSeed:L.setSeed}}();var grouplib=function(a){function g(a,d){if(a.sgs)this.copy(a);else{this.sgs=[];this.sgsi=[];this.t2i=[];this.i2t=[];this.keyIdx=[];this.Tk=[];this.e=[];for(var b=a[0].length,c=0;c<b;c++)this.e[c]=c;for(c=0;c<b;c++)this.sgs.push([]),this.sgsi.push([]),this.t2i.push([]),this.i2t.push([c]),this.Tk.push([]),this.sgs[c][c]=this.e,this.sgsi[c][c]=this.e,this.t2i[c][c]=0;this.extend(a,d)}}function d(a){this.gens=a;this.glen=a.length;this.trieNodes=[null];this.trieNodes.push([]);this.skipSeqs=[]}function l(a,
d,b){this.genG=a;this.genH=d;this.genM=b;if(!d){d=[];for(b=0;b<a[0].length;b++)d[b]=b;this.genH=[d]}}g.prototype.extend=function(a,d){for(var b=0;b<a.length;b++){var c=a[b];d&&(c=this.permMult(this.permMult(this.permInv(d),c),d));0>this.isMember(c)&&this.knutha(this.e.length-1,c)}};g.prototype.copy=function(a){this.sgs=[];this.sgsi=[];this.t2i=[];this.i2t=[];this.keyIdx=a.keyIdx.slice();this.Tk=[];this.e=a.e;for(var c=this.e.length,b=0;b<c;b++)this.sgs[b]=a.sgs[b].slice(),this.sgsi[b]=a.sgsi[b].slice(),
this.t2i[b]=a.t2i[b].slice(),this.i2t[b]=a.i2t[b].slice(),this.Tk[b]=a.Tk[b].slice()};g.prototype.permMult=function(a,d){for(var b=[],c=0;c<a.length;c++)b[c]=d[a[c]];return b};g.prototype.toKeyIdx=function(a){var c=[];a=a||this.e;for(var b=0;b<this.keyIdx.length;b++)c[b]=a[this.keyIdx[b]];return c};g.prototype.permInv=function(a){for(var c=[],b=0;b<a.length;b++)c[a[b]]=b;return c};g.prototype.permCmp=function(a,d){if(a.length!=d.length)return a.length-d.length;for(var b=0;b<a.length;b++)if(a[b]!=
d[b])return a[b]-d[b];return 0};g.prototype.isMember=function(a,d){d=d||0;for(var b=0,c=[],g=a.length-1;g>=d;g--){for(var l=a[g],f=0;f<c.length;f++)l=c[f][l];if(l!==g){if(!this.sgs[g][l])return-1;c.push(this.sgsi[g][l])}b=b*this.i2t[g].length+this.t2i[g][l]}return b};g.prototype.isSubgroupMemberByKey=function(a,d){for(var b=0,c=[],g=0;g<this.keyIdx.length;g++){for(var l=this.keyIdx[g],f=a[g],q=0;q<c.length;q++)f=c[q][f];if(f!==l){if(!d.sgs[l][f])return-1;c.push(d.sgsi[l][f])}b=b*d.i2t[l].length+d.t2i[l][f]}return b};
g.prototype.knutha=function(a,d){this.Tk[a].push(d);for(var b=0;b<this.sgs[a].length;b++)this.sgs[a][b]&&this.knuthb(a,this.permMult(this.sgs[a][b],d))};g.prototype.knuthb=function(a,d){var b=d[a];if(this.sgs[a][b])b=this.permMult(d,this.sgsi[a][b]),0>this.isMember(b)&&this.knutha(a-1,b);else for(this.sgs[a][b]=d,this.sgsi[a][b]=this.permInv(d),this.t2i[a][b]=this.i2t[a].length,this.i2t[a].push(b),2==this.i2t[a].length&&(this.keyIdx.push(a),this.keyIdx.sort(function(a,b){return b-a})),b=0;b<this.Tk[a].length;b++)this.knuthb(a,
this.permMult(d,this.Tk[a][b]))};g.prototype.size=function(a){for(var c=this.sgs.length,b=a?BigInt(1):1,d=0;d<c;d++)b*=a?BigInt(this.i2t[d].length):this.i2t[d].length;return b};g.prototype.minElem=function(a,d){a=this.permInv(a);for(var b=0;b<this.keyIdx.length;b++){for(var c=this.keyIdx[b],g=a[c],l=c,f=1;f<this.i2t[c].length;f++){var q=this.i2t[c][f];a[q]>g&&(g=a[q],l=q)}l!==c&&(a=this.permMult(this.sgs[c][l],a))}return this.permInv(a)};g.prototype.rndElem=function(){for(var c=this.e.slice(),d=this.e.length-
1;0<=d;d--){for(var b=0,g=0,l=0;l<=d;l++)this.sgs[d][l]&&1>a(++b)&&(g=l);g!==d&&(c=this.permMult(c,this.sgsi[d][g]))}return c};d.prototype.permMult=function(a,d){for(var b=[],c=0;c<a.length;c++)b[c]=d[a[c]];return b};d.prototype.addSkipSeq=function(a){this.skipSeqs.push(a.slice());for(var c=1,b=0;b<a.length;b++){var d=~~this.trieNodes[c][a[b]];if(-1==d)break;if(b==a.length-1){this.trieNodes[c][a[b]]=-1;break}if(0>=d)for(d=this.trieNodes.length,this.trieNodes.push([]),this.trieNodes[c][a[b]]=d,c=0;c<
this.glen;c++)this.updateNext(a.slice(0,b+1).concat(c));c=d}};d.prototype.traversalTrie=function(a,d,b){if(!(0>=a)){for(var c=0;c<this.glen;c++)d.push(c),this.traversalTrie(~~this.trieNodes[a][c],d,b),d.pop();b(a,d)}};d.prototype.updateNext=function(a){for(var c=1,b=0;b<a.length;b++){var d=~~this.trieNodes[c][a[b]];0==d&&(d=this.updateNext(a.slice(1,b+1)),d=0<d?~d:d,this.trieNodes[c][a[b]]=d);if(-1==d)return-1;0>d&&(d=~d);c=d}return c};d.prototype.refillNext=function(){this.traversalTrie(1,[],function(a,
d){for(var b=0;b<this.glen;b++){var c=~~this.trieNodes[a][b];-1!=c&&c<=a&&(this.trieNodes[a][b]=0)}}.bind(this));this.traversalTrie(1,[],function(a,d){for(var b=0;b<this.glen;b++){0==(b&31)&&(this.trieNodes[a][this.glen+(b>>5)]=0);var c=~~this.trieNodes[a][b];-1!=c&&c<=a&&this.updateNext(d.concat(b));-1==~~this.trieNodes[a][b]&&(this.trieNodes[a][this.glen+(b>>5)]|=1<<(b&31))}}.bind(this))};d.prototype.countSeq=function(a,d){for(var b=d?BigInt(0):0,c=d?[BigInt(0),BigInt(1)]:[0,1],g=d?[BigInt(0),BigInt(1)]:
[1],l=0;l<a;l++){for(var f=[],q=b,r=1;r<this.trieNodes.length;r++){var D=c[r]||b;if(0!=D)for(var k=0;k<this.glen;k++){var w=~~this.trieNodes[r][k];-1!=w&&(w=0>w?~w:w,f[w]=(f[w]||b)+D,q+=D)}}c=f;g.push(q)}return g};d.prototype.countSeqMove=function(a,d,b){var c=[];c[b*this.trieNodes.length+1-1]=1;b=[];for(var g=0;g<a;g++){for(var l=[],f=[],q=0,r=0;r<d[0].length;r++)for(var D=1;D<this.trieNodes.length;D++){var k=c[r*this.trieNodes.length+D-1]||0;if(0!=k)for(var w=0;w<this.glen;w++){var E=~~this.trieNodes[D][w];
if(-1!=E){E=0>E?~E:E;var x=d[w][r];E=x*this.trieNodes.length+E-1;l[E]=(l[E]||0)+k;f[x]=(f[x]||0)+k;q+=k}}}c=l;b.push(f,q)}return b};d.prototype.initTrie=function(a){this.trieNodes=[null];this.trieNodes.push([]);this.refillNext();for(var c=[],b=0;b<this.gens[0].length;b++)c[b]=b;b=new Map;for(var d=0;d<=a;d++)this.searchSkip(c,d,[],1,b),this.refillNext()};d.prototype.searchSkip=function(a,d,b,g,l){if(0==d)a=String.fromCharCode.apply(null,a),l.has(a)?this.addSkipSeq(b):l.set(a,b.slice());else for(var c=
0;c<this.glen;c++){var f=this.trieNodes[g][c];if(-1!=f){0>f&&(f=~f);var q=this.permMult(this.gens[c],a);b.push(c);this.searchSkip(q,d-1,b,f,l);b.pop()}}};l.prototype.permHash=function(a){return String.fromCharCode.apply(null,a)};l.prototype.midCosetHash=function(a){return null==this.sgsM?this.sgsG.isMember(this.sgsG.permInv(a),this.sgsMdepth):this.permHash(this.sgsM.minElem(a))};l.prototype.initTables=function(a){if(!this.coset2idx){a=a||1E5;this.sgsH=new g(this.genH);this.sgsG=new g(this.sgsH);this.sgsG.extend(this.genG);
var c=this.sgsG.size()/this.sgsH.size();this.isCosetSearch=1<this.sgsH.size();var b=1;if(this.genM)this.sgsM=new g(this.genM),b=this.sgsG.size()/this.sgsM.size();else if(1==this.sgsH.size()){this.sgsM=null;this.sgsMdepth=0;for(var l=this.sgsG.e.length-1;0<=l&&!(b*this.sgsG.i2t[l].length>a);l--)this.sgsMdepth=l,b*=this.sgsG.i2t[l].length}else c<=a?(this.sgsM=new g(this.genH),b=c):(this.sgsM=null,this.sgsMdepth=this.sgsG.e.length);this.clen=b;DEBUG&&console.log("[Subgroup Solver] coset space:",c,"mid coset size:",
b);this.genEx=[];this.genExi=[];this.genExMap=[];var C=new Map;C.set(this.permHash(this.sgsG.e),-1);for(l=0;l<this.genG.length;l++){a=this.genG[l];for(var B=1;;){c=this.permHash(a);if(C.has(c))break;C.set(c,this.genEx.length);this.genEx.push(a);this.genExi.push(this.sgsG.permInv(a));this.genExMap.push([l,B]);a=this.sgsG.permMult(this.genG[l],a);B++}}this.glen=this.genEx.length;for(l=0;l<this.glen;l++)a=this.sgsG.permInv(this.genEx[l]),this.genExMap[l][2]=C.get(this.permHash(a));this.canon=new d(this.genEx);
this.canon.initTrie(2);this.canoni=new d(this.genEx);for(l=0;l<this.canon.skipSeqs.length;l++){a=this.canon.skipSeqs[l].slice();a.reverse();for(C=0;C<a.length;C++)a[C]=this.genExMap[a[C]][2];this.canoni.addSkipSeq(a)}this.canoni.refillNext();this.moveTable=[];this.idx2coset=[this.sgsG.e];this.coset2idx={};for(l=this.coset2idx[this.midCosetHash(this.sgsG.e)]=0;l<this.idx2coset.length;l++){if(l>=b){console.log("ERROR!");break}a=this.idx2coset[l];for(C=0;C<this.glen;C++)1==this.genExMap[C][1]&&(B=this.sgsG.permMult(this.genEx[C],
a),c=this.midCosetHash(B),c in this.coset2idx||(this.coset2idx[c]=this.idx2coset.length,this.idx2coset.push(B)),this.moveTable[l*this.glen+C]=this.coset2idx[c])}b=null;for(C=0;C<this.glen;C++)if(1==this.genExMap[C][1])b=C;else for(l=0;l<this.clen;l++)this.moveTable[l*this.glen+C]=this.moveTable[this.moveTable[l*this.glen+C-1]*this.glen+b];this.prunTable=this.initPrunTable(this.sgsG.e);DEBUG&&console.log("[Subgroup Solver] prun table size:",this.prunTable[0].length)}};l.prototype.idaMidSearch=function(a,
d,b,g,l,B,f,q,r){var c=q[0][a];if(c>d)return!1;if(0==d){if(a>=this.clen){l.push(-1);var k=this.sgsG.permMult(B,f),w=r(l,k);l.pop();return w}return r(l,B)}if(a>=this.clen&&0!=b&&(w=q[3][a-this.clen],l.push(-1),k=this.sgsG.permMult(B,f),w=this.idaMidSearch(w,d,1,g,l,k,f,q,r),l.pop(),w))return w;b=g[b||1];for(var E=a*(this.glen+31>>5),x=0;x<this.glen;x+=32){var G=b[this.glen+(x>>5)];G|=c>=d-1?q[c-d+2][E+(x>>5)]:0;for(G=~G&(32<=this.glen-x?-1:(1<<this.glen-x)-1);0!=G;){k=31-Math.clz32(G);G-=1<<k;k+=x;
w=a%this.clen;w=this.moveTable[w*this.glen+k]+a-w;if(DEBUG&&q[0][w]>=d)debugger;var u=b[k];l.push(k);k=this.sgsG.permMult(B,this.genExi[k]);w=this.idaMidSearch(w,d-1,u^u>>31,g,l,k,f,q,r);l.pop();if(w)return w}}return!1};l.prototype.initPrunTable=function(a,d){for(var b=this.coset2idx[this.midCosetHash(a)],c=[],g=[],l=[],f=this.glen+31>>5,q=0;q<this.clen;q++)c[q]=-1;var r=[];if(d){for(q=0;q<this.clen;q++)c.push(-1,-1),r[q]=this.coset2idx[this.midCosetHash(this.sgsG.permMult(a,this.idx2coset[q]))],
r[r[q]+this.clen]=q;c[0]=0}else c[b]=0;b=1;for(var D=q=0;b!=q;){q=b;for(var k=0;k<c.length;k++)if(c[k]==D){for(var w=k%this.clen,E=k-w,x=0;x<this.glen;x++){var G=this.moveTable[w*this.glen+x]+E,u=c[G];-1==c[G]&&(c[G]=D+1,u=D+1,b++);u>D&&(g[k*f+(x>>5)]|=1<<(x&31));u>=D&&(l[k*f+(x>>5)]|=1<<(x&31))}if(d&&0==E)for(x=0;2>x;x++)G=r[w+(1-x)*this.clen]+(x+1)*this.clen,-1==c[G]&&(c[G]=D,b++)}D++}return[c,g,l,r,D]};l.prototype.checkPerm=function(a){this.initTables();return 0<=this.sgsH.isMember(a)?1:0>this.sgsG.isMember(a)?
2:0};l.ONLY_IDA=1;l.ALLOW_PRE=2;l.prototype.DissectionSolve=function(a,d,b,g){var c=performance.now();this.initTables();DEBUG&&console.log("[Subgroup Solver] finished init tables, tt=",performance.now()-c);if(0>this.sgsG.isMember(a))console.log("[Subgroup Solver] NOT A MEMBER OF G");else{var B=this.coset2idx[this.midCosetHash(a)];if(B||0===B){var f=0!=(b&l.ONLY_IDA),q=0!=(b&l.ALLOW_PRE)&&this.isCosetSearch,r=null;b=this.prunTable;var D=null;q&&(b=D=this.initPrunTable(a,q),B=this.clen);DEBUG&&console.log("[Subgroup Solver] finish init searching, prun value:",
b[0][B],"tt=",performance.now()-c);for(var k=b[0][B];k<=d;k++){var w=0,E=0,x=this.sgsG.permInv(a);if(f||k<=this.prunTable[4])r=this.idaMidSearch(q?this.clen:B,k,1,this.canon.trieNodes,[],this.sgsG.toKeyIdx(q?null:x),x,b,function(a,b){w++;if(!(0>this.sgsG.isSubgroupMemberByKey(b,this.sgsH))){for(var c=[],e=0;e<a.length;e++)c.push(-1==a[e]?-1:this.genExMap[a[e]].slice(0,2));return g?g(c):c}}.bind(this)),DEBUG&&console.log("[Subgroup Solver] ida ",w+E,"node(s) checked at",k,"tt=",performance.now()-c);
else{var G=~~(k/2);D||(D=this.initPrunTable(a,q));for(var u=q?2:1,p=0,m=[],h=0;h<this.clen*u;h++){var t=h,e=h+(q?h>=this.clen?-this.clen:2*this.clen:0);if(!(b[0][t]>G||D[0][e]>k-G)){p++;var J=new Map,K=0,L=0;r=this.isCosetSearch?this.sgsG.e:this.sgsG.toKeyIdx();this.idaMidSearch(t,G,0,this.canon.trieNodes,[],r,x,b,function(a,b){if(this.isCosetSearch){var c=this.sgsH.minElem(b);c=this.permHash(c)}else c=this.permHash(b);K++;var e=J.get(c)||[];e.push(a.slice());J.set(c,e)}.bind(this));r=this.idaMidSearch(e,
k-G,1,this.canoni.trieNodes,[],r,a,D,function(b,c){var e=q?c:this.sgsG.permMult(c,a);if(this.isCosetSearch){e=this.sgsH.minElem(e);var f=this.permHash(e)}else f=this.permHash(e);L++;if(J.has(f)){e=[];for(var h=1,k=0;k<b.length;k++){var d=b[b.length-1-k];d=-1==d?-1:this.genExMap[d][2];h=-1==d?1:this.canon.trieNodes[h][d];if(DEBUG&&-1==h)debugger;h^=h>>31;e.push(-1==d?-1:this.genExMap[d].slice(0,2))}f=J.get(f);for(k=0;k<f.length;k++){for(var t=e.slice(),m=h,v=0;v<f[k].length;v++){d=f[k][v];m=-1==d?
1:this.canon.trieNodes[m][d];if(-1==m)break;m^=m>>31;t.push(-1==d?-1:this.genExMap[d].slice(0,2))}if(-1!=m&&(d=g?g(t):t))return d}}}.bind(this));m.push([h,K,L]);w+=K;E+=L;if(r)break}}DEBUG&&console.log("[Subgroup Solver] dis ",w+E,"node(s) checked at",k,"tt=",performance.now()-c)}if(r)break}return r}console.log("[Subgroup Solver] ERROR!")}};l.prototype.godsAlgo=function(a){this.initTables();for(var c=0,b=0;b<this.clen;b++)for(var d=new Set,g=0;g<=a;g++){var l=this.isCosetSearch?this.sgsG.e:this.sgsG.toKeyIdx();
this.idaMidSearch(b,g,1,this.canon.trieNodes,[],l,null,this.prunTable,function(a,b){if(this.isCosetSearch){var f=this.sgsH.minElem(b);f=this.permHash(f)}else f=this.permHash(b);d.has(f)||(c++,d.add(f))}.bind(this))}return c};return{CanonSeqGen:d,SchreierSims:g,SubgroupSolver:l}}(mathlib.rn);var poly3d=function(){function a(a,b,c){this.x=a;this.y=b;this.z=c}function g(a,b){var c=Math.cos(b),f=Math.sin(b),k=1-c,d=a.x,q=a.y,g=a.z,l=k*d,u=k*q;this.mat=[l*d+c,l*q-f*g,l*g+f*q,l*q+f*g,u*q+c,u*g-f*d,l*g-f*q,u*g+f*d,k*g*g+c]}function d(a,b){this.norm=a;this.dis="number"==typeof b?b:1}function l(a,b,c){this.ct=a;this.radius=b;c&&(this.norm=c)}function c(a,b){this.p1=a;this.p2=b}function A(a,b,c,d){this.p1=a;this.p2=b;this.ct=c;this.norm=d;this._fu=this.p1.add(this.ct,-1).normalized();this._fv=
this.norm.outprod(this._fu);this._radius=this.ct.abs(a);a=this.p2.add(this.ct,-1);this._ang=(Math.atan2(this._fv.inprod(a),this._fu.inprod(a))+2*Math.PI+1E-6)%(2*Math.PI)-1E-6}function b(b){this.paths=b.slice();for(var c,f=0;f<b.length;f++){if(b[f].ct){c=b[f].norm;break}var d=b[0].p2.add(b[0].p1,-1).outprod(b[1].p2.add(b[1].p1,-1));if(d.abs()>1E-6*10){c=d.normalized();break}}this.area=0;if(c){d=new a(0,0,0);for(f=1;f<b.length-1;f++){var k=b[f].p1.add(b[0].p1,-1).outprod(b[f].p2.add(b[f].p1,-1)).inprod(c)/
2;d=d.add(b[0].p1,k/3);d=d.add(b[f].p1,k/3);d=d.add(b[f].p2,k/3);this.area+=k}for(f=0;f<b.length;f++)if(b[f].ct){var g=b[f],l=4*g._radius*Math.pow(Math.sin(g._ang/2),3)/3/(g._ang-Math.sin(g._ang));k=Math.pow(g._radius,2)*(g._ang-Math.sin(g._ang))/2*g.norm.inprod(c);g=g.ct.add(g.norm.outprod(g.p2.add(g.p1,-1)).normalized(),-l);d=d.add(g,k);this.area+=k}this.center=d.scalar(1/this.area);this.norm=0<this.area?c:c.scalar(-1);this.area=Math.abs(this.area);this.dis=this.norm.inprod(b[0].p1)}}function y(a,
b,c){this.facePlanes=a.slice();this.faceNames=c.slice();this.faceUVs=[];for(c=0;c<a.length;c++){var f=a[c].norm,k=b[c];k=k.add(f,-k.inprod(f)).normalized();f=k.outprod(f);this.faceUVs[c]=[f,k]}this.makeFacePolygons()}function C(a,b,c,d){return{parseScramble:function(a,b,c,f){if(!f||/^\s*$/.exec(f))return[];c&&(f=c(f));var k=[];f.replace(a,function(){var a=b.apply(null,arguments);a&&k.push([""+a[0]+a[1],a[2]])});return k}.bind(null,a,b,d),move2str:function(a,b){var c=/^(\d+)([a-zA-Z]+)$/.exec(b[0]);
if(!c){debugger;return""}return a(~~c[1],c[2],b[1])}.bind(null,c)}}var B=a.prototype;B.abs=function(a){return a?Math.hypot(this.x-a.x,this.y-a.y,this.z-a.z):Math.hypot(this.x,this.y,this.z)};B.add=function(b,c){void 0===c&&(c=1);return new a(this.x+b.x*c,this.y+b.y*c,this.z+b.z*c)};B.scalar=function(b){return new a(this.x*b,this.y*b,this.z*b)};B.normalized=function(){var b=Math.hypot(this.x,this.y,this.z);return 1E-6>b?new a(1,0,0):new a(this.x/b,this.y/b,this.z/b)};B.inprod=function(a){return this.x*
a.x+this.y*a.y+this.z*a.z};B.outprod=function(b){return new a(this.y*b.z-this.z*b.y,this.z*b.x-this.x*b.z,this.x*b.y-this.y*b.x)};B.triangleArea=function(a,b){var c=a.x-this.x,f=a.y-this.y,k=a.z-this.z,d=b.x-this.x,q=b.y-this.y,g=b.z-this.z;return Math.hypot(f*g-k*q,k*d-c*g,c*q-f*d)/2};B=g.prototype;B.perform=function(b){var c=this.mat;return new a(c[0]*b.x+c[1]*b.y+c[2]*b.z,c[3]*b.x+c[4]*b.y+c[5]*b.z,c[6]*b.x+c[7]*b.y+c[8]*b.z)};d.prototype.side=function(a){return this.norm.inprod(a)-this.dis};l.prototype.side=
function(a){return(this.ct.abs(a)-Math.abs(this.radius))*(0<this.radius?1:-1)};B=c.prototype;B.getMid=function(){return this.p1.add(this.p2).scalar(.5)};B.genMids=function(){return[]};B.slice=function(a,b){return new c(a,b)};B.revert=function(){return new c(this.p2,this.p1)};B.rankKey=function(a){return this.p2.add(this.p1,-1).inprod(a)};B.intersect=function(a){var b=[];if(a instanceof d){var c=this.p1.inprod(a.norm)-a.dis,f=this.p2.inprod(a.norm)-a.dis;if(1E-6>Math.abs(c-f))return[];a=-c/(f-c);1E-6>
Math.abs(a)||1E-6>Math.abs(a-1)?b.push(1E-6>Math.abs(a)?this.p1:this.p2):0<a&&1>a&&b.push(this.p1.scalar(1-a).add(this.p2,a))}else if(a instanceof l){c=Math.pow(this.p1.abs(this.p2),2);f=2*this.p2.add(this.p1,-1).inprod(this.p1.add(a.ct,-1));a=Math.pow(this.p1.abs(a.ct),2)-Math.pow(a.radius,2);var k=f*f-4*c*a;if(0>=k)return[];for(var g=-1;2>g;g+=2)a=(-f+g*Math.sqrt(k))/(2*c),1E-6>Math.abs(a)||1E-6>Math.abs(a-1)?b.push(1E-6>Math.abs(a)?this.p1:this.p2):0<a&&1>a&&b.push(this.p1.scalar(1-a).add(this.p2,
a))}return b};B=A.prototype;B.getMid=function(){return this.ct.add(this._fu,Math.cos(this._ang/2)*this._radius).add(this._fv,Math.sin(this._ang/2)*this._radius)};B.genMids=function(){for(var a=Math.ceil(this._ang/Math.PI*180/10),b=[],c=0;c<a-1;c++){var d=this._ang/a*(c+1);b.push(this.ct.add(this._fu,Math.cos(d)*this._radius).add(this._fv,Math.sin(d)*this._radius))}return b};B.slice=function(a,b){return new A(a,b,this.ct,this.norm)};B.revert=function(){return new A(this.p2,this.p1,this.ct,this.norm.scalar(-1))};
B.rankKey=function(a){a=a.add(this.ct,-1);return Math.atan2(this._fv.inprod(a),this._fu.inprod(a))};B.intersect=function(a){if(a instanceof d){var b=this._radius*a.norm.inprod(this._fv);var c=this._radius*a.norm.inprod(this._fu);var f=a.dis-a.norm.inprod(this.ct)}else if(a instanceof l){var k=this.ct.add(a.ct,-1);b=this._radius*k.inprod(this._fv);c=this._radius*k.inprod(this._fu);f=((a.radius+this._radius)*(a.radius-this._radius)-Math.pow(this.ct.abs(a.ct),2))/2}k=Math.atan2(-b,c);c=f/Math.hypot(b,
c);if(1<=Math.abs(c))return[];b=[];c=Math.acos(c);for(f=-1;2>f;f+=2){var g=(f*c-k+4*Math.PI+1E-6)%(2*Math.PI)-1E-6;-1E-6<g&&g<this._ang+1E-6&&b.push(g)}b.sort(function(a,b){return a-b});for(k=0;k<b.length;k++)b[k]=1E-6>Math.abs(b[k])||1E-6>Math.abs(b[k]-this._ang)?1E-6>Math.abs(b[k])?this.p1:this.p2:this.ct.add(this._fu,Math.cos(b[k])*this._radius).add(this._fv,Math.sin(b[k])*this._radius);for(k=0;k<b.length;k++){if(1E-6<Math.abs(a.side(b[k])))debugger;if(1E-6<Math.abs(this.ct.abs(b[k])-this._radius))debugger;
if(1E-6<Math.abs(this.norm.inprod(this.ct)-this.norm.inprod(b[k])))debugger}return b};B=b.prototype;b.fromVertices=function(a){for(var f=[],d=0;d<a.length;d++)f.push(new c(a[d],a[(d+1)%a.length]));return new b(f)};B.projection=function(a){for(var b=[],c=0;c<this.paths.length;c++)for(var f=[this.paths[c].p1].concat(this.paths[c].genMids()),k=0;k<f.length;k++){for(var d=[],g=0;g<a.length;g++)d.push(f[k].inprod(a[g]));b.push(d)}return b};B.split=function(f){for(var q=[[],[]],g=0,D=0>f.side(this.center)?
1:0,k=0;k<this.paths.length;k++){var w=this.paths[k],E=w.intersect(f);g+=E.length;for(var x=w.p1,G=0;G<E.length;G++)1E-6<x.abs(E[G])&&(x=w.slice(x,E[G]),q[0>f.side(x.getMid())?1:0].push(x),x=E[G]);1E-6<x.abs(w.p2)&&(w=x==w.p1?w:w.slice(x,w.p2),E=f.side(w.getMid()),q[1E-6>Math.abs(E)?D:0>E?1:0].push(w))}if(f instanceof d){if(0==g)return 0==q[0].length?[[],[this]]:[[this],[]];var u=new c(new a(0,0,0),f.norm.outprod(this.norm))}else if(f instanceof l){u=f.ct.add(this.norm,-this.norm.inprod(f.ct)+this.dis);
k=Math.pow(f.radius,2)-Math.pow(this.dis-this.norm.inprod(f.ct),2);if(0>=k)return 0==q[0].length?[[],[this]]:[[this],[]];k=Math.sqrt(k);k=this.paths[1].p1.add(this.paths[0].p1,-1).normalized().scalar(k).add(u);u=new A(k,k,u,this.norm.scalar(0<f.radius?-1:1))}f=[[],[]];for(g=0;2>g;g++){D=[];E=q[g];k=0;for(G=E.length;k<G;k++)w=(k+1)%G,1E-6<E[k].p2.abs(E[w].p1)&&D.push([w,u.rankKey(E[w].p1),E[w].p1]);D.sort(function(a,b){return a[1]-b[1]});x=0;for(var p=[];x<E.length;){var m=[];for(k=0;p[k];)k++;for(;;){w=
E[k];m.push(w);p[k]=1;x++;if(1E-6>w.p2.abs(m[0].p1))break;k=(k+1)%G;if(!(1E-6>w.p2.abs(E[k].p1))){var h=u.rankKey(w.p2),t=0;for(k=0;k<D.length;k++)if(D[k][1]>h){t=k;break}k=D[t][0];D.splice(t,1);m.push(u.slice(w.p2,E[k].p1));if(1E-6>E[k].p1.abs(m[0].p1))break}}k=new b(m);1E-6<k.area?f[g].push(k):console.log("invalid path length",m,k)}u=u.revert()}return f};B.trim=function(a){for(var b=this,c=0;c<this.paths.length;c++){var f=this.paths[c];if(f instanceof A){var k=(0<this.norm.inprod(f.norm)?1:-1)*
f._radius;b=b.split(new l(f.ct,k-a/2))[1][0]}else k=f.p2.add(f.p1,-1).outprod(this.norm).normalized(),f=k.inprod(f.p2),b=b.split(new d(k,f-a/2))[1][0];if(!b)return null}return b};B=y.prototype;B.setTwisty=function(a,b){this.twistyPlanes=a.slice();this.twistyDetails=b.slice();this._twistyCache={};for(var c=0;c<b.length;c++)2==this.twistyDetails[c].length&&this.twistyDetails[c].push(c);this.cutFacePolygons();this.makeMoveTable()};B.getTwistyIdx=function(a){if(a in this._twistyCache)return this._twistyCache[a];
var b=/^(\d*)([A-Z][A-Za-z]*)$/.exec(a);if(!b)return-1;for(var c=new RegExp(b[1]+"(?=[A-Z])"),f=b[2].split(/(?=[A-Z])/g),k={},d=0,g=0;g<f.length;g++)void 0==k[f[g]]&&(k[f[g]]=new RegExp(f[g]+"(?=[A-Z]|$)"),d++);f=[99,-1];for(g=0;g<this.twistyDetails.length;g++){var l=this.twistyDetails[g][0];if(c.exec(l)){var G=l.length-b[1].length,u;for(u in k)if(k[u].exec(l))G-=u.length;else{G=99;break}G<f[0]&&(f=[G,g])}}this._twistyCache[a]=1==d&&0!=f[0]?-1:f[1];return this._twistyCache[a]};B.makeFacePolygons=
function(){this.facesPolys=[];for(var a=0;a<this.facePlanes.length;a++){var c=this.facePlanes[a].norm.scalar(this.facePlanes[a].dis),d=this.faceUVs[a];c=b.fromVertices([c.add(d[0],100),c.add(d[1],100),c.add(d[0],-100),c.add(d[1],-100)]);for(d=0;d<this.facePlanes.length;d++)if(d!=a&&(c=c.split(this.facePlanes[d])[1][0],!c)){debugger;break}this.facesPolys[a]=[c]}};B.cutFacePolygons=function(){var a=this.twistyPlanes.slice();a.sort(function(a,b){return(a.ct?1:0)-(b.ct?1:0)});for(var b=0;b<a.length;b++){var c=
a[b];this.enumFacesPolys(function(a,b,f){f=f.split(c);f=Array.prototype.concat.apply([],f);this.facesPolys[a][b]=f[0];for(b=1;b<f.length;b++)this.facesPolys[a].push(f[b])}.bind(this))}};B.enumFacesPolys=function(a){for(var b=0,c=0;c<this.facesPolys.length;c++)for(var f=this.facesPolys[c],d=f.length,g=0;g<d;g++){if(a(c,g,f[g],b))return;b++}};B.makeMoveTable=function(){this.moveTable=[];var b=[],c=(new a(1,2,3)).normalized();this.enumFacesPolys(function(a,f,d,k){b[k]=[k,c.inprod(d.center),d.center]}.bind(this));
b.sort(function(a,b){return a[1]-b[1]});for(var d=0;d<this.twistyDetails.length;d++){for(var l=[],k=[],w=2;w<this.twistyDetails[d].length;w++)k.push(this.twistyPlanes[this.twistyDetails[d][w]]);var E=new g(k[0].norm,2*Math.PI/this.twistyDetails[d][1]);this.enumFacesPolys(function(a,f,d,g){for(f=0;f<k.length;f++)if(0>k[f].side(d.center)){l[g]=-1;return}d=E.perform(d.center);a=c.inprod(d);f=0;for(var m=b.length-1;m>f;){var h=m+f>>1;b[h][1]<a-1E-6?f=h+1:m=h}for(;f<b.length;f++){if(b[f][1]>a+1E-6)debugger;
if(1E-6>d.abs(b[f][2])){l[g]=b[f][0];break}}}.bind(this));this.moveTable.push(l)}};return{Point:a,RotTrans:g,Plane:d,Sphere:l,Segment:c,Arc:A,Polygon:b,makePuzzle:function(b,c,g,D,k,w,E){function f(a,b,c,e,f){if(e&&0!=e.length){if(!f){f=[];for(var h=0;h<e.length;h++)f[h]=h}for(h=0;h<a.length;h++){for(var k=J.length,n=0;n<e.length;n++)"number"==typeof e[n]?J.push(new d(a[h],e[n])):J.push(new l(a[h].scalar(e[n][0]),e[n][1],a[h]));for(n=0;n<f.length;n++){for(var t=[n+""+b[h],c],m="number"==typeof f[n]?
[f[n]]:f[n],g=0;g<m.length;g++)t.push(m[g]+k);K.push(t)}}}}var q=[],u=[],p=[],m=3,h=3;if(4==b)q=[new a(0,-1,0),new a(-Math.sqrt(6)/3,1/3,-Math.sqrt(2)/3),new a(Math.sqrt(6)/3,1/3,-Math.sqrt(2)/3),new a(0,1/3,Math.sqrt(8)/3)],u=[3,2,1,new a(0,1,0)],p=["D","L","R","F"];else if(6==b)q=[new a(0,1,0),new a(1,0,0),new a(0,0,1)],u=[5,0,0,2,0,0],p="URFDLB".split(""),m=4;else if(8==b)q=[new a(0,1,0),new a(Math.sqrt(6)/3,1/3,Math.sqrt(2)/3),new a(-Math.sqrt(6)/3,1/3,Math.sqrt(2)/3),new a(0,-1/3,Math.sqrt(8)/
3)],u=q[0].add(q[3],-1),u=[7,u,u,0,7,u,u,0],p="U R L F D Bl Br B".split(" "),h=4;else if(12==b){q=[new a(0,Math.sqrt(5),0)];for(var t=0;5>t;t++)q.push(new a(2*Math.sin(.4*t*Math.PI),1,2*Math.cos(.4*t*Math.PI)));u=[7,0,3,7,7,4,7,0,3,7,7,4];p="U F R Br Bl L D B Dbl Dl Dr Dbr".split(" ");m=5}else if(20==b){for(t=0;5>t;t++){h=Math.sqrt(5)+1;var e=Math.sqrt(5)+3;q.push(new a(h*Math.sin(.4*t*Math.PI),Math.sqrt(5)+2,h*Math.cos(.4*t*Math.PI)));q.push(new a(e*Math.sin(.4*t*Math.PI),1,e*Math.cos(.4*t*Math.PI)));
u[2*t]=2*t+11;u[2*t+1]=2*t;u[2*t+10]=2*t+11;u[2*t+11]=2*t}p="U F Ur R Ubr Br Ubl Bl Ul L D B Dl Lb Dfl Fl Dfr Fr Dr Rb".split(" ");h=5}else debugger;if(4!=b)for(t=0,b=q.length;t<b;t++)q[t]=q[t].normalized(),q.push(q[t].scalar(-1));b=[];for(t=0;t<q.length;t++)b.push(new d(q[t])),"number"==typeof u[t]&&(u[t]=q[u[t]]);u=new y(b,u,p);var J=[],K=[];f(q,p,m,c,k);if(g&&0<g.length){var L=[],r=[];u.enumFacesPolys(function(a,b,c){var e=c.paths[c.paths.length-1].p1;for(b=0;b<c.paths.length;b++){var f=c.paths[b].p1;
e=f.add(e).normalized();for(var h=0;h<L.length;h++)if(1E-6>e.abs(L[h])){r[h]+=p[a];e=null;break}e&&(L.push(e),r.push(p[a]));e=f}});f(L,r,2,g,w)}if(D&&0<D.length){var B=[],n=[];u.enumFacesPolys(function(a,b,c){for(b=0;b<c.paths.length;b++){for(var e=c.paths[b].p1.normalized(),f=0;f<B.length;f++)if(1E-6>e.abs(B[f])){n[f]+=p[a];e=null;break}e&&(B.push(e),n.push(p[a]))}});f(B,n,h,D,E)}u.setTwisty(J,K);DEBUG&&console.log("[poly3dlib] create puzzle: ",u);return u},renderNet:function(a,b,c){var f=[],d=a.facePlanes.length;
b=b||0;var g=[0,0];if(4==d)b=Math.sqrt(6)*(1+b),d=b/Math.sqrt(3),f=[[2*b,4*d],[1*b,1*d],[3*b,1*d],[2*b,2*d]],g=[4*b,6*d];else if(6==d)b=1+b,f=[[3*b,b],[5*b,3*b],[3*b,3*b],[3*b,5*b],[b,3*b],[7*b,3*b]],g=[8*b,6*b];else if(8==d)d=Math.sqrt(6)*(1+b)/2/Math.sqrt(3),b=Math.sqrt(3),f=[[3*d,1*d,b,1],[5*d,3*d,1,b],[1*d,3*d,1,b],[3*d,5*d,b,1],[9*d,5*d,b,1],[11*d,3*d,1,b],[7*d,3*d,1,b],[9*d,1*d,b,1]],g=[12*d,6*d];else if(12==d){var l=(Math.sqrt(5)+1)/2;b=Math.sqrt(3-l)/Math.pow(l,2)*(1+b);d=b*Math.tan(.3*Math.PI)*
2;g=b*(1+2*l);var q=b*(1/Math.sin(.2*Math.PI)+2*Math.cos(.1*Math.PI));l=b*(4+5*l);b=d+b/Math.cos(.3*Math.PI);f[0]=[g,q];f[6]=[l,b];for(var r=0;5>r;r++)f[1+r]=[g+Math.cos(Math.PI*(.5-.4*r))*d,q+Math.sin(Math.PI*(.5-.4*r))*d],f[7+r]=[l+Math.cos(Math.PI*(1.5+.4*r))*d,b+Math.sin(Math.PI*(1.5+.4*r))*d];g=[g+l,q+b]}else if(20==d){l=(Math.sqrt(5)+1)/2;b=Math.sqrt(3)/Math.pow(l,2)*(1+b);for(r=0;5>r;r++)f[2*r]=[((5+2*r)%10+1)*b,2*b/Math.sqrt(3)],f[2*r+1]=[((5+2*r)%10+1)*b,4*b/Math.sqrt(3)],f[2*r+10]=[(1+2*
r)%10*b,7*b/Math.sqrt(3)],f[2*r+11]=[(1+2*r)%10*b,5*b/Math.sqrt(3)];g=[11*b,9*b/Math.sqrt(3)]}else debugger;var u=[],p=[];a.enumFacesPolys(function(b,d,k,e){if(!(k.area<c)){d=k.projection(a.faceUVs[b]);k=f[b];for(var h=[[],[]],m=0;m<d.length;m++)h[0][m]=k[0]+d[m][0]*(k[2]||1),h[1][m]=k[1]-d[m][1]*(k[3]||1);h[2]=b;u[e]=h;p[b]=p[b]||[k[0],k[1],a.faceNames[b]]}});return[g,u,p]},makeParser:C,makePuzzleParser:function(a){return C(/(?:^|\s*)(?:\[([a-zA-Z]+)(\d*)(')?\]|(\d*)([A-Z][a-zA-Z]*)(\d*)(')?)(?:$|\s*)/g,
function(a,b,c,d,f,g,l,G,u){b=c?"0":""==g?"1":g;l=c||l;c=(c?""==d?1:~~d:""==G?1:~~G)*(f||u?-1:1);l.match(/[A-Z][a-z]*/g);if(-1!=a.getTwistyIdx(b+l))return[b,l,c]}.bind(null,a),function(a,b,c){b=b+(1==Math.abs(c)?"":Math.abs(c))+(0>c?"'":"");return 0==a?"["+b+"]":b})},getFamousPuzzle:function(a,b){var c=1,d=.075,f=[];if(/^(\d)\1\1$/.exec(a)){var g=/^(\d)\1\1$/.exec(a);g=~~g[1];var l=[6,[-5]];for(var q=0;q<g>>1;q++)l[1].push(1-2*(q+1)/g)}else if("pyr"==a||"mpyr"==a){l=[4,[],[],{pyr:[-5,5/3,1/3],mpyr:[-5,
2,1,0]}[a]];c=.51;d=.14;var G=C(/(?:^|\s*)(?:([URLBurlb])(w?)(')?|\[([urlb])(')?\])(?:$|\s*)/g,function(a,b,c,e,d,f){a=["LRF","DRF","DLF","DLR"]["URLB".indexOf((b||d).toUpperCase())];return[d?0:c?3:b==b.toUpperCase()?2:1,a,e||f?-1:1]},function(a,b,c){b="urlb".charAt(["LRF","DRF","DLF","DLR"].indexOf(b));c=0>c?"'":"";return["["+b+c+"]",b+c,b.toUpperCase()+c,b.toUpperCase()+"w"+c][a]})}else if("fto"==a)l=[8,[-5,1/3],[],[-5]],G=C(/(?:^|\s*)\[?([URFDLT]|(?:B[RL]?))(')?(\])?(?:$|\s*)/g,function(a,b,c,
e){return[e||"T"==b?0:1,"T"==b?"URLF":b[0]+b.slice(1).toLowerCase(),c?-1:1]},function(a,b,c){b=(3<b.length?"T":b.toUpperCase())+(0<c?"":"'");return 0==a?"["+b+"]":b});else if("klm"==a||"mgm"==a||"prc"==a||"giga"==a)l=[12,{klm:[-5,.57,-.57],mgm:[-5,.72,-.72],giga:[-5,.83,-.83,.66,-.66],prc:[-5,.4472136,-.4472136]}[a]],c=1.18,d=.05,G=C(/(?:^|\s*)(?:([DLRdlr])(\+\+?|--?)|([UuFfy]|D?B?[RL]|d?b?[rl]|[DdBb])(\d?)('?)|\[([ufrl])(\d?)('?)\])(?:$|\s*)/g,function(a,b,c,e,d,f,k,g,p){return b?(e="DLRdlr".indexOf(b),
[2<e?4:2,["D","Dbl","Dbr"][e%3],("-"==c[0]?-1:1)*c.length]):e?(c=(f?-1:1)*(~~d||1),"y"==e[0]?[0,"U",c]:["a"<=e[0]?3:1,e[0].toUpperCase()+e.slice(1).toLowerCase(),c]):[0,k.toUpperCase(),(p?-1:1)*(~~g||1)]},function(a,b,c){c=(c+7)%5-2;var e=(1==Math.abs(c)?"":Math.abs(c))+(0<=c?"":"'");if(0==a)return"["+b.toLowerCase()+e+"]";if(2==a||4==a)return e=0<c?"+":"-",b="DLR".charAt(["D","Dbl","Dbr"].indexOf(b)),(4==a?b.toLowerCase():b)+e+(2==Math.abs(c)?e:"");if(1==a)return b.toUpperCase()+e;if(3==a)return b.toLowerCase()+
e},function(a){/^(\s*([+-]{2}\s*)+U'?\s*\n)*$/.exec(a)&&(a=tools.carrot2poch(a));return a});else if("heli"==a||"helicv"==a||"heli2x2"==a)l={heli:[6,[-5],[-5,Math.sqrt(.5)],[-5]],helicv:[6,[-5],[-5,[2*Math.sqrt(2),-Math.sqrt(5)]],[-5]],heli2x2:[6,[-5,0],[-5,[Math.sqrt(2),-.6]],[-5,[Math.sqrt(3),-.7]]]}[a],d=.05;else if(/^crz3a$/.exec(a))l=[6,[-5,.3333,[1,.75]],[],[],[0,[1,2]]],G=C(/(?:^|\s*)([URFDLBxyz])(\d*)(')?(?:$|\s*)/g,function(a,b,c,e){a=(""==c?1:~~c)*(e?-1:1);return-1!="xyz".indexOf(b)?[0,"RUF".charAt("xyz".indexOf(b)),
a]:[1,b,a]},function(a,b,c){c=(1==Math.abs(c)?"":Math.abs(c))+(0<=c?"":"'");return(0==a?"xyz".charAt("RUF".indexOf(b)):b)+c});else if(/^redi$/.exec(a)){l=[6,[-5],[],[-5,.85]];var u="URF UFL ULB URB RFD FDL DLB RDB R U F".split(" ");G=C(/(?:^|\s*)([FLBRflbrxyz])(')?(?:$|\s*)/g,function(a,b,c,e){a="FLBRflbrxyz".indexOf(b);return[8<=a?0:1,u[a],c?-1:1]},function(a,b,c){return"FLBRflbrxyz".charAt(u.indexOf(b))+(0<=c?"":"'")},function(a){return/^(([LR]'? ){3,}x ){3,}/.exec(a)?a.replace(/L/g,"B"):a})}else if(/^skb$/.exec(a)){l=
[6,[-5],[],[-5,0]];var p="URF UFL ULB URB RFD FDL DLB RDB R U F".split(" ");G=C(/(?:^|\s*)([FlUrDLBRxyz])(')?(?:$|\s*)/g,function(a,b,c,e){a="FlUrDLBRxyz".indexOf(b);return[8<=a?0:1,p[a],c?-1:1]},function(a,b,c){return"FlUrDLBRxyz".charAt(p.indexOf(b))+(0<=c?"":"'")})}else if("ctico"==a)l=[20,[],[],[-5,0]];else return null;g=l[0];4==g?f=$.col2std(kernel.getProp("colpyr"),[3,1,2,0]):6==g?f=$.col2std(kernel.getProp("colcube"),[3,4,5,0,1,2]):8==g?f=$.col2std(kernel.getProp("colfto"),[0,3,1,2,6,7,5,4]):
12==g?f=$.col2std(kernel.getProp("colmgm"),[0,2,1,5,4,3,11,9,8,7,6,10]):20==g&&(f=$.col2std(kernel.getProp("colico"),[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]));b=b||{};b.parser=G;b.polyParam=l;b.scale=(b.scale||1)*c;b.pieceGap=d;b.colors=f;return b},udpolyre:new RegExp("^("+$.UDPOLY_RE+")$"),parsePolyParam:function(a){a=a.split(/\s+/g);for(var b=[[4,6,8,12,20]["tcodi".indexOf(a[0])],[-5],[-5],[-5]],c=1,d=1;d<a.length;d++)if(/^[fev]$/.exec(a[d]))c=" fev".indexOf(a[d]);else if(/^[+-]?\d+(?:\.\d+)?$/.exec(a[d]))b[c].push(parseFloat(a[d]));
else if(/^\d+(?:\.\d+)?r[+-]?\d+(?:\.\d+)?$/.exec(a[d])){var f=a[d].split("r");b[c].push([parseFloat(f[0]),-parseFloat(f[1])])}return b}}}();var min2phase=function(){function a(){this.move=[];this.moveSol=[];this.nodeUD=[];this.valid1=0;this.allowShorter=!1;this.cc=new b;this.urfCubieCube=[];this.urfCoordCube=[];this.phase1Cubie=[];this.preMoveCubes=[];this.preMoves=[];this.maxPreMoves=this.preMoveLen=0;this.isRec=!1;for(var a=0;21>a;a++)this.nodeUD[a]=new k,this.phase1Cubie[a]=new b;for(a=0;6>a;a++)this.urfCubieCube[a]=new b,this.urfCoordCube[a]=new k;for(a=0;20>a;a++)this.preMoveCubes[a+1]=new b}function g(a,b,c){return c?b<<1|a&1:b|
a&248}function d(a,b){return b?a>>1:a&7}function l(a,b,c){a[b>>3]^=c<<(b<<2)}function c(a,b,c){return Math.min(a,b[c>>3]>>(c<<2)&15)}function A(a,b,c){a=R[a];c&&(a^=14540032>>((a&15)<<1)&3);return a&65520|P[a&15][b]}function b(){this.ca=[0,1,2,3,4,5,6,7];this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function y(a,b,c,e){c--;for(var d=1985229328,f=0;f<c;++f){var h=m[c-f],k=~~(b/h);b%=h;k<<=2;a[f]=g(a[f],d>>k&15,e);h=(1<<k)-1;d=(d&h)+(d>>4&~h)}a[c]=g(a[c],d&15,e)}function C(a,b,c){for(var e=0,f=1985229328,
h=0;h<b-1;++h){var k=d(a[h],c)<<2;e=(b-h)*e+(f>>k&15);f-=286331152<<k}return e}function B(a,b,c,e){a[c-1]=g(a[c-1],0,e);for(var f=c-2;0<=f;--f){a[f]=g(a[f],b%(c-f),e);b=~~(b/(c-f));for(var h=f+1;h<c;++h)d(a[h],e)>=d(a[f],e)&&(a[h]=g(a[h],d(a[h],e)+1,e))}}function f(a,b,c){for(var e=0,f=0;f<b;++f){e*=b-f;for(var h=f+1;h<b;++h)d(a[h],c)<d(a[f],c)&&++e}return e}function q(a,b,c){for(var e=0,f=4,h=a.length-1;0<=h;h--)(d(a[h],c)&12)==b&&(e+=p[h][f--]);return e}function r(a,b,c,e){for(var d=a.length-1,
f=4,h=d;0<=d;d--)b>=p[d][f]?(b-=p[d][f--],a[d]=g(a[d],f|c,e)):((h&12)==c&&(h-=4),a[d]=g(a[d],h--,e))}function D(a,b){for(var c=0,e=b-2;0<=e;e--)c^=a%(b-e),a=~~(a/(b-e));return c&1}function k(){this.flipc=this.twistc=this.prun=this.slice=this.fsym=this.flip=this.tsym=this.twist=0}function w(){function a(a,c,e,d,f,h,k){for(var n=new b,g=new b,v=0,m=2<=f?1:2,t=1!=f?b.EdgeConjugate:b.CornConjugate,p=0;p<a;p++)if(void 0===e[p]){h.call(n,p);for(var I=0;16>I;I+=m){t(n,I,g);var L=k.call(g);0==f&&(ia[v<<3|
I>>1]=L);L==p&&(d[v]|=1<<I/m);e[L]=(v<<4|I)/m}c[v++]=p}return v}function c(a,b,c,e,h,k,n,g){for(var v=0;v<c;v++){a[v]=[];h.call(d,b[v]);for(var m=0;m<e;m++)n(d,z[g?g[m]:m],f),a[v][m]=k.call(f)}}for(var d=new b,f=new b,h=(new b).initCoord(28783,0,259268407,0),k=(new b).initCoord(15138,0,119765538,7),n=(new b).initCoord(5167,0,83473207,0),g=0;8>g;g++)n.ca[g]|=24;for(g=0;16>g;g++)T[g]=(new b).init(d.ca,d.ea),b.CornMultFull(d,k,f),b.EdgeMult(d,k,f),d.init(f.ca,f.ea),3==g%4&&(b.CornMultFull(d,n,f),b.EdgeMult(d,
n,f),d.init(f.ca,f.ea)),7==g%8&&(b.CornMultFull(d,h,f),b.EdgeMult(d,h,f),d.init(f.ca,f.ea));for(g=0;16>g;g++)P[g]=[],N[g]=[],v[g]=[],Y[g]=[],I[g]=[];for(g=0;16>g;g++)for(h=0;16>h;h++)P[g][h]=g^h^84660>>h&g<<1&2,N[P[g][h]][h]=g;d=new b;for(g=0;16>g;g++)for(h=0;18>h;h++){b.CornConjugate(z[h],N[0][g],d);k=0;a:for(;18>k;k++){for(n=0;8>n;n++)if(z[k].ca[n]!=d.ca[n])continue a;v[g][h]=k;I[g][e[h]]=e[k];break}0==g%2&&(Y[h<<3|g>>1]=v[g][h])}a(2048,Q,U,fa,0,b.prototype.setFlip,b.prototype.getFlip);a(2187,X,
Z,ja,1,b.prototype.setTwist,b.prototype.getTwist);a(40320,da,ea,na,2,b.prototype.setEPerm,b.prototype.getEPerm);h=new b;for(g=0;2768>g;g++)y(h.ea,da[g],8,!0),W[g]=q(h.ea,0,!0)+70*D(da[g],8),d.invFrom(h),R[g]=ea[d.getEPerm()];d=new b;f=new b;c(pa,Q,336,18,b.prototype.setFlip,b.prototype.getFlipSym,b.EdgeMult);c(ha,X,324,18,b.prototype.setTwist,b.prototype.getTwistSym,b.CornMult);c(va,da,2768,10,b.prototype.setEPerm,b.prototype.getEPermSym,b.EdgeMult,t);c(Ba,da,2768,10,b.prototype.setCPerm,b.prototype.getCPermSym,
b.CornMult,t);for(g=0;495>g;g++){V[g]=[];aa[g]=[];d.setUDSlice(g);for(h=0;18>h;h++)b.EdgeMult(d,z[h],f),V[g][h]=f.getUDSlice();for(h=0;16>h;h+=2)b.EdgeConjugate(d,N[0][h],f),aa[g][h>>1]=f.getUDSlice()}for(g=0;24>g;g++){Ca[g]=[];ua[g]=[];d.setMPerm(g);for(h=0;10>h;h++)b.EdgeMult(d,z[t[h]],f),Ca[g][h]=f.getMPerm();for(h=0;16>h;h++)b.EdgeConjugate(d,N[0][h],f),ua[g][h]=f.getMPerm()}for(g=0;140>g;g++){ka[g]=[];qa[g]=[];d.setCComb(g%70);for(h=0;10>h;h++)b.CornMult(d,z[t[h]],f),ka[g][h]=f.getCComb()+70*
(165>>h&1^~~(g/70));for(h=0;16>h;h++)b.CornConjugate(d,N[0][h],f),qa[g][h]=f.getCComb()+70*~~(g/70)}}function E(a,b,c,e,d,f,h,k){var n=k&15,g=1==(k>>4&1)?14540032:0,v=k>>8&15,m=k>>12&15,p=k>>16&15,t=(1<<n)-1,I=null==e;c*=b;k=1==(k>>5&1)?10:18;var L=10==k?66:599186,J=(a[c>>3]>>(c<<2)&15)-1;if(-1==J){for(var F=0;F<(c>>3)+1;F++)a[F]=4294967295;l(a,0,15);J=0}else l(a,c,15^J+1);for(m=0<u?Math.min(Math.max(J+1,p),m):m;J<m;){var q=(p=J>v)?15:J,K=286331153*q,H=p?J:15;J++;oa++;var Q=J^15,z=0,w=0;for(F=0;F<
c;F++,w>>=4){if(0==(F&7)){w=a[F>>3];var r=w^K;if(0==(r-286331153&~r&2290649224)){F+=7;continue}}if((w&15)==q){r=F%b;var x=~~(F/b),X=0,S=0;I&&(X=U[r],S=X&7,X>>=3);for(var ha=0;ha<k;ha++){var G=f[x][ha];var B=I?ia[pa[X][Y[ha<<3|S]]^S^G&t]:d[e[r][ha]][G&t];G>>=n;var E=G*b+B,Z=a[E>>3]>>(E<<2)&15;if(Z!=H)Z<J-1&&(ha+=L>>ha&3);else{z++;if(p){l(a,F,Q);break}l(a,E,Q);E=1;for(Z=h[G];0!=(Z>>=1);E++)if(1==(Z&1)){var y=G*b;y=I?y+ia[U[B]^E]:y+d[B][E^g>>(E<<1)&3];(a[y>>3]>>(y<<2)&15)==H&&(l(a,y,Q),z++)}}}}}}l(a,
c,J+1^15);return J+1}function x(a){la=E(ma,2048,324,null,null,ha,ja,103939);oa>a||(sa=E(Da,495,324,V,aa,ha,ja,431619),oa>a||(xa=E(ba,495,336,V,aa,pa,fa,431619),oa>a||(Ga=E(ta,24,2768,Ca,ua,Ba,na,584244),oa>a||(Ha=E(Fa,140,2768,ka,qa,va,na,514084)))))}function G(){0>oa&&(w(),oa=0);if(0==oa)x(99);else if(54>oa)x(oa);else return!0;return!1}for(var u=2,p=[],m=[1],h="U ;U2;U';R ;R2;R';F ;F2;F';D ;D2;D';L ;L2;L';B ;B2;B'".split(";"),t=[0,1,2,4,7,9,10,11,13,16,3,5,6,8,12,14,15,17],e=[],J=[],K=[[0,1,2,3,
4,5,6,7,8,9,10,11,12,13,14,15,16,17],[6,7,8,0,1,2,3,4,5,15,16,17,9,10,11,12,13,14],[3,4,5,6,7,8,0,1,2,12,13,14,15,16,17,9,10,11],[2,1,0,5,4,3,8,7,6,11,10,9,14,13,12,17,16,15],[8,7,6,2,1,0,5,4,3,17,16,15,11,10,9,14,13,12],[5,4,3,8,7,6,2,1,0,14,13,12,17,16,15,11,10,9]],L=0;18>L;L++)e[t[L]]=L;for(L=0;10>L;L++)for(var O=~~(t[L]/3),M=J[L]=0;10>M;M++){var n=~~(t[M]/3);J[L]|=(O==n||O%3==n%3&&O>=n?1:0)<<M}for(L=J[10]=0;13>L;L++)for(p[L]=[],m[L+1]=m[L]*(L+1),M=p[L][0]=p[L][L]=1;13>M;M++)p[L][M]=M<=L?p[L-1][M-
1]+p[L-1][M]:0;b.EdgeMult=function(a,b,c){for(var e=0;12>e;e++)c.ea[e]=a.ea[b.ea[e]>>1]^b.ea[e]&1};b.CornMult=function(a,b,c){for(var e=0;8>e;e++)c.ca[e]=a.ca[b.ca[e]&7]&7|((a.ca[b.ca[e]&7]>>3)+(b.ca[e]>>3))%3<<3};b.CornMultFull=function(a,b,c){for(var e=0;8>e;e++){var d=a.ca[b.ca[e]&7]>>3,f=b.ca[e]>>3,h=d+(3>d?f:6-f);h=h%3+(3>d==3>f?0:3);c.ca[e]=a.ca[b.ca[e]&7]&7|h<<3}};b.CornConjugate=function(a,b,c){var e=T[N[0][b]];b=T[b];for(var d=0;8>d;d++){var f=a.ca[b.ca[d]&7]>>3;c.ca[d]=e.ca[a.ca[b.ca[d]&
7]&7]&7|(3>e.ca[a.ca[b.ca[d]&7]&7]>>3?f:(3-f)%3)<<3}};b.EdgeConjugate=function(a,b,c){var e=T[N[0][b]];b=T[b];for(var d=0;12>d;d++)c.ea[d]=e.ea[a.ea[b.ea[d]>>1]>>1]^a.ea[b.ea[d]>>1]&1^b.ea[d]&1};b.prototype.init=function(a,b){this.ca=a.slice();this.ea=b.slice();return this};b.prototype.initCoord=function(a,b,c,e){y(this.ca,a,8,!1);this.setTwist(b);B(this.ea,c,12,!0);this.setFlip(e);return this};b.prototype.isEqual=function(a){for(var b=0;8>b;b++)if(this.ca[b]!=a.ca[b])return!1;for(b=0;12>b;b++)if(this.ea[b]!=
a.ea[b])return!1;return!0};b.prototype.setFlip=function(a){for(var b=0,c,e=10;0<=e;e--,a>>=1)b^=c=a&1,this.ea[e]=this.ea[e]&254|c;this.ea[11]=this.ea[11]&254|b};b.prototype.getFlip=function(){for(var a=0,b=0;11>b;b++)a=a<<1|this.ea[b]&1;return a};b.prototype.getFlipSym=function(){return U[this.getFlip()]};b.prototype.setTwist=function(a){for(var b=15,c,e=6;0<=e;e--,a=~~(a/3))b-=c=a%3,this.ca[e]=this.ca[e]&7|c<<3;this.ca[7]=this.ca[7]&7|b%3<<3};b.prototype.getTwist=function(){for(var a=0,b=0;7>b;b++)a+=
(a<<1)+(this.ca[b]>>3);return a};b.prototype.getTwistSym=function(){return Z[this.getTwist()]};b.prototype.setCPerm=function(a){y(this.ca,a,8,!1)};b.prototype.getCPerm=function(){return C(this.ca,8,!1)};b.prototype.getCPermSym=function(){var a=ea[C(this.ca,8,!1)];return a^14540032>>((a&15)<<1)&3};b.prototype.setEPerm=function(a){y(this.ea,a,8,!0)};b.prototype.getEPerm=function(){return C(this.ea,8,!0)};b.prototype.getEPermSym=function(){return ea[C(this.ea,8,!0)]};b.prototype.getUDSlice=function(){return 494-
q(this.ea,8,!0)};b.prototype.setUDSlice=function(a){r(this.ea,494-a,8,!0)};b.prototype.getMPerm=function(){return f(this.ea,12,!0)%24};b.prototype.setMPerm=function(a){B(this.ea,a,12,!0)};b.prototype.getCComb=function(){return q(this.ca,0,!1)};b.prototype.setCComb=function(a){r(this.ca,a,0,!1)};b.prototype.URFConjugate=function(){var a=new b;b.CornMult(b.urf2,this,a);b.CornMult(a,b.urf1,this);b.EdgeMult(b.urf2,this,a);b.EdgeMult(a,b.urf1,this)};var S=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,
15],[27,44,24],[33,53,42],[35,17,51]],H=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];b.prototype.toFaceCube=function(a,b){a=a||S;b=b||H;for(var c=[],e=0;54>e;e++)c[e]="URFDLB"[~~(e/9)];for(var d=0;8>d;d++){e=this.ca[d]&7;for(var f=this.ca[d]>>3,h=0;3>h;h++)c[a[d][(h+f)%3]]="URFDLB"[~~(a[e][h]/9)]}for(d=0;12>d;d++)for(e=this.ea[d]>>1,f=this.ea[d]&1,h=0;2>h;h++)c[b[d][(h+f)%2]]="URFDLB"[~~(b[e][h]/9)];return c.join("")};b.prototype.invFrom=function(a){for(var b=
0;12>b;b++)this.ea[a.ea[b]>>1]=b<<1|a.ea[b]&1;for(b=0;8>b;b++)this.ca[a.ca[b]&7]=b|32>>(a.ca[b]>>3)&24;return this};b.prototype.fromFacelet=function(a,b,c){b=b||S;c=c||H;for(var e=0,d=[],f=a[4]+a[13]+a[22]+a[31]+a[40]+a[49],h=0;54>h;++h){d[h]=f.indexOf(a[h]);if(-1==d[h])return-1;e+=1<<(d[h]<<2)}if(10066329!=e)return-1;var k;for(h=0;8>h;++h){for(k=0;3>k&&0!=d[b[h][k]]&&3!=d[b[h][k]];++k);a=d[b[h][(k+1)%3]];e=d[b[h][(k+2)%3]];for(f=0;8>f;++f)if(a==~~(b[f][1]/9)&&e==~~(b[f][2]/9)){this.ca[h]=f|k%3<<
3;break}}for(h=0;12>h;++h)for(f=0;12>f;++f){if(d[c[h][0]]==~~(c[f][0]/9)&&d[c[h][1]]==~~(c[f][1]/9)){this.ea[h]=f<<1;break}if(d[c[h][0]]==~~(c[f][1]/9)&&d[c[h][1]]==~~(c[f][0]/9)){this.ea[h]=f<<1|1;break}}};k.prototype.set=function(a){this.twist=a.twist;this.tsym=a.tsym;this.flip=a.flip;this.fsym=a.fsym;this.slice=a.slice;this.prun=a.prun;this.twistc=a.twistc;this.flipc=a.flipc};k.prototype.calcPruning=function(a){this.prun=Math.max(Math.max(c(sa,Da,495*this.twist+aa[this.slice][this.tsym]),c(xa,
ba,495*this.flip+aa[this.slice][this.fsym])),Math.max(c(la,ma,this.twistc>>3<<11|ia[this.flipc^this.twistc&7]),c(la,ma,this.twist<<11|ia[this.flip<<3|this.fsym^this.tsym])))};k.prototype.setWithPrun=function(a,e){this.twist=a.getTwistSym();this.flip=a.getFlipSym();this.tsym=this.twist&7;this.twist>>=3;this.prun=c(la,ma,this.twist<<11|ia[this.flip^this.tsym]);if(this.prun>e)return!1;this.fsym=this.flip&7;this.flip>>=3;this.slice=a.getUDSlice();this.prun=Math.max(this.prun,Math.max(c(sa,Da,495*this.twist+
aa[this.slice][this.tsym]),c(xa,ba,495*this.flip+aa[this.slice][this.fsym])));if(this.prun>e)return!1;var d=new b;b.CornConjugate(a,1,d);b.EdgeConjugate(a,1,d);this.twistc=d.getTwistSym();this.flipc=d.getFlipSym();this.prun=Math.max(this.prun,c(la,ma,this.twistc>>3<<11|ia[this.flipc^this.twistc&7]));return this.prun<=e};k.prototype.doMovePrun=function(a,b,e){this.slice=V[a.slice][b];this.flip=pa[a.flip][Y[b<<3|a.fsym]];this.fsym=this.flip&7^a.fsym;this.flip>>=3;this.twist=ha[a.twist][Y[b<<3|a.tsym]];
this.tsym=this.twist&7^a.tsym;this.twist>>=3;return this.prun=Math.max(Math.max(c(sa,Da,495*this.twist+aa[this.slice][this.tsym]),c(xa,ba,495*this.flip+aa[this.slice][this.fsym])),c(la,ma,this.twist<<11|ia[this.flip<<3|this.fsym^this.tsym]))};k.prototype.doMovePrunConj=function(a,b){b=v[3][b];this.flipc=pa[a.flipc>>3][Y[b<<3|a.flipc&7]]^a.flipc&7;this.twistc=ha[a.twistc>>3][Y[b<<3|a.twistc&7]]^a.twistc&7;return c(la,ma,this.twistc>>3<<11|ia[this.flipc^this.twistc&7])};a.prototype.solution=function(a,
b,c,e,d,f,h){G();a=this.verify(a);if(0!=a)return"Error "+Math.abs(a);void 0===b&&(b=21);void 0===c&&(c=1E9);void 0===e&&(e=0);void 0===d&&(d=0);this.sol=b+1;this.probe=0;this.probeMax=c;this.probeMin=Math.min(e,c);this.verbose=d;this.moveSol=null;this.isRec=!1;this.firstFilters=[0,0,0,0,0,0];this.lastFilters=[0,0,0,0,0,0];for(b=0;3>b;b++)void 0!==f&&(this.firstFilters[b]|=3591<<3*~~(K[(3-b)%3][3*f]/3),this.lastFilters[b+3]|=3591<<3*~~(K[(3-b)%3][3*f]/3)),void 0!==h&&(this.lastFilters[b]|=3591<<3*
~~(K[(3-b)%3][3*h]/3),this.firstFilters[b+3]|=3591<<3*~~(K[(3-b)%3][3*h]/3));this.initSearch();return this.search()};a.prototype.initSearch=function(){this.conjMask=0;this.maxPreMoves=7<this.conjMask?0:20;for(var a=0;6>a;a++)if(this.urfCubieCube[a].init(this.cc.ca,this.cc.ea),this.urfCoordCube[a].setWithPrun(this.urfCubieCube[a],20),this.cc.URFConjugate(),2==a%3){var c=(new b).invFrom(this.cc);this.cc.init(c.ca,c.ea)}};a.prototype.next=function(a,b,c){this.probe=0;this.probeMax=a;this.probeMin=Math.min(b,
a);this.moveSol=null;this.isRec=!0;this.verbose=c;return this.search()};a.prototype.verify=function(a){if(-1==this.cc.fromFacelet(a))return-1;for(var b=a=0,c=0;12>c;c++)b|=1<<(this.cc.ea[c]>>1),a^=this.cc.ea[c]&1;if(4095!=b)return-2;if(0!=a)return-3;for(c=a=b=0;8>c;c++)b|=1<<(this.cc.ca[c]&7),a+=this.cc.ca[c]>>3;return 255!=b?-4:0!=a%3?-5:0!=(D(f(this.cc.ea,12,!0),12)^D(this.cc.getCPerm(),8))?-6:0};a.prototype.phase1PreMoves=function(a,c,e){if(a==this.maxPreMoves-1&&0!=(this.lastFilter>>c&1))return 1;
this.preMoveLen=this.maxPreMoves-a;if(this.isRec?this.depth1==this.length1-this.preMoveLen:0==this.preMoveLen||0==(225207>>c&1))if(this.depth1=this.length1-this.preMoveLen,this.phase1Cubie[0].init(e.ca,e.ea),this.allowShorter=7==this.depth1&&0!=this.preMoveLen,this.nodeUD[this.depth1+1].setWithPrun(e,this.depth1)&&0==this.phase1(this.nodeUD[this.depth1+1],this.depth1,-1))return 0;if(0==a||this.preMoveLen+7>=this.length1)return 1;var d=0;if(1==a||this.preMoveLen+1+7>=this.length1)d|=225207;c=3*~~(c/
3);for(var f=0;18>f;f++)if(f==c||f==c-9||f==c+9)f+=2;else if(!(this.isRec&&f!=this.preMoves[this.maxPreMoves-a]||0!=(d&1<<f))&&(b.CornMult(z[f],e,this.preMoveCubes[a]),b.EdgeMult(z[f],e,this.preMoveCubes[a]),this.preMoves[this.maxPreMoves-a]=f,0==this.phase1PreMoves(a-1,f,this.preMoveCubes[a])))return 0;return 1};a.prototype.search=function(){for(this.length1=this.isRec?this.length1:0;this.length1<this.sol;this.length1++)for(this.urfIdx=this.isRec?this.urfIdx:0;6>this.urfIdx;this.urfIdx++)if(0==(this.conjMask&
1<<this.urfIdx)&&(this.firstFilter=this.firstFilters[this.urfIdx],this.lastFilter=this.lastFilters[this.urfIdx],0==this.phase1PreMoves(this.maxPreMoves,-30,this.urfCubieCube[this.urfIdx],0)))return null==this.moveSol?"Error 8":this.moveSol;return null==this.moveSol?"Error 7":this.moveSol};a.prototype.initPhase2Pre=function(){this.isRec=!1;if(this.probe>=(null==this.moveSol?this.probeMax:this.probeMin))return 0;++this.probe;for(var a=this.valid1;a<this.depth1;a++)b.CornMult(this.phase1Cubie[a],z[this.move[a]],
this.phase1Cubie[a+1]),b.EdgeMult(this.phase1Cubie[a],z[this.move[a]],this.phase1Cubie[a+1]);this.valid1=this.depth1;a=this.initPhase2(this.phase1Cubie[this.depth1]);if(0==a||0==this.preMoveLen||2==a)return a;a=3*~~(this.preMoves[this.preMoveLen-1]/3)+1;b.CornMult(z[a],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]);b.EdgeMult(z[a],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]);this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2;a=this.initPhase2(this.phase1Cubie[this.depth1+
1]);this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2;return a};a.prototype.initPhase2=function(a){var b=a.getCPermSym(),e=b&15;b>>=4;var d=a.getEPermSym(),f=d&15;d>>=4;a=a.getMPerm();var h=Math.max(c(Ha,Fa,140*d+qa[W[b]&255][N[f][e]]),c(Ga,ta,24*b+ua[a][e])),k=Math.min(13,this.sol-this.length1);if(h>=k)return h>k?2:1;var n;for(n=k-1;n>=h;n--){var g=this.phase2(d,f,b,e,a,n,this.depth1,10);if(0>g)break;n-=g;this.moveSol=[];for(g=0;g<this.depth1+n;g++)this.appendSolMove(this.move[g]);
for(g=this.preMoveLen-1;0<=g;g--)this.appendSolMove(this.preMoves[g]);this.sol=this.moveSol.length;this.moveSol=this.solutionToString()}return n!=k-1?this.probe>=this.probeMin?0:1:1};a.prototype.phase1=function(a,b,c){if(b==this.depth1-1&&0!=(this.firstFilter>>c&1))return 1;if(0==a.prun&&5>b){if(this.allowShorter||0==b){this.depth1-=b;var e=this.initPhase2Pre();this.depth1+=b;return e}return 1}for(var d=0;18>d;d+=3)if(d!=c&&d!=c-9)for(var f=0;3>f;f++)if(e=d+f,!this.isRec||e==this.move[this.depth1-
b]){var h=this.nodeUD[b].doMovePrun(a,e,!0);if(h>b)break;else if(h==b)continue;h=this.nodeUD[b].doMovePrunConj(a,e);if(h>b)break;else if(h==b)continue;this.move[this.depth1-b]=e;this.valid1=Math.min(this.valid1,this.depth1-b);e=this.phase1(this.nodeUD[b],b-1,d);if(0==e)return 0;if(2==e)break}return 1};a.prototype.appendSolMove=function(a){if(0==this.moveSol.length)this.moveSol.push(a);else{var b=~~(a/3),c=~~(this.moveSol[this.moveSol.length-1]/3);b==c?(a=(a%3+this.moveSol[this.moveSol.length-1]%3+
1)%4,3==a?this.moveSol.pop():this.moveSol[this.moveSol.length-1]=3*b+a):1<this.moveSol.length&&b%3==c%3&&b==~~(this.moveSol[this.moveSol.length-2]/3)?(a=(a%3+this.moveSol[this.moveSol.length-2]%3+1)%4,3==a?(this.moveSol[this.moveSol.length-2]=this.moveSol[this.moveSol.length-1],this.moveSol.pop()):this.moveSol[this.moveSol.length-2]=3*b+a):this.moveSol.push(a)}};a.prototype.phase2=function(a,b,e,d,f,h,k,g){if(0==this.depth1&&1==k&&0!=(this.firstFilter>>t[g]&1))return-1;if(0==a&&0==e&&0==f&&(0<this.preMoveLen||
0==(this.lastFilter>>t[g]&1)))return h;g=J[g];for(var n=0;10>n;n++)if(0!=(g>>n&1))n+=66>>n&3;else{var v=Ca[f][n],m=Ba[e][I[d][n]],p=P[m&15][d];m>>=4;if(!(c(Ga,ta,24*m+ua[v][p])>=h)){var L=va[a][I[b][n]],l=P[L&15][b];L>>=4;if(!(c(Ha,Fa,140*L+qa[W[m]&255][N[l][p]])>=h)){var q=A(L,l,!1),K=A(m,p,!0);if(!(c(Ha,Fa,140*(q>>4)+qa[W[K>>4]&255][N[q&15][K&15]])>=h)&&(v=this.phase2(L,l,m,p,v,h-1,k+1,n),0<=v))return this.move[k]=t[n],v}}}return-1};a.prototype.solutionToString=function(){var a="",b=0!=(this.verbose&
2)?(this.urfIdx+3)%6:this.urfIdx;if(3>b)for(var c=0;c<this.moveSol.length;++c)a+=h[K[b][this.moveSol[c]]]+" ";else for(c=this.moveSol.length-1;0<=c;--c)a+=h[K[b][this.moveSol[c]]]+" ";return a};var z=[],T=[],P=[],N=[],v=[],I=[],Y=[],Q=[],U=[],X=[],Z=[],da=[],ea=[],fa=[],ja=[],na=[],ia=[],W=[],R=[],V=[],ha=[],pa=[],aa=[],Da=[],ba=[],ma=[],Ba=[],va=[],Ca=[],ua=[],ka=[],qa=[],ta=[],Fa=[],la=15,sa=15,xa=15,Ga=15,Ha=15;for(L=0;18>L;L++)z[L]=new b;z[0].initCoord(15120,0,119750400,0);z[3].initCoord(21021,
1494,323403417,0);z[6].initCoord(8064,1236,29441808,550);z[9].initCoord(9,0,5880,0);z[12].initCoord(1230,412,2949660,0);z[15].initCoord(224,137,328552,137);for(L=0;18>L;L+=3)for(O=0;2>O;O++)b.EdgeMult(z[L+O],z[L],z[L+O+1]),b.CornMult(z[L+O],z[L],z[L+O+1]);b.urf1=(new b).initCoord(2531,1373,67026819,1367);b.urf2=(new b).initCoord(2089,1906,322752913,2040);var oa=-1;return{Search:a,solve:function(b){return(new a).solution(b)},randomCube:function(){var a=~~(2048*Math.random()),c=~~(2187*Math.random());
do{var e=~~(Math.random()*m[12]);var d=~~(Math.random()*m[8])}while(D(d,8)!=D(e,12));return(new b).initCoord(d,c,e,a).toFaceCube()},initFull:function(){u=0;G()}}}();"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=min2phase);var cubeutil=function(){function a(a){for(var b={},c=0;c<a.length;c++){var e=a[c];"-"!=e&&(b[e]=b[e]||[],b[e].push(c))}a=[];for(e in b)1<b[e].length&&a.push(b[e]);return a}function g(a,b){var c=O[a[1]],e=a[0];b=b||L;for(var d=0;d<b.length;d++)for(var f=b[d],h=e[c[f[0]]],k=1;k<f.length;k++)if(e[c[f[k]]]!=h)return 1;return 0}function d(a){return g(a,k)?9:g(a,u)?4+g(a,w)+g(a,E)+g(a,x)+g(a,G):g(a,m)?4:g(a,p)?3:g(a,h)?2:g(a)?1:0}function l(a){return g(a,k)?7:g(a,u)?2+g(a,w)+g(a,E)+g(a,x)+g(a,G):g(a,p)?
2:g(a)?1:0}function c(a){return g(a,k)?4:g(a,u)?3:g(a,p)?2:g(a)?1:0}function A(a){return g(a,u)?2:g(a)?1:0}function b(a){return g(a,t)?4:g(a,e)?3:g(a,J)?2:g(a)?1:0}function y(a,b){return a in M?g(b,M[a][1]):g(b)}function C(a,b,c){for(var e=99,d=0;d<c;d++)e=Math.min(e,b([a,d]));return e}function B(a){var b=[0,1,2,3,4,5];return $.map(a,function(a,c){function e(a,b){0==d.length||~~(d[d.length-1]/3)!=a?d.push(3*a+b):(b=(b+d[d.length-1]%3+1)%4,3==b?d.pop():d[d.length-1]=3*a+b)}for(var d=[],f=0;f<a.length;f++){var h=
b.indexOf("URFDLB".indexOf(a[f][0][0])),k=" 2'".indexOf(a[f][0][1])%3;if(f==a.length-1||100<a[f+1][1]-a[f][1])e(h,k);else{var g=b.indexOf("URFDLB".indexOf(a[f+1][0][0])),m=" 2'".indexOf(a[f+1][0][1])%3;if(h!=g&&h%3==g%3&&2==k+m){g=h%3;h=(k-1)*[1,1,-1,-1,-1,1][h]+1;e(g+6,h);for(k=0;k<h+1;k++){m=[];for(var v=0;6>v;v++)m[v]=b[n[g][v]];b=m}f++}else e(h,k)}}return[[$.map(d,function(a){return"URFDLBEMS".charAt(~~(a/3))+" 2'".charAt(a%3)}).join(""),d.length]]})}function f(a,b,c){for(var e=[],d=0;24>d;d++)0==
g([a,d],b)&&e.push(d);for(b=0;b<c.length;b++)for(d=0;d<e.length;d++)if(0==g([a,e[d]],c[b]))return b;return-1}function q(a){switch(a){case "cfop":return["pll","oll","f2l","cross"];case "fp":return["op","cf"];case "cf4op":return"pll oll f2l-4 f2l-3 f2l-2 f2l-1 cross".split(" ");case "roux":return["l6e","cmll","sb","fb"];case "cf4o2p2":return"pll cpll oll eoll f2l-4 f2l-3 f2l-2 f2l-1 cross".split(" ");case "n":return["solve"]}}function r(a,b,c){a=a||"";c&&(a=kernel.getProp(tools.isCurTrainScramble()?
"preScrT":"preScr")+" "+a);c=[];a=a.split(" ");for(var e,d,f,h=0;h<a.length;h++)if(e=N.exec(a[h]),null!=e)if(f="FRUBLDfrubldzxySME".indexOf(e[2]),14<f)e="2'".indexOf(e[5]||"X")+2,f=[0,4,5][f%3],c.push([b.indexOf("FRUBLD".charAt(f)),2,e]),c.push([b.indexOf("FRUBLD".charAt(f)),1,4-e]);else{d=(e[1]||"").split("-");var k=~~d[1]||-1;d=12>f?~~d[0]||~~e[4]||("w"==e[3]||5<f)&&2||1:-1;e=(12>f?1:-1)*("2'".indexOf(e[5]||"X")+2);c.push([b.indexOf("FRUBLD".charAt(f%6)),d,e,k])}return c}function D(){for(var a=
kernel.getProp(tools.isCurTrainScramble()?"preScrT":"preScr","").split(" "),b=new mathlib.CubieCube,c=0;c<a.length;c++)b.selfMoveStr(a[c]);return b.ori||0}var k=a("----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-"),w=a("----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-"),E=a("----U--------R--R----FF-FF-DD-DDD-D-----LL-LL----B--B-"),x=a("----U--------RR-RR----F--F--D-DDD-DD----L--L----BB-BB-"),G=a("----U--------R--R-----F--F--D-DDDDD----LL-LL-----BB-BB"),u=a("----U-------RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),
p=a("UUUUUUUUU---RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),m=a("-U-UUU-U----RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB"),h=a("UUUUUUUUUr-rRRRRRRf-fFFFFFFDDDDDDDDDl-lLLLLLLb-bBBBBBB"),t=a("---------------------F--F--D--D--D-----LLLLLL-----B--B"),e=a("------------RRRRRR---F-FF-FD-DD-DD-D---LLLLLL---B-BB-B"),J=a("U-U---U-Ur-rRRRRRRf-fF-FF-FD-DD-DD-Dl-lLLLLLLb-bB-BB-B"),K=a("---------------R-R------F-FD-D---D-D------L-L------B-B"),L=a(mathlib.SOLVED_FACELET),O=function(){function a(a,b){for(var c=
[],e=0;54>e;e++)c[b[e]]=a[e];return c}for(var b=[2,5,8,1,4,7,0,3,6,18,19,20,21,22,23,24,25,26,36,37,38,39,40,41,42,43,44,33,30,27,34,31,28,35,32,29,45,46,47,48,49,50,51,52,53,9,10,11,12,13,14,15,16,17],c=[53,52,51,50,49,48,47,46,45,11,14,17,10,13,16,9,12,15,0,1,2,3,4,5,6,7,8,18,19,20,21,22,23,24,25,26,42,39,36,43,40,37,44,41,38,35,34,33,32,31,30,29,28,27],e=[11,14,17,10,13,16,9,12,15,29,32,35,28,31,34,27,30,33,20,23,26,19,22,25,18,21,24,38,41,44,37,40,43,36,39,42,2,5,8,1,4,7,0,3,6,51,48,45,52,49,
46,53,50,47],d=[],f=[],h=0;54>h;h++)f[h]=h;for(h=0;24>h;h++)d[h]=f.slice(),f=a(f,h&1?c:e),5==h%6&&(f=a(f,e),f=a(f,e)),11==h%12&&(f=a(f,b),f=a(f,b));return d}(),M={cross:[6,k],f2l:[6,u],oll:[6,p],eoll:[6,m],cpll:[6,h],fb:[24,t],sb:[24,e],cmll:[24,J]},n=[[0,2,4,3,5,1],[5,1,0,2,4,3],[4,0,2,1,3,5]],S=function(){var b=[];return function(c){for(var e=b.length;22>e;e++){var d=21==e?"UUUUUUUUUFFFRRRBBBLLL":scramble_333.getPLLImage(e)[0];b.push(a("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,
function(a){return d[parseInt(a,36)].toLowerCase()})))}return f(c,p,b)}}(),H=function(){var b=[];return function(c){for(var e=b.length;58>e;e++){var d=scramble_333.getOLLImage(e)[0].replace(/G/g,"-");b.push(a("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,function(a){return d[parseInt(a,36)].toLowerCase()})))}return f(c,u,b)}}(),z=function(){var b=[];return function(c){for(var e=b.length;43>e;e++){var d=scramble_333.getCOLLImage("D",e)[0].replace(/G/g,"-");b.push(a("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,
function(a){return d[parseInt(a,36)].toLowerCase()})))}return f(c,m,b)}}(),T=function(){var b=[];return function(c){for(var e=b.length;493>e;e++){var d=scramble_333.getZBLLImage(e)[0].replace(/G/g,"-");b.push(a("012345678cdeRRRRRR9abFFFFFFDDDDDDDDDijkLLLLLLfghBBBBBB".replace(/[0-9a-z]/g,function(a){return d[parseInt(a,36)].toLowerCase()})))}return f(c,m,b)}}(),P=function(){var b=[];return function(c){for(var e=b.length;40>e;e++){var d=scramble_222.getEGLLImage(e)[0].replace(/G/g,"-");b.push(a("0-1---2-36-7---R-R4-5---F-FD-D---D-Da-b---L-L8-9---B-B".replace(/[0-9a-z]/g,
function(a){return d[parseInt(a,36)].toLowerCase()})))}return f(c,K,b)}}(),N=/^([\d]+(?:-\d+)?)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?([2'])?$/;return{getProgress:function(a,e){switch(e){case "cfop":return C(a,c,6);case "fp":return C(a,A,6);case "cf4op":return C(a,l,6);case "roux":return C(a,b,24);case "cf4o2p2":return C(a,d,6);case "n":return C(a,g,1)}},getStepNames:q,getStepCount:function(a){return(a=q(a))?a.length:0},getStepProgress:function(a,b,c){c||(c=a in M?M[a][0]:1);return C(b,y.bind(null,
a),c)},getPrettyMoves:B,getPrettyReconstruction:function(a,b){for(var c="",e=B(a),d=q(b).reverse(),f=0,h=0;h<e.length;h++)f+=e[h][1],c+=e[h][0].replace(/ /g,"")+(d[h]?" // "+d[h]+" "+e[h][1]+" move(s)":"")+"\n";return{prettySolve:c,totalMoves:f}},moveSeq2str:function(a){return $.map(a,function(a){return a[0].trim()+"@"+a[1]}).join(" ")},getScrambledState:function(a,b){var c=a[1];if(tools.isPuzzle("333",a)){c=r(c,"URFDLB");for(var e=new mathlib.CubieCube,d=new mathlib.CubieCube,f=e.ori=0;f<c.length;f++){var h=
c[f][0],k=c[f][2],g=3*h+k-1;if(!(0>g||18<=g)){if(2==c[f][1]){g=[3,15,17,1,11,23][h];for(var n=0;n<k;n++)e.ori=mathlib.CubieCube.rotMult[g][e.ori];g=mathlib.CubieCube.rotMulM[e.ori][(h+3)%6*3+k-1]}mathlib.CubieCube.EdgeMult(e,mathlib.CubieCube.moveCube[g],d);mathlib.CubieCube.CornMult(e,mathlib.CubieCube.moveCube[g],d);e.init(d.ca,d.ea)}}return b?e.toFaceCube():e}},identStep:function(a,b){switch(a){case "PLL":return S(b);case "OLL":return H(b);case "COLL":return z(b);case "ZBLL":return T(b);case "C2CLL":return P(b)}},
getIdentData:function(a){var b={PLL:[S,scramble_333.getPLLImage,0,21,0],OLL:[H,scramble_333.getOLLImage,1,58,1],COLL:[z,scramble_333.getCOLLImage.bind(null,"D"),0,40,1],ZBLL:[z,scramble_333.getZBLLImage,0,493,1],CLL:[P,scramble_222.getEGLLImage,0,40,1]};return a?b[a]:b},parseScramble:r,getConjMoves:function(a,b,c){if(!a)return a;void 0===c&&(c=D());b&&(c=mathlib.CubieCube.rotMulI[0][c||0]);return a.replace(/[URFDLB]/g,function(a){return"URFDLB".charAt(mathlib.CubieCube.rotMulM[c][3*"URFDLB".indexOf(a)]/
3)})},getPreConj:D}}();var scrMgr=function(a,g){function d(b,c,d){b=b||[[""]];c=c||[""];d=d||0;for(var f=0,l=-1,k=[],q,E,x=0;x<d;x++){do q=a(b.length),E=a(b[q].length),q!=l&&(f=0,l=q);while(0!=(f>>E&1));f|=1<<E;b[q][E].constructor==Array?k.push(g(b[q][E])+g(c)):k.push(b[q][E]+g(c))}return k.join(" ")}function l(a,d,g){DEBUG&&console.log("[regscr]",a);if($.isArray(a))for(g=0;g<a.length;g++)c[a[g]]=d;else c[a]=d,void 0!=g&&(A[a]=g[0],b[a]=g[1],y[a]=g[2]);return l}var c={blank:function(){return"N/A"}},A={},b={},y={},C=!1;
return{reg:l,scramblers:c,filters:A,probs:b,imgGens:y,mega:d,formatScramble:function(a){return a.replace(/[$#]\{([^\}]+)\}/g,function(a,b){if("$"==a[0]){var f=[b];"["==b[0]&&(f=JSON.parse(b));return c[f[0]].apply(this,f)}return"#"==a[0]?d.apply(this,JSON.parse("["+b+"]")):""})},rndState:function(a,b){if(void 0!=b){var c=b.slice();void 0==a&&(a=c);if(0==b[0])return a.slice();for(var d=0;d<a.length;d++)a[d]?C&&(c[d]=1):c[d]=0;return mathlib.rndProb(c)}},fixCase:function(a,b){return void 0!=a?a:C?mathlib.rn(b.length):
mathlib.rndProb(b)},setEqPr:function(a){C=a},getEqPr:function(){return C}}}(mathlib.rn,mathlib.rndEl),scramble=execMain(function(a,g){function d(){kernel.blur();kernel.pushSignal("scrambling",P);n.html(SCRAMBLE_SCRAMBLING+"...");X=!P||/^(remote|input$)/.exec(P)?X:P;Z||(I=P,Y=N,Q=v);Z=!1;Y&&da.addClass("click").unbind("click").click(l);P=t.getSelected()||"333";v=~~M.val();I!=P&&kernel.setProp("scrType",P);N="";requestAnimFrame(y)}function l(){Z=!0;n.html(b(I,Y,Q,!0));da.removeClass("click").unbind("click");
void 0!=Y&&kernel.pushSignal("scrambleX",b(I,Y,Q))}function c(){Z?(Z=!1,n.html(b(P,N,v,!0)),da.addClass("click").unbind("click").click(l),kernel.pushSignal("scrambleX",b(P,N,v))):d()}function A(){if(N){var a=kernel.getProp("scrClk","n");"c"==a?(a=tools.getCurScramble()[1].trim(),$.clipboardCopy(a).then(logohint.push.bind(logohint,LGHINT_SCRCOPY),logohint.push.bind(logohint,"Copy Failed"))):"+"==a&&c()}}function b(a,b,c,e,d){b=b||"";c=c||0;var f=T.exec(b);f&&(a=f[1],b=f[3],c=~~f[2]);f=b.replace(/<span[^>]*>(.*?)<\/span>/ig,
"$1 ").replace(/~/g,"").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,"$1");return e?(a=kernel.getProp("scrASize")?Math.max(.25,Math.round(20*Math.pow(50/Math.max(f.length,10),.3))/20):1,n.css("font-size",a+"em"),DEBUG&&console.log("[scrFontSize]",a),b.replace(/~/g,"&nbsp;").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,d||kernel.getProp("scrKeyM",!1)?"<u>$1</u>":"$1")):[a,f,c]}function y(){f();N?(N=N.replace(/(\s*)$/,""),n.html(b(P,N,v,!0)),kernel.pushSignal("scramble",b(P,N,v))):n.html(SCRAMBLE_SCRAMBLING+
"... ")}function C(a,b,c){fa&&!a[0].startsWith("nocache_")&&(csTimerWorker&&csTimerWorker.getScramble?ja=ja||csTimerWorker.getScramble(a,function(a,b){DEBUG&&console.log("[scrcache]",a+" cached by csTimerWorker");B(a,b)}.bind(void 0,b)):c||(ja=ja||setTimeout(function(a,b){var c=E[b[0]];B(a,c.apply(c,b))}.bind(void 0,b,a),500)))}function B(a,b){var c=JSON.parse(localStorage.cachedScr||null)||{};$.isArray(c)&&(c={});c[a]=b;localStorage.cachedScr=JSON.stringify(c);ja=0}function f(){if(P){N="";var a=
H[P]||P;if("input"==a)N=ia.next();else if(ia.clear(),a.startsWith("remote"))N=na.next(a);else if(na.clear(),a in E){var b=JSON.parse(localStorage.cachedScr||null)||{},c=JSON.stringify([a,v,z[1],U]);fa&&c in b&&!a.startsWith("nocache_")?(N=b[c],delete b[c],localStorage.cachedScr=JSON.stringify(b)):N=E[a](a,v,V(z[1],G[a]),U);C([a,v,V(z[1],G[a]),U],c)}else requestAnimFrame(y)}}function q(){kernel.blur();var a=t.getSelIdx();scrdata[a[0]]&&scrdata[a[0]][1]&&scrdata[a[0]][1][a[1]]||(a=[0,0]);a=scrdata[a[0]][1][a[1]][2];
M.val(Math.abs(a));M[0].disabled=0>=a;a=t.getSelected();z=JSON.parse(kernel.getProp("scrFlt",JSON.stringify([a,x[a]])));e[0].disabled=M[0].disabled&&!(a in x);z[0]!=a&&(z=[a,x[a]&&mathlib.valuedArray(x[a].length,1)],kernel.setProp("scrFlt",JSON.stringify(z),"session"))}function r(){q();d()}function D(){function a(){if(P in x){for(var a=mathlib.valuedArray(x[P].length,1),c=!1,f=0;f<b.length;f++)b[f][0].checked?c=!0:a[f]=0;c?(z=[P,a],a=JSON.stringify(z),kernel.getProp("scrFlt")!=a&&(e=!0,kernel.setProp("scrFlt",
a))):alert(SCROPT_EMPTYALT);e&&d()}}K.empty();var b=[],c=[],e=!1;if(P in x){var f=x[P],h=u[P],k=f;z[0]==P&&(k=z[1]||f);K.append("<br>",L,O,"<br><br>");for(var g={},n=0;n<f.length;n++){var m=f[n].indexOf("-");-1==m?g[f[n]]=[n]:(m=f[n].slice(0,m),g[m]=g[m]||[],g[m].push(n))}for(n=0;n<f.length;n++){m=$('<input type="checkbox">').val(n);k[n]&&(m[0].checked=!0);b.push(m);m=$("<label>").append(m,f[n]);if(h){var p=$('<img style="display:block;">');h(n,p);p.width("5em");p.height("5em");m.append("<br>",p);
m.addClass("bimg")}c.push(m)}var t=function(a){var c=0;$.each(g[a],function(a,e){c+=b[e][0].checked?1:0});return c+"/"+g[a].length},l;for(l in g)1==g[l].length&&K.append(c[g[l][0]]);for(l in g)1!=g[l].length&&K.append($("<div>").attr("data",l).append($('<div class="sgrp">').append($("<span>").html(l+" "+t(l))," | ",$('<span class="click">').html(SCROPT_BTNALL).click(function(){var a=$(this).parent().parent().attr("data");$.each(g[a],function(a,c){b[c][0].checked=!0});$(this).parent().children().first().html(a+
" "+t(a))})," | ",$('<span class="click">').html(SCROPT_BTNNONE).click(function(){var a=$(this).parent().parent().attr("data");$.each(g[a],function(a,c){b[c][0].checked=!1});$(this).parent().children().first().html(a+" "+t(a))})," | ",$('<span class="click">[+]</span>').click(function(){$(this).parent().next().toggle()})),$("<div>").append($.map(g[l],function(a){b[a].change(function(){var a=$(this).parent().parent().parent().attr("data");$(this).parent().parent().parent().find("span:first").html(a+
" "+t(a))});return c[a]}))));L.unbind("click").click(function(){for(var a=0;a<b.length;a++)b[a][0].checked||(b[a][0].checked=!0),b[a].change()});O.unbind("click").click(function(){for(var a=0;a<b.length;a++)b[a][0].checked&&(b[a][0].checked=!1),b[a].change()})}kernel.showDialog([J,a,null,a],"scropt",SCROPT_TITLE)}function k(a,e){"time"==a?W?d():(n.empty(),kernel.pushSignal("scramble",["-","",0])):"property"==a?"scrSize"==e[0]?S.css("font-size",e[1]/7+"em"):"scrMono"==e[0]?p.css("font-family",e[1]?
"Monospace":"Arial"):"scrType"==e[0]?e[1]!=t.getSelected()&&(t.loadVal(e[1]),r()):"scrLim"==e[0]?e[1]?S.addClass("limit"):S.removeClass("limit"):"scrAlign"==e[0]?"c"==e[1]?p.css("text-align","center"):"l"==e[1]?p.css("text-align","left"):"r"==e[1]&&p.css("text-align","right"):"scrFast"==e[0]?(H["444wca"]=e[1]?"444m":"444wca","444wca"==P&&d()):"scrKeyM"==e[0]?n.html(Z?b(I,Y||"",Q||0,!0):b(P,N||"",v,!0)):"scrHide"==e[0]?e[1]?m.hide():m.show():"scrNeut"==e[0]?(U=~~e[1],"modify"==e[2]&&d()):"scrEqPr"==
e[0]&&scrMgr.setEqPr(!!e[1]):"button"==a&&"scramble"==e[0]?(W=e[1])&&""==n.html()&&d():"ctrl"==a&&"scramble"==e[0]?"last"==e[1]?l():"next"==e[1]&&c():"scrfix"==a&&e&&n.html(b(P,e,v,!0,!0))}function w(a,b){for(var c=0;c<scrdata.length;c++)for(var e=0;e<scrdata[c][1].length;e++)if(scrdata[c][1][e][1]==a){b(c,e);return}}var E=scrMgr.scramblers,x=scrMgr.filters,G=scrMgr.probs,u=scrMgr.imgGens,p=$('<div id="scrambleDiv"/>'),m=$("<div />").addClass("title"),h=[$("<select />"),$("<select />")],t=new kernel.TwoLvMenu(scrdata,
r,h[0],h[1],"333"),e=$('<input type="button" class="icon">').val(""),J=$("<div>"),K=$('<div class="sflt">'),L=$('<input type="button">').val(SCROPT_BTNALL),O=$('<input type="button">').val(SCROPT_BTNNONE),M=$('<input type="text" maxlength="3">'),n=$("<div>"),S=$('<div id="scrambleTxt"/>'),H={"333oh":"333","333ft":"333"},z="",T=/^\$T([a-zA-Z0-9]+)(-[0-9]+)?\$\s*(.*)$/,P,N,v=0,I,Y,Q=0,U=0,X="333",Z=!1,da=$("<span />").html(SCRAMBLE_LAST),ea=$("<span />").addClass("click").html(SCRAMBLE_NEXT).click(c),
fa=!0,ja=0;$(function(){if(csTimerWorker&&csTimerWorker.getScramble){var a=['["444wca",40,null]'],b=JSON.parse(localStorage.cachedScr||null)||{};$.isArray(b)&&(b={});for(var c=0;c<a.length;c++)a[c]in b||setTimeout(C.bind(void 0,JSON.parse(a[c]),a[c],!0),2500+~~(5E3*Math.random()))}});var na=function(){function a(){kernel.setProp("scrType",X)}function b(a){if(!$.isArray(a))return!1;c=a;return 0!=c.length}var c=[];return{next:function(e){for(var d=null;!d&&0!=c.length;)d=c.shift();if(d)return d;"remoteComp"==
e?window.onlinecomp?onlinecomp.getScrambles().then(function(c){b(c)?requestAnimFrame(y):a()},a):a():"remoteBattle"==e?window.battle?battle.getScrambles().then(function(c){b(c)?requestAnimFrame(y):a()},a):a():"remoteURL"==e&&$.getJSON("https://cstimer.net/testRemoteScramble.php",function(c){b(c)?requestAnimFrame(y):a()}).error(a);return""},clear:function(){c=[]}}}(),ia=function(){function a(){var a=d.val();if(a.match(/^\s*$/))a=!1;else{c=[];a=a.split("\n");for(var b="$T"+f.val()+"$",e=0;e<a.length;e++){var h=
a[e];null==h.match(/^\s*$/)&&(h=h.replace(/^\d+[\.\),]\s*/,""),T.exec(h)||(h=b+h),c.push(h))}a=0!=c.length}a?y():kernel.setProp("scrType",X)}function b(){kernel.setProp("scrType",X)}var c=[],e,d,f;return{next:function(){for(var h=null;!h&&0!=c.length;)h=c.shift();if(h)return h;if(!f){e=$("<table>");d=$('<textarea style="width:100%;height:100%;">');f=$("<select>");h="333 222so 444wca 555wca 666wca 777wca clkwca mgmp pyrso skbso sqrs".split(" ");for(var k=0;k<h.length;k++)f.append($("<option>").val(h[k]).html(t.getValName(h[k])));
e.append($("<tr height=0%>").append($("<td>").append("Scramble type:",f)),$("<tr height=100%>").append($("<td>").append(d)));f.val("333")}d.val("");kernel.showDialog([e,a,b],"input",SCRAMBLE_INPUT);return""},clear:function(){c=[]}}}(),W=!1,R=function(){function a(){var a=~~d.val();n="";for(var b=N,c=k.val(),e=0;e<a;e++)f(),n+=c.replace("1",e+1)+N+"\n";N=b;h.text(n);$.clipboardCopy(n).then(logohint.push.bind(logohint,LGHINT_SCRCOPY),logohint.push.bind(logohint,"Copy Failed"));h.select()}function b(a){if(n){a=
new Blob([n],{type:"text/plain"});var b=$('<a class="click"/>').appendTo("body");b.attr("href",URL.createObjectURL(a));b.attr("download","Scrambles_"+mathlib.time2str(new Date/1E3,"%Y%M%D_%h%m%s")+".txt");b[0].click();b.remove()}}var c=$("<div />").css("text-align","center").css("font-size","0.7em"),e=$("<span />").addClass("click").html(SCRGEN_GEN),d=$('<input type="text" maxlength="3">').val(5),h=$('<textarea rows="10" style="width: 100%" readonly />'),k=$('<select><option value="1. ">1. </option><option value="1) ">1) </option><option value="(1) ">(1) </option><option value=""></option></select>'),
g=$('<span class="click">').html("Download");c.append(SCRGEN_NSCR,d,"&nbsp;",SCRGEN_PRE).append(k,"<br>",e," | ",g,"<br>",h);var n="";return function(d){d&&(d.empty().append(c.width(p.width()/2)),k.unbind("change").change(kernel.blur),e.unbind("click").click(a),g.unbind("click").click(b))}}(),V=scrMgr.rndState;$(function(){kernel.regListener("scramble","time",k);kernel.regListener("scramble","property",k,/^scr(?:Size|Mono|Type|Lim|Align|Fast|KeyM|Hide|Neut|EqPr)$/);kernel.regListener("scramble","button",
k,/^scramble$/);kernel.regListener("scramble","ctrl",k,/^scramble$/);kernel.regListener("scramble","scrfix",k);kernel.regProp("scramble","scrSize",2,PROPERTY_SCRSIZE,[15,5,50],1);kernel.regProp("scramble","scrASize",0,PROPERTY_SCRASIZE,[!0],1);kernel.regProp("scramble","scrMono",0,PROPERTY_SCRMONO,[!0],1);kernel.regProp("scramble","scrLim",0,PROPERTY_SCRLIM,[!1],1);kernel.regProp("scramble","scrAlign",1,PROPERTY_SCRALIGN,["c",["c","l","r"],PROPERTY_SCRALIGN_STR.split("|")],1);kernel.regProp("scramble",
"preScr",1,"pre-scramble",["",";y;y2;y';z2;z2 y;z2 y2;z2 y';z';z' y;z' y2;z' y';z;z y;z y2;z y';x';x' y;x' y2;x' y';x;x y;x y2;x y'".split(";"),"(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],1);kernel.regProp("scramble","preScrT",1,"training pre-scramble",["z2",";y;y2;y';z2;z2 y;z2 y2;z2 y';z';z' y;z' y2;z' y';z;z y;z y2;z y';x';x' y;x' y2;x' y';x;x y;x y2;x y'".split(";"),
"(UF);(UR) y;(UB) y2;(UL) y';(DF) z2;(DL) z2 y;(DB) z2 y2;(DR) z2 y';(RF) z';(RD) z' y;(RB) z' y2;(RU) z' y';(LF) z;(LU) z y;(LB) z y2;(LD) z y';(BU) x';(BR) x' y;(BD) x' y2;(BL) x' y';(FD) x;(FR) x y;(FU) x y2;(FL) x y'".split(";")],1);kernel.regProp("scramble","scrNeut",1,PROPERTY_SCRNEUT,["n",["n","1","2","6"],PROPERTY_SCRNEUT_STR.split("|")],1);kernel.regProp("scramble","scrEqPr",0,PROPERTY_SCREQPR,[!1],1);kernel.regProp("scramble","scrFast",0,PROPERTY_SCRFAST,[!1]);kernel.regProp("scramble",
"scrKeyM",0,PROPERTY_SCRKEYM,[!1],1);kernel.regProp("scramble","scrClk",1,PROPERTY_SCRCLK,["c",["n","c","+"],PROPERTY_SCRCLK_STR.split("|")],1);kernel.regProp("scramble","scrType",-6,"Scramble Type",["333"],3);M.change(d);e.click(D);J.append($("<div>").append(SCRAMBLE_LENGTH+": ",M),K);m.append($("<nobr>").append(h[0]," ",h[1]," ",e)," <wbr>");m.append($("<nobr>").append(da,"/",ea,SCRAMBLE_SCRAMBLE));p.append(m,S.append(n).click(A));tools.regTool("scrgen",TOOLS_SCRGEN,R);S.click(function(){m.show();
kernel.blur();kernel.setProp("scrHide",!1)});kernel.regProp("ui","scrHide",-1,"Hide Scramble Selector",[!1]);kernel.addWindow("scramble",BUTTON_SCRAMBLE,p,!0,!0,3);q()});return{getTypeName:function(a){var b="";w(a,function(a,c){b=scrdata[a][0]+">"+scrdata[a][1][c][0]});return b},getTypeIdx:function(a){var b=1E300;w(a,function(a,c){b=100*a+c});return b},scrStd:b,pushScramble:function(a){Z||(I=P,Y=N,Q=v);Z=!1;N=a;n.html(b(P,N,v,!0));da.addClass("click").unbind("click").click(l);kernel.pushSignal("scrambleX",
b(P,N,v))},setCacheEnable:function(a){fa=a}}},[mathlib.rn,mathlib.rndEl]);(function(a,g,d){function l(b,c){var d=C[b];switch(d.length){case 1:return a(d[0],[""],c);case 2:return a(d[0],d[1],c);case 3:return a(d[0],d[1],d[2])}}function c(a,c){var k=f[a],l=k[1],q=k[2],x=0,r=0,u=[],p=[["R","R'"],["R'","R"],["L","L'"],["L'","L"],["F'","F"],["F","F'"],["B","B'"],["B'","B"]],m=["U","D"];k=k[0];for(var h=0;h<q.length;h++)u[h]=0;for(h=0;h<c;h++){for(var t=!1;!t;)for(var e="",J=0;J<q.length;J++){var K=g(4);u[J]+=K;0!=K&&(t=!0,e+=" "+q[J]+b[K-1])}t=g(8);J=g(2);K=g(3);k+=e+" "+p[t][0]+
" "+m[J]+b[K]+" "+p[t][1];0==J&&(x+=K+1);1==J&&(r+=K+1)}for(h=0;h<q.length;h++)K=4-u[h]%4,4>K&&(k+=" "+q[h]+b[K-1]);x=4-x%4;r=4-r%4;4>x&&(k+=" U"+b[x-1]);4>r&&(k+=" D"+b[r-1]);return k+=" "+d(l)}function A(a,b){var c=B[a].replace(/%l/g,b).replace(/%c/g,'["","2","\'"]');return scrMgr.formatScramble(c)}var b=["","2","'"],y=["","2","'","2'"],C={111:[[["x"],["y"],["z"]],b],2223:[[["U"],["R"],["F"]],b],2226:[[[["U","D"]],[["R","L"]],[["F","B"]]],b],"333o":[[["U","D"],["R","L"],["F","B"]],b],334:[[[["U",
"U'","U2"],["u","u'","u2"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],336:[[[["U","U'","U2"],["u","u'","u2"],["3u","3u2","3u'"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],888:[["U D u d 3u 3d 4u".split(" "),"R L r l 3r 3l 4r".split(" "),"F B f b 3f 3b 4f".split(" ")],b],999:[["U D u d 3u 3d 4u 4d".split(" "),"R L r l 3r 3l 4r 4l".split(" "),"F B f b 3f 3b 4f 4b".split(" ")],b],101010:[["U D u d 3u 3d 4u 4d 5u".split(" "),"R L r l 3r 3l 4r 4l 5r".split(" "),"F B f b 3f 3b 4f 4b 5f".split(" ")],b],111111:[["U D u d 3u 3d 4u 4d 5u 5d".split(" "),
"R L r l 3r 3l 4r 4l 5r 5l".split(" "),"F B f b 3f 3b 4f 4b 5f 5b".split(" ")],b],444:[[["U","D","u"],["R","L","r"],["F","B","f"]],b],"444m":[[["U","D","Uw"],["R","L","Rw"],["F","B","Fw"]],b],555:[[["U","D","u","d"],["R","L","r","l"],["F","B","f","b"]],b],"555wca":[[["U","D","Uw","Dw"],["R","L","Rw","Lw"],["F","B","Fw","Bw"]],b],"666p":[[["U","D","2U","2D","3U"],["R","L","2R","2L","3R"],["F","B","2F","2B","3F"]],b],"666wca":[[["U","D","Uw","Dw","3Uw"],["R","L","Rw","Lw","3Rw"],["F","B","Fw","Bw",
"3Fw"]],b],"666s":[[["U","D","U&sup2;","D&sup2;","U&sup3;"],["R","L","R&sup2;","L&sup2;","R&sup3;"],["F","B","F&sup2;","B&sup2;","F&sup3;"]],b],"666si":[[["U","D","u","d","3u"],["R","L","r","l","3r"],["F","B","f","b","3f"]],b],"777p":[["U D 2U 2D 3U 3D".split(" "),"R L 2R 2L 3R 3L".split(" "),"F B 2F 2B 3F 3B".split(" ")],b],"777wca":[["U D Uw Dw 3Uw 3Dw".split(" "),"R L Rw Lw 3Rw 3Lw".split(" "),"F B Fw Bw 3Fw 3Bw".split(" ")],b],"777s":[["U D U&sup2; D&sup2; U&sup3; D&sup3;".split(" "),"R L R&sup2; L&sup2; R&sup3; L&sup3;".split(" "),
"F B F&sup2; B&sup2; F&sup3; B&sup3;".split(" ")],b],"777si":[["U D u d 3u 3d".split(" "),"R L r l 3r 3l".split(" "),"F B f b 3f 3b".split(" ")],b],crz3a:[[["U","D"],["R","L"],["F","B"]],b],cm3:[[[["U<","U>","U2"],["E<","E>","E2"],["D<","D>","D2"]],[["R^","Rv","R2"],["M^","Mv","M2"],["L^","Lv","L2"]]]],cm2:[[[["U<","U>","U2"],["D<","D>","D2"]],[["R^","Rv","R2"],["L^","Lv","L2"]]]],233:[[[["U","U'","U2"]],["R2","L2"],["F2","B2"]]],fto:[[["U","D"],["F","B"],["L","BR"],["R","BL"]],["","'"]],gear:[[["U"],
["R"],["F"]]," 2 3 4 5 6 ' 2' 3' 4' 5'".split(" ")],sfl:[[["R","L"],["U","D"]],b],ufo:[[["A"],["B"],["C"],[["U","U'","U2'","U2","U3"]]]],roux:[[["U"],["M"]],b],RrU:[[["U"],["R","r"]],b],RrUu:[[["U","u"],["R","r"]],b],minx2g:[[["U"],["R"]],y],lsll:[[[["R U R'","R U2 R'","R U' R'"]],[["F' U F","F' U2 F","F' U' F"]],[["U","U2","U'"]]]],prco:[[["F","B"],["U","D"],["L","DBR"],["R","DBL"],["BL","DR"],["BR","DL"]],y],skb:[[["R"],["L"],["B"],["U"]],["","'"]],ivy:[[["R"],["L"],["D"],["B"]],["","'"]],112:[[["R"],
["R"]],b],eide:[[["OMG"],["WOW"],["WTF"],["WOO-HOO WOO-HOO MATYAS YES YES YAY YEEEEEEEEEEEES".split(" ")],["HAHA"],["XD"],[":D"],["LOL"]],["","","","!!!"]]},B={sia113:'#{[["U","u"],["R","r"]],%c,%l} z2 #{[["U","u"],["R","r"]],%c,%l}',sia123:'#{[["U"],["R","r"]],%c,%l} z2 #{[["U"],["R","r"]],%c,%l}',sia222:'#{[["U"],["R"],["F"]],%c,%l} z2 y #{[["U"],["R"],["F"]],%c,%l}',335:'#{[[["U","U\'","U2"],["D","D\'","D2"]],["R2","L2"],["F2","B2"]],0,%l} / ${333}',337:'#{[[["U","U\'","U2","u","u\'","u2","U u","U u\'","U u2","U\' u","U\' u\'","U\' u2","U2 u","U2 u\'","U2 u2"],["D","D\'","D2","d","d\'","d2","D d","D d\'","D d2","D\' d","D\' d\'","D\' d2","D2 d","D2 d\'","D2 d2"]],["R2","L2"],["F2","B2"]],0,%l} / ${333}',
r234:"2) ${222so}\\n3) ${333}\\n4) ${[444,40]}",r2345:'${r234}\\n5) ${["555",60]}',r23456:'${r2345}\\n6) ${["666p",80]}',r234567:'${r23456}\\n7) ${["777p",100]}',r234w:'2) ${222so}\\n3) ${333}\\n4) ${["444m",40]}',r2345w:'${r234w}\\n5) ${["555wca",60]}',r23456w:'${r2345w}\\n6) ${["666wca",80]}',r234567w:'${r23456w}\\n7) ${["777wca",100]}',rmngf:'${r2345w}\\n3oh) ${333}\\npyr) ${["pyrso",10]}\\n skb) ${skbso}\\nsq1) ${sqrs}\\nclk) ${clkwca}\\nmgm) ${["mgmp",70]}',"333ni":'${333}#{[[""]],["","Rw ","Rw2 ","Rw\' ","Fw ","Fw\' "],1}#{[[""]],["","Uw","Uw2","Uw\'"],1}',
"444bld":'${444wca}#{[[""]],[""," x"," x2"," x\'"," z"," z\'"],1}#{[[""]],[""," y"," y2"," y\'"],1}',"555bld":'${["555wca",%l]}#{[[""]],[""," 3Rw"," 3Rw2"," 3Rw\'"," 3Fw"," 3Fw\'"],1}#{[[""]],[""," 3Uw"," 3Uw2"," 3Uw\'"],1}'},f={"5edge":["r R b B",["B' b' R' r'","B' b' R' U2 r U2 r U2 r U2 r"],["u","d"]],"6edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","d"]],"7edge":["3r r 3b b",["3b' b' 3r' r'",
"3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","3d","d"]]},q;for(q in C)scrMgr.reg(q,l);for(q in B)scrMgr.reg(q,A);for(q in f)scrMgr.reg(q,c);scrMgr.reg("cubennn",function(c,d){if(1>=d)return"N/A";for(var f=[[],[],[]],g=0;g<d-1;g++)0==g%2?(f[0].push((4>g?"":~~(g/2+1))+(2>g?"U":"u")),f[1].push((4>g?"":~~(g/2+1))+(2>g?"R":"r")),f[2].push((4>g?"":~~(g/2+1))+(2>g?"F":"f"))):(f[0].push((4>g?"":~~(g/2+1))+(2>g?"D":"d")),f[1].push((4>
g?"":~~(g/2+1))+(2>g?"L":"l")),f[2].push((4>g?"":~~(g/2+1))+(2>g?"B":"b")));return a(f,b,10*d)})})(scrMgr.mega,mathlib.rn,mathlib.rndEl);var scramble_333=function(a,g,d,l,c){function A(a){a.cp=[0,1,2,3,4,5,6,7];a.co=[0,0,0,0,0,0,0,0];a.ep=[0,1,2,3,4,5,6,7,8,9,10,11];a.eo=[0,0,0,0,0,0,0,0,0,0,0,0]}function b(a,b,c){var e;for(e=0;8>e;++e){c.cp[e]=a.cp[b.cp[e]];var d=a.co[b.cp[e]];var f=b.co[e];var h=d;h+=3>d?f:6-f;h%=3;3<=d!==3<=f&&(h+=3);c.co[e]=h}}function y(){A(this)}function C(a,b,c,e){A(this);g(this.cp,a,8);a=b;var d=0;for(b=6;0<=b;--b)d+=this.co[b]=a%3,a=~~(a/3);this.co[7]=(15-d)%3;g(this.ep,c,12);c=e;a=0;for(e=10;0<=e;--e)a^=
this.eo[e]=c&1,c>>=1;this.eo[11]=a}function B(a,b,c){var e;for(e=0;12>e;++e)c.ep[e]=a.ep[b.ep[e]],c.eo[e]=b.eo[e]^a.eo[b.ep[e]]}function f(){f=$.noop;var a,c;v[0]=new C(15120,0,119750400,0);v[3]=new C(21021,1494,323403417,0);v[6]=new C(8064,1236,29441808,550);v[9]=new C(9,0,5880,0);v[12]=new C(1230,412,2949660,0);v[15]=new C(224,137,328552,137);for(a=0;18>a;a+=3)for(c=0;2>c;++c)v[a+c+1]=new y,B(v[a+c],v[a],v[a+c+1]),b(v[a+c],v[a],v[a+c+1])}function q(a,b,c){var e,d,f;var h=[];for(d=0;54>d;d++)h[d]=
a[d];for(e=0;8>e;++e){d=b.cp[e];var g=b.co[e];for(f=0;3>f;++f)h[I[e][(f+g)%3]]=a[I[d][f]]}for(e=0;12>e;++e)for(d=b.ep[e],g=b.eo[e],f=0;2>f;++f)h[Y[e][(f+g)%2]]=a[Y[d][f]];a=[];for(d=0;d<c.length;d++)a[d]=h[c[d]];return a}function r(){return x(0xffffffffffff,0xffffffffffff,4294967295,4294967295)}function D(a){for(var b=0,c=0;c<a.length;c++)-1==a[c]&&b++;return b}function k(a,b,c){for(var e=0,d=0,f=0;f<a.length;f++)-1!=a[f]&&(e+=a[f]);e%=c;for(f=0;f<a.length-1;f++)-1==a[f]&&(1==b--?a[f]=((c<<4)-e)%
c:(a[f]=l(c),e+=a[f])),d*=c,d+=a[f];return d}function w(b,c,e){for(var f=[0,1,2,3,4,5,6,7,8,9,10,11],h=0;h<b.length;h++)-1!=b[h]&&(f[b[h]]=-1);for(var g=h=0;h<f.length;h++)-1!=f[h]&&(f[g++]=f[h]);var k;for(h=0;h<b.length&&0<c;h++)if(-1==b[h]){g=l(c);for(b[h]=f[g];11>g;g++)f[g]=f[g+1];2==c--&&(k=h)}d(a(b,b.length),b.length)==1-e&&(c=b[h-1],b[h-1]=b[k],b[k]=c);return a(b,b.length)}function E(a,b){if("number"!==typeof a)return a;for(var c=[],e=0;e<b;e++){var d=a&15;c[e]=15==d?-1:d;a/=16}return c}function x(e,
h,g,n,m,p,t,l,L){f();p=p||da;t=t||da;e=E(e,12);h=E(h,12);g=E(g,8);n=E(n,8);var J="";do{var K=h.slice(),H=e.slice(),I=n.slice(),z=g.slice();K=k(K,D(K),2);I=k(I,D(I),3);var u=D(H),Q=D(z);1==u&&(w(H,u,-1),u=0);1==Q&&(w(z,Q,-1),Q=0);0==u&&0==Q?(H=a(H,12),z=a(z,8)):0!=u&&0==Q?(z=a(z,8),H=w(H,u,d(z,8))):(H=0==u&&0!=Q?a(H,12):w(H,u,-1),z=w(z,Q,d(H,12)));if(0!=z+I+H+K){J=new C(z,I,H,K);H=new y;z=c(t);K=c(p);for(I=0;I<z.length;I++)b(v[z[I]],J,H),B(v[z[I]],J,H),u=H,H=J,J=u;for(I=0;I<K.length;I++)b(J,v[K[I]],
H),B(J,v[K[I]],H),u=H,H=J,J=u;H=[];for(z=0;54>z;z++)H[z]=z;H=q(mathlib.SOLVED_FACELET,J,H).join("");m&&(J=new mathlib.CubieCube,J.fromFacelet(H),J.ori=mathlib.rn([1,4,8,1,1,1,24][m]),J.selfConj(),J.ori=0,H=J.toFaceCube());J=(new min2phase.Search).solution(H,21,1E9,50,2,L,l)}}while(3>=J.length);return J.replace(/ +/g," ")}function G(){return x(0xffffffffffff,0xffffffffffff,1985229328,0)}function u(){return x(0xba9876543210,0,4294967295,4294967295)}function p(a,b,c,e){return x(0xba987654ffff,65535,
1985282047,65535,e)}function m(a,b,c,e){a=ea[scrMgr.fixCase(c,fa)][0];b=Math.pow(16,a&15);c=Math.pow(16,a>>8&15);return x(0xba9f7654ffff-7*b,64424574975-(15^a>>4&1)*b,1986002943-11*c,1048575-(15^a>>12&3)*c,e,U)}function h(a,b,c,e,d){var f=b[scrMgr.fixCase(e,c)][0];b=[[5,10],[7,19],[3,-1],[1,-1],null,null,null,null,[23,12]][f&15];c=f>>4&1;e=[[8,20,9],[6,-1,18],[0,-1,-1],[2,11,-1],[-1,15,26]][f>>8&15];f=f>>12&3;a=a.split("");for(var h=0;3>h;h++)2>h&&0<=b[h]&&(a[b[h]]="BR".charAt(c^h)),0<=e[h]&&(a[e[h]]=
"URB".charAt((f+3+h)%3));image.face3Image(a.join(""),d)}function t(a,b,c,e){return x(0xffff7654ffff,0xffff0000ffff,4294967295,4294967295,e)}function e(a,b,c,e){a=Ba[scrMgr.fixCase(c,va)];return x(a[2]+0xba9876540000,0,a[0]+1985216512,a[1],e,U,U)}function J(a,b){var c=Ba[a][3];if(!b)return[c,null,Ca[a]];image.llImage.drawImage(c,null,b)}function K(a,b,c,e){a=ua[scrMgr.fixCase(c,ka)];return x(0xba987654ffff,0,a[0]+1985216512,a[1],e,U,U)}function L(a,b,c){a=ua[scrMgr.fixCase(c,ka)];b=l(4);c=[];for(var e=
0;e<U.length;e++)c.push(U[e].concat(X[b]));return x(0xba98f6f4ffff,4042326015,a[0]+1985216512,a[1],0,c,U)+Z[b]}function O(a,b,c){a=ua[b][2].replace(/e/g,a||"U");if(!c)return[a,null,qa[b]];image.llImage.drawImage(a,null,c)}function M(a,b,c,e){return x(0xba9876543f1f,0,1985282047,65535,e,U)}function n(a,b,c,e){a=ta[scrMgr.fixCase(c,Fa)];return x(0xba9876540000+a[1],0,1984954368+a[0],0,e,U,U)}function S(){var a=l(4);return x(0xba98f6f4ffff,4042326015,1985229328,0,0,[X[a]],U)+Z[a]}function H(a,b,c,e){a=
ua[scrMgr.fixCase(c,ka)];return x(0xba987654ffff,65535,a[0]+1985216512,a[1],e,U,U)}function z(a,b,c,e){return x(0xba987654ffff,65535,1985229328,0,e)}function T(a,b){var c=Ha[a].slice(1);2==c.length&&(c=c.concat([[c[0][1],c[0][0]],[c[1][1],c[1][0]]]));c=["DDDDDDDDD"+Ha[a][0],c];if(!b)return c.concat([Ga[a]]);image.llImage.drawImage(c[0],c[1],b)}function P(a,b){for(var c="",e=oa[a][4],d=0;21>d;d++)4==d?c+="D":(c+=e&1?"D":"G",e>>=1);if(!b)return[c,null,Wa[a]];image.llImage.drawImage(c,null,b)}function N(a){var b=
a.join("|");if(!Ia[b]){for(var c=[],e=0;e<a.length;e++){for(var d=[],f=0;54>f;f++)d[f]=f+32;var h=gsolver.rubiksCube.move(String.fromCharCode.apply(null,d),a[e]);for(f=0;54>f;f++)d[f]=h.charCodeAt(f)-32;c.push(d)}Ia[b]=new grouplib.SchreierSims(c)}do{a=Ia[b].rndElem();for(f=0;f<a.length;f++)a[f]="URFDLB".charAt(~~(a[f]/9));f=Q.solution(a.join(""),21,1E9,50,2)}while(3>=f.length);return f.replace(/ +/g," ")}C.prototype=y.prototype;for(var v=[],I=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,
44,24],[33,53,42],[35,17,51]],Y=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]],Q=new min2phase.Search,U=[[],[0],[1],[2]],X=[[],[3,14],[4,13],[5,12]],Z=["","x'","x2","x"],da=[[]],ea=[[8192,4,"Easy-01"],[4113,4,"Easy-02"],[8210,4,"Easy-03"],[4099,4,"Easy-04"],[8195,4,"RE-05"],[4114,4,"RE-06"],[8194,4,"RE-07"],[4115,4,"RE-08"],[8211,4,"REFC-09"],[4098,4,"REFC-10"],[8208,4,"REFC-11"],[4097,4,"REFC-12"],[8209,4,"REFC-13"],[4096,4,"REFC-14"],[8193,4,"SPGO-15"],
[4112,4,"SPGO-16"],[0,4,"SPGO-17"],[17,4,"SPGO-18"],[3,4,"PMS-19"],[18,4,"PMS-20"],[2,4,"PMS-21"],[19,4,"PMS-22"],[1,4,"Weird-23"],[16,4,"Weird-24"],[1024,4,"CPEU-25"],[1041,4,"CPEU-26"],[5120,4,"CPEU-27"],[9233,4,"CPEU-28"],[5137,4,"CPEU-29"],[9216,4,"CPEU-30"],[24,4,"EPCU-31"],[8,4,"EPCU-32"],[8200,4,"EPCU-33"],[4104,4,"EPCU-34"],[8216,4,"EPCU-35"],[4120,4,"EPCU-36"],[1048,1,"ECP-37"],[5128,1,"ECP-38"],[9224,1,"ECP-39"],[5144,1,"ECP-40"],[9240,1,"ECP-41"],[1032,1,"Solved-42"]],fa=mathlib.idxArray(ea,
1),ja=mathlib.idxArray(ea,2),na=[],ia=[],W=[],R=0;R<ea.length;R++)ea[R][0]&240||(na.push(ea[R]),ia.push(fa[R]),W.push(ja[R]));var V=[],ha=[];for(R=0;27>R;R++)V[R]=~~(R/9)<<12|~~(R/3)%3<<8|R%3,ha[R]=1;var pa=[],aa=[],Da=[];for(R=0;216>R;R++){var ba=R%27,ma=~~(R/27);pa[R]=[~~(ba/9)%3<<12|~~(ba/3)%3<<8|ba%3,(ma>>2&1)<<12|(ma>>1&1)<<8|ma&1];aa[R]=1;Da[R]="WVLS;UB;UF;UF UB;UL;UB UL;UF UL;No Edge".split(";")[ma]+"-"+(ba+1)}var Ba=function(){for(var a=[],b=[],c=new y,e=0;15552>e;e++)if(!(a[e>>5]>>(e&31)&
1)){var d=e%24,f=~~(e/24)%24,h=~~(e/24/24);if(mathlib.getNParity(f,4)==mathlib.getNParity(d,4)){h=mathlib.setNOri(c.co,h,4,-3);f=mathlib.setNPerm(c.cp,f,4,0);var g=mathlib.setNPerm(c.ep,d,4,0);d=[0,0,0,null,0,null];for(var k=0;4>k;k++)d[0]+=f[k]<<4*k,d[1]+=h[k]<<4*k,d[2]+=g[k]<<4*k;for(var n=0;16>n;n++){var m=n>>2,p=n&3,t=[],l=[],J=[];for(k=0;4>k;k++)t[k+m&3]=h[k],l[k+m&3]=f[k]+p&3,J[k+m&3]=g[k]+p&3;k=mathlib.getNOri(t,4,-3);l=mathlib.getNPerm(l,4,0);J=mathlib.getNPerm(J,4,0);k=24*(24*k+l)+J;a[k>>
5]>>(k&31)&1||(a[k>>5]|=1<<(k&31),d[4]++)}d[3]=q("DDDDDDDDDLLLLLLLLLFFFFFFFFFUUUUUUUUURRRRRRRRRBBBBBBBBB",c,[0,1,2,3,4,5,6,7,8,18,19,20,9,10,11,45,46,47,36,37,38]);0<e&&b.push(d)}}a={0:"O",18:"U",33:"T",258:"L",273:"aS",546:"S",4386:"Pi",4626:"H"};c={};for(k=0;k<b.length;k++)d=b[k],e=a[d[1]],c[e]=c[e]||[],h=c[e],f=h.indexOf(d[0]),-1==f?(f=h.length,h.push(d[0],1)):h[f+1]++,d[5]=e+((f>>1)+1)+"-"+c[e][f+1];return b}(),va=mathlib.idxArray(Ba,4),Ca=mathlib.idxArray(Ba,5),ua=[[12816,8481,"FeFeeeBeBLGRDGDRGLDGD",
2,"H-1"],[8961,4626,"ReLeeeReLBGBDGDFGFDGD",2,"H-2"],[4611,4626,"ReBeeeLeBFGRDGDLGFDGD",4,"H-3"],[8211,4626,"LeReeeFeFRGLDGDBGBDGD",4,"H-4"],[12321,4128,"DeLeeeReDBGRFGBDGFLGD",4,"L-1"],[4611,513,"DeReeeLeDFGBRGFDGLBGD",4,"L-2"],[8961,258,"DeBeeeLeDFGRFGRDGLBGD",4,"L-3"],[12816,4128,"DeLeeeFeDRGFLGBDGBRGD",4,"L-4"],[12546,4128,"DeLeeeLeDFGBRGBDGRFGD",4,"L-5"],[8211,513,"DeReeeReDBGLBGFDGFLGD",4,"L-6"],[12816,4386,"LeFeeeReFBGDRGLDGBDGD",4,"Pi-1"],[8961,8466,"FeLeeeFeRRGDBGBDGLDGD",4,"Pi-2"],[4611,
4641,"ReLeeeReLBGDFGBDGFDGD",4,"Pi-3"],[12546,4386,"BeFeeeFeBRGDLGLDGRDGD",4,"Pi-4"],[8211,4641,"BeLeeeLeFFGDRGBDGRDGD",4,"Pi-5"],[12321,4386,"BeReeeLeBFGDLGFDGRDGD",4,"Pi-6"],[12816,8736,"ReBeeeFeDRGFLGDLGDBGD",4,"S-1"],[8961,546,"BeReeeLeDFGRFGDBGDLGD",4,"S-2"],[12321,8736,"BeReeeFeDRGFLGDBGDLGD",4,"S-3"],[8211,8706,"ReBeeeLeDFGRFGDLGDBGD",4,"S-4"],[12546,8736,"FeBeeeLeDFGBRGDLGDRGD",4,"S-5"],[4611,8706,"LeReeeFeDRGLBGDBGDFGD",4,"S-6"],[4611,4098,"BeLeeeDeDBGRFGDFGRDGL",4,"T-1"],[12546,8448,"ReBeeeDeDLGBRGDLGFDGF",
4,"T-2"],[8961,528,"BeFeeeDeDBGFLGDRGRDGL",4,"T-3"],[12816,8448,"FeFeeeDeDBGBRGDRGLDGL",4,"T-4"],[8211,4098,"BeBeeeDeDLGRFGDLGRDGF",4,"T-5"],[12321,8448,"FeBeeeDeDRGRFGDLGLDGB",4,"T-6"],[8961,288,"LeLeeeDeDFGBRGBDGDFGR",4,"U-1"],[12816,4608,"LeReeeDeDBGBRGFDGDFGL",4,"U-2"],[12321,4608,"FeFeeeDeDBGBRGLDGDRGL",4,"U-3"],[8211,8193,"BeFeeeDeDFGBRGLDGDLGR",4,"U-4"],[4611,8193,"ReFeeeDeDBGRFGLDGDBGL",4,"U-5"],[12546,4608,"LeBeeeDeDBGRFGRDGDFGL",4,"U-6"],[12816,4353,"LeFeeeDeRRGFDGLDGBDGB",4,"aS-1"],[8961,
4368,"ReFeeeDeLRGBDGLDGFDGB",4,"aS-2"],[12321,4353,"LeBeeeDeFFGLDGRDGBDGR",4,"aS-3"],[8211,4113,"LeFeeeDeBFGRDGLDGBDGR",4,"aS-4"],[4611,4113,"FeBeeeDeLFGBDGRDGLDGR",4,"aS-5"],[12546,4353,"FeBeeeDeRBGFDGRDGLDGL",4,"aS-6"],[12321,0,"DeDeeeDeDBGRFGBRGFLGL",4,"O-Adj"],[8961,0,"DeDeeeDeDBGFLGRFGBRGL",1,"O-Diag"],[12816,0,"DeDeeeDeDBGBRGRFGFLGL",1,"O-AUF"]],ka=mathlib.idxArray(ua,3),qa=mathlib.idxArray(ua,4),ta=[[205840,12816,"FBar-1"],[205840,12546,"FBar-2"],[205840,12321,"FBar-3"],[205840,8961,"FBar-4"],
[205840,8496,"FBar-5"],[205840,8211,"FBar-6"],[205840,4896,"FBar-7"],[205840,4611,"FBar-8"],[205840,4146,"FBar-9"],[205840,786,"FBar-10"],[205840,561,"FBar-11"],[205840,291,"FBar-12"],[205825,12801,"2Opp-1"],[205825,12576,"2Opp-2"],[205825,12306,"2Opp-3"],[205825,8976,"2Opp-4"],[205825,8451,"2Opp-5"],[205825,8241,"2Opp-6"],[205825,4866,"2Opp-7"],[205825,4656,"2Opp-8"],[205825,4131,"2Opp-9"],[205825,801,"2Opp-10"],[205825,531,"2Opp-11"],[205825,306,"2Opp-12"],[201760,12801,"ROpp-1"],[201760,12576,
"ROpp-2"],[201760,12306,"ROpp-3"],[201760,8976,"ROpp-4"],[201760,8451,"ROpp-5"],[201760,8241,"ROpp-6"],[201760,4866,"ROpp-7"],[201760,4656,"ROpp-8"],[201760,4131,"ROpp-9"],[201760,801,"ROpp-10"],[201760,531,"ROpp-11"],[201760,306,"ROpp-12"],[201730,12816,"RBar-1"],[201730,12546,"RBar-2"],[201730,12321,"RBar-3"],[201730,8961,"RBar-4"],[201730,8496,"RBar-5"],[201730,8211,"RBar-6"],[201730,4896,"RBar-7"],[201730,4611,"RBar-8"],[201730,4146,"RBar-9"],[201730,786,"RBar-10"],[201730,561,"RBar-11"],[201730,
291,"RBar-12"],[197665,12816,"2Bar-1"],[197665,12546,"2Bar-2"],[197665,12321,"2Bar-3"],[197665,8961,"2Bar-4"],[197665,8496,"2Bar-5"],[197665,8211,"2Bar-6"],[197665,4896,"2Bar-7"],[197665,4611,"2Bar-8"],[197665,4146,"2Bar-9"],[197665,786,"2Bar-10"],[197665,561,"2Bar-11"],[197665,291,"2Bar-12"],[197650,12801,"FOpp-1"],[197650,12576,"FOpp-2"],[197650,12306,"FOpp-3"],[197650,8976,"FOpp-4"],[197650,8451,"FOpp-5"],[197650,8241,"FOpp-6"],[197650,4866,"FOpp-7"],[197650,4656,"FOpp-8"],[197650,4131,"FOpp-9"],
[197650,801,"FOpp-10"],[197650,531,"FOpp-11"],[197650,306,"FOpp-12"]],Fa=[],la=[];for(R=0;R<ta.length;R++)Fa[R]=1,la[R]=ta[R][2];var sa=[[4146,12816,1,"H"],[12546,12816,4,"Ua"],[12321,12816,4,"Ub"],[8961,12816,2,"Z"],[12816,12321,4,"Aa"],[12816,12546,4,"Ab"],[12816,8961,2,"E"],[12306,12801,4,"F"],[8496,12321,4,"Ga"],[4896,12546,4,"Gb"],[12321,12546,4,"Gc"],[12546,12321,4,"Gd"],[12801,12801,4,"Ja"],[12576,12801,4,"Jb"],[4656,12306,1,"Na"],[12306,12306,1,"Nb"],[531,12801,4,"Ra"],[8976,12801,4,"Rb"],
[4656,12801,4,"T"],[12576,12306,4,"V"],[12801,12306,4,"Y"]],xa=mathlib.idxArray(sa,2),Ga=mathlib.idxArray(sa,3),Ha=[["BFBRLRFBFLRL",[1,7],[3,5]],["BRBRLRFFFLBL",[3,7],[7,5],[5,3]],["BLBRBRFFFLRL",[3,5],[5,7],[7,3]],["LFLBRBRBRFLF",[1,5],[3,7]],["LBBRRLBFRFLF",[0,2],[2,6],[6,0]],["RBFLRRFFLBLB",[0,6],[6,8],[8,0]],["LBRFRBRFLBLF",[0,6],[2,8]],["BFRFRBRBFLLL",[1,7],[2,8]],["BRRFLBRBFLFL"],["BFRFBBRLFLRL"],["BFRFLBRRFLBL"],["BLRFFBRBFLRL"],["BBRFFBRRFLLL",[1,5],[2,8]],["LBBRLLBRRFFF",[2,8],[5,7]],["FBBRLLBFFLRR",
[2,6],[3,5]],["BBFLLRFFBRRL",[0,8],[3,5]],["LLBRBLBFRFRF",[1,3],[2,8]],["RBFLFRFLLBRB",[2,8],[3,7]],["BBRFLBRFFLRL",[2,8],[3,5]],["BBFLFRFRBRLL",[0,8],[1,5]],["BBFLRRFLBRFL",[0,8],[1,3]]],oa=[[0,0,1,"PLL",255],[4369,4626,2,"Point-1",965120],[4369,4386,4,"Point-2",907776],[4369,546,4,"Point-3",374304],[4369,273,4,"Point-4",447360],[17,8226,4,"Square-5",538123],[17,4113,4,"Square-6",396054],[17,8706,4,"SLBS-7",79402],[17,273,4,"SLBS-8",410514],[17,4368,4,"Fish-9",152458],[17,8736,4,"Fish-10",627788],
[17,546,4,"SLBS-11",595470],[17,4353,4,"SLBS-12",281363],[257,8226,4,"Knight-13",108088],[257,273,4,"Knight-14",181144],[257,546,4,"Knight-15",566809],[257,4113,4,"Knight-16",166684],[4369,258,4,"Point-17",308097],[4369,18,4,"Point-18",300805],[4369,33,4,"Point-19",825861],[4369,0,1,"CO-20",299685],[0,4626,2,"OCLL-21",83290],[0,4386,4,"OCLL-22",672858],[0,18,4,"OCLL-23",82170],[0,33,4,"OCLL-24",66014],[0,258,4,"OCLL-25",132222],[0,273,4,"OCLL-26",133470],[0,546,4,"OCLL-27",74874],[17,0,4,"CO-28",
4783],[17,528,4,"Awkward-29",70542],[17,8448,4,"Awkward-30",144042],[17,33,4,"P-31",328598],[17,4098,4,"P-32",22059],[257,33,4,"T-33",99228],[257,528,4,"C-34",172728],[17,4128,4,"Fish-35",303569],[17,258,4,"W-36",803475],[17,8208,4,"Fish-37",13195],[17,513,4,"W-38",72238],[257,4128,4,"BLBS-39",100924],[257,258,4,"BLBS-40",574105],[17,4608,4,"Awkward-41",86698],[17,288,4,"Awkward-42",38221],[17,18,4,"P-43",918166],[17,8193,4,"P-44",14891],[257,18,4,"T-45",688796],[257,288,4,"C-46",276579],[17,4641,
4,"L-47",338706],[17,4386,4,"L-48",677386],[17,8466,4,"L-49",935442],[17,8721,4,"L-50",967760],[257,4641,4,"I-51",109336],[257,4386,4,"I-52",342338],[17,8481,4,"L-53",345874],[17,4626,4,"L-54",87818],[257,8481,2,"I-55",116504],[257,4626,2,"I-56",698904],[257,0,2,"CO-57",33469]],Ma=mathlib.idxArray(oa,2),Wa=mathlib.idxArray(oa,3),Xa=[[],[9],[10],[11]],Ya=["","y","y2","y'"];ba="UR UF UL UB DR DF DL DB RF LF LB RB URF UFL ULB UBR DFR DLF DBL DRB".split(" ");for(R=0;20>R;R++)ma=ba[R],ba[R+20]=(2==ma.length?
"OriE-":"OriC-")+ma,ba[R]=(2==ma.length?"PermE-":"PermC-")+ma;R=mathlib.valuedArray(40,0);var Ia={};scrMgr.reg("333",r)("333fm",function(){return"R' U' F "+x(0xffffffffffff,0xffffffffffff,4294967295,4294967295,0,void 0,void 0,2,1)+"R' U' F"})("edges",G)("corners",u)("333custom",function(a,b,c,e){var d=b=a=0,f=0,h=4352;c=c||mathlib.valuedArray(40,1);for(var g=0;12>g;g++)h+=(c[g]?69632:0)+(c[g+20]?16:0),a+=(c[g]?15:g)*Math.pow(16,g),b+=(c[g+20]?15:0)*Math.pow(16,g);for(g=0;8>g;g++)h+=(c[g+12]?65792:
0)+(c[g+32]?1:0),d+=(c[g+12]?15:g)*Math.pow(16,g),f+=(c[g+32]?15:0)*Math.pow(16,g);return 0==(h&1887470)?"U' U ":x(a,b,d,f,e)},[ba,R])("ll",p)("lsll2",m,[ja,fa,h.bind(null,"GGGGDGGGGGGGGRRGRRGGGBBGBBG",ea,fa)])("f2l",t)("zbll",e,[Ca,va,J])("zzll",M)("zbls",m,[ja,fa,h.bind(null,"GGGGDGGGGGGGGRRGRRGGGBBGBBG",ea,fa)])("ttll",n,[la,Fa,function(a,b){for(var c=[],e=ta[a],d=3;0<=d;d--)c.push(["FR","LF","BL","RB","GG"][e[0]>>4*d&15]),c.push("RFLB".charAt(e[1]>>4*d&15));c=c.join("");c=c.slice(7)+c.slice(0,
7);c=["GDDDDDDDD"+c,null];if(!b)return c.concat([la[a]]);image.llImage.drawImage(c[0],c[1],b)}])("eols",function(a,b,c,e){a=na[scrMgr.fixCase(c,ia)];b=Math.pow(16,a>>8&15);return x(0xba9f7654ffff-7*Math.pow(16,a&15),0,1986002943-11*b,1048575-(15^a>>12&3)*b,e,U)},[W,ia,h.bind(null,"GDGDDDGDGGGGGRRGRRGGGBBDBBG",na,ia)])("wvls",function(a,b,c,e){a=V[scrMgr.fixCase(c,ha)];return x(0xba9f7654ff8f,0,1986002767,983072|a,e)},["Oriented Rectangle-1 Rectangle-2 Tank-1 Bowtie-1 Bowtie-3 Tank-2 Bowtie-2 Bowtie-4 Snake-1 Adjacent-1 Adjacent-2 Gun-Far Sune-1 Pi-Near Gun-Back Pi-Front H-Side Snake-2 Adjacent-3 Adjacent-4 Gun-Sides H-Front Pi-Back Gun-Near Pi-Far Sune-2".split(" "),
ha,function(a,b){var c=V[scrMgr.fixCase(a,ha)],e=["DGG","GDG","GGD"];e=e[c&3]+e[c>>8&3]+e[c>>12&3];image.llImage.drawImage("3D6DDDBB0RR21G87G54GU".replace(/[0-9]/g,function(a){return e[~~a]}),null,b)}])("vls",function(a,b,c,e){a=pa[scrMgr.fixCase(c,aa)];return x(0xba9f7654ff8f,64424509440+a[1],1986002767,983072+a[0],e,[[2]])},[Da,aa,function(a,b){var c=pa[scrMgr.fixCase(a,aa)],e=["DGG","GDG","GGD"];e=e[c[0]&3]+e[c[0]>>8&3]+e[c[0]>>12&3];var d=["DG","GD"];d=d[c[1]&3]+d[c[1]>>8&3]+d[c[1]>>12&3];image.llImage.drawImage("6a0eDR3cR4dUFF21b87f5".replace(/[0-9]/g,
function(a){return e[~~a]}).replace(/[a-z]/g,function(a){return d[a.charCodeAt(0)-97]}),null,b)}])("lse",S)("cmll",L,[qa,ka,O.bind(null,"G")])("cll",H,[qa,ka,O.bind(null,"G")])("coll",K,[qa,ka,O.bind(null,"D")])("ell",z)("pll",function(a,b,c,e){a=sa[scrMgr.fixCase(c,xa)];return x(a[0]+0xba9876540000,0,a[1]+1985216512,0,e,U,U)},[Ga,xa,T])("oll",function(a,b,c,e){a=oa[scrMgr.fixCase(c,Ma)];return x(0xba987654ffff,a[0],1985282047,a[1],e,U,U)},[Wa,Ma,P])("2gll",function(a,b,c,e){return x(0xba987654ffff,
0,1985229328,65535,e,U)})("sbrx",function(a,b,c){a=l(4);return x(0xfa9ff6ffffff,0xf00ff0ffffff,4133486591,4027580415,0,[X[a]])+Z[a]})("half",N.bind(null,"U2 R2 F2 D2 L2 B2".split(" ")))("333drud",N.bind(null,"U ;R2;F2;D ;L2;B2".split(";")))("3gen_F",N.bind(null,["U ","R ","F "]))("3gen_L",N.bind(null,["U ","R ","L "]))("2gen",N.bind(null,["U ","R "]))("2genl",N.bind(null,["U ","L "]))("mt3qb",function(){var a=mathlib.rn(4);return x(0xffff765fffff,0xffff000fffff,4133486591,4027580415,0,[Xa[a]])+Ya[a]})("mteole",
function(){var a=mathlib.rn(4),b=mathlib.rn(4);return x(0xba98765fffff+4294967296*(17767&15<<4*a),1048575+4294967296*(15<<4*a),4133486591,4027580415,0,[Xa[b]])+Ya[b]})("mttdr",function(){return x(0xba98765fffff,0,4133486591,4027580415)})("mt6cp",function(){return x(0xba98765fffff,0,4133486591,0)})("mtl5ep",function(){return x(0xba98765fffff,0,1985229328,0)})("mtcdrll",function(){return x(0xba98765fffff,0,1985282047,65535)})("easyc",function(a,b,c,e){a=cross.getEasyCross(b);return x(a[0],a[1],4294967295,
4294967295,e)})("easyxc",function(a,b,c,e){a=cross.getEasyXCross(b);return x(a[0],a[1],a[2],a[3],e)})("eoline",function(a,b,c,e){return x(0xffff7f5fffff,0,4294967295,4294967295,e)});return{getRandomScramble:r,getEdgeScramble:G,getCornerScramble:u,getLLScramble:p,getLSLLScramble:m,getCOLLScramble:K,getZBLLScramble:e,getZZLLScramble:M,getTTLLScramble:n,getF2LScramble:t,getLSEScramble:S,getCMLLScramble:L,getCLLScramble:H,getELLScramble:z,getAnyScramble:x,getPLLImage:T,getOLLImage:P,getCOLLImage:O,getZBLLImage:J,
genFacelet:function(a){return Q.solution(a,21,1E9,50,2)},solvFacelet:function(a){return Q.solution(a,21,1E9,50,0)}}}(mathlib.getNPerm,mathlib.setNPerm,mathlib.getNParity,mathlib.rn,mathlib.rndEl);var scramble_444=function(a,g){function d(a,b){var c;var e=Array(a);if(void 0!=b)for(c=0;c<a;c++)e[c]=Array(b);return e}function l(){ca=arguments[0].prototype;for(var a=1;a<arguments.length;++a)arguments[a].prototype=ca}function c(){}function A(){A=c;eb=d(15582,36);Za=d(15582);za=d(15582);Ra=d(48,48);Aa=d(48,36);Qa=d(48);mb=d(48)}function b(a,b){for(var c=0;24>c;++c)if(a.ct[c]!=b.ct[c])return!1;return!0}function y(b){var c;var e=0;var d=8;for(c=23;0<=c;--c)1==b.ct[c]&&(e+=a[c][d--]);return e}function C(a){var b;
if(null!=Pa)return Pa[y(a)];for(b=0;48>b;++b){var c=y(a);a:{var e;var d=0;for(e=Za.length-1;d<=e;){var h=d+(~~(e-d)>>1);var Eb=Za[h];if(Eb<c)d=h+1;else if(Eb>c)e=h-1;else{c=h;break a}}c=-d-1}c=0<=c?c:-1;if(-1!=c)return 64*c+b;f(a,0);1==b%2&&f(a,1);7==b%8&&f(a,2);15==b%16&&f(a,3)}}function B(a,b){var c=b%3;switch(~~(b/3)){case 0:F(a.ct,0,1,2,3,c);break;case 1:F(a.ct,16,17,18,19,c);break;case 2:F(a.ct,8,9,10,11,c);break;case 3:F(a.ct,4,5,6,7,c);break;case 4:F(a.ct,20,21,22,23,c);break;case 5:F(a.ct,
12,13,14,15,c);break;case 6:F(a.ct,0,1,2,3,c);F(a.ct,8,20,12,16,c);F(a.ct,9,21,13,17,c);break;case 7:F(a.ct,16,17,18,19,c);F(a.ct,1,15,5,9,c);F(a.ct,2,12,6,10,c);break;case 8:F(a.ct,8,9,10,11,c);F(a.ct,2,19,4,21,c);F(a.ct,3,16,5,22,c);break;case 9:F(a.ct,4,5,6,7,c);F(a.ct,10,18,14,22,c);F(a.ct,11,19,15,23,c);break;case 10:F(a.ct,20,21,22,23,c);F(a.ct,0,8,4,14,c);F(a.ct,3,11,7,13,c);break;case 11:F(a.ct,12,13,14,15,c),F(a.ct,1,20,7,18,c),F(a.ct,0,23,6,17,c)}}function f(a,b){switch(b){case 0:B(a,19);
B(a,28);break;case 1:B(a,21);B(a,32);break;case 2:F(a.ct,0,3,1,2,1);F(a.ct,8,11,9,10,1);F(a.ct,4,7,5,6,1);F(a.ct,12,15,13,14,1);F(a.ct,16,19,21,22,1);F(a.ct,17,18,20,23,1);break;case 3:B(a,18),B(a,29),B(a,24),B(a,35)}}function q(a,b){var c;for(c=0;c<b;++c)f(a,0),1==c%2&&f(a,1),7==c%8&&f(a,2),15==c%16&&f(a,3)}function r(b,c){var e;var d=8;for(e=23;0<=e;--e)b.ct[e]=0,c>=a[e][d]&&(c-=a[e][d--],b.ct[e]=1)}function D(a,b){var c;for(c=0;24>c;++c)a.ct[c]=b.ct[c]}function k(){var a;this.ct=d(24);for(a=0;8>
a;++a)this.ct[a]=1;for(a=8;24>a;++a)this.ct[a]=0}function w(a,b){var c;this.ct=d(24);for(c=0;24>c;++c)this.ct[c]=a.ct[c]%3==b?1:0}function E(a){var b;this.ct=d(24);for(b=0;24>b;++b)this.ct[b]=a[b]}function x(){x=c;gb=d(70,28);fb=d(6435,28);Cb=d(70,16);Ab=d(6435,16);ra=d(450450);Bb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,1,0,0,0]}function G(b){var c;var e=0;var d=8;for(c=14;0<=c;--c)b.ct[c]!=b.ct[15]&&(e+=a[c][d--]);return e}function u(b){var c;var e=0;var d=4;for(c=6;0<=c;--c)b.rl[c]!=
b.rl[7]&&(e+=a[c][d--]);return 2*e+b.parity}function p(a,b){a.parity^=Bb[b];var c=b%3;switch(~~(b/3)){case 0:F(a.ct,0,1,2,3,c);break;case 1:F(a.rl,0,1,2,3,c);break;case 2:F(a.ct,8,9,10,11,c);break;case 3:F(a.ct,4,5,6,7,c);break;case 4:F(a.rl,4,5,6,7,c);break;case 5:F(a.ct,12,13,14,15,c);break;case 6:F(a.ct,0,1,2,3,c);F(a.rl,0,5,4,1,c);F(a.ct,8,9,12,13,c);break;case 7:F(a.rl,0,1,2,3,c);F(a.ct,1,15,5,9,c);F(a.ct,2,12,6,10,c);break;case 8:F(a.ct,8,9,10,11,c);F(a.rl,0,3,6,5,c);F(a.ct,3,2,5,4,c);break;
case 9:F(a.ct,4,5,6,7,c);F(a.rl,3,2,7,6,c);F(a.ct,11,10,15,14,c);break;case 10:F(a.rl,4,5,6,7,c);F(a.ct,0,8,4,14,c);F(a.ct,3,11,7,13,c);break;case 11:F(a.ct,12,13,14,15,c),F(a.rl,1,4,7,2,c),F(a.ct,1,0,7,6,c)}}function m(a,b){switch(b){case 0:p(a,19);p(a,28);break;case 1:p(a,21);p(a,32);break;case 2:F(a.ct,0,3,1,2,1),F(a.ct,8,11,9,10,1),F(a.ct,4,7,5,6,1),F(a.ct,12,15,13,14,1),F(a.rl,0,3,5,6,1),F(a.rl,1,2,4,7,1)}}function h(a,b,c){var e;for(e=0;16>e;++e)a.ct[e]=b.ct[e]%3;for(e=0;8>e;++e)a.rl[e]=b.ct[e+
16];a.parity=c}function t(b,c){var e;var d=8;b.ct[15]=0;for(e=14;0<=e;--e)c>=a[e][d]?(c-=a[e][d--],b.ct[e]=1):b.ct[e]=0}function e(b,c){var e;b.parity=c&1;c>>>=1;var d=4;b.rl[7]=0;for(e=6;0<=e;--e)c>=a[e][d]?(c-=a[e][d--],b.rl[e]=1):b.rl[e]=0}function J(){this.rl=d(8);this.ct=d(16)}function K(){K=c;$a=d(29400,20);Db=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1];Ja=d(29400);nb=[0,9,14,23,27,28,41,42,46,55,60,69];ob=d(70)}function L(b){var c;var e=0;var d=4;for(c=6;0<=c;--c)b.ud[c]!=b.ud[7]&&(e+=a[c][d--]);
e*=35;d=4;for(c=6;0<=c;--c)b.fb[c]!=b.fb[7]&&(e+=a[c][d--]);var f=b.fb[7]^b.ud[7];var h=0;d=4;for(c=7;0<=c;--c)b.rl[c]!=f&&(h+=a[c][d--]);return b.parity+2*(12*e+ob[h])}function O(a,b,c){var e;var d=b.ct[0]%3>b.ct[8]%3^b.ct[8]%3>b.ct[16]%3^b.ct[0]%3>b.ct[16]%3?0:1;for(e=0;8>e;++e)a.ud[e]=~~(b.ct[e]/3)^1,a.fb[e]=~~(b.ct[e+8]/3)^1,a.rl[e]=~~(b.ct[e+16]/3)^1^d;a.parity=d^c}function M(){this.ud=d(8);this.rl=d(8);this.fb=d(8)}function n(){var a;this.ct=d(24);for(a=0;24>a;++a)this.ct[a]=Sa[a]>>4}function S(a){var b;
n.call(this);for(b=0;23>b;++b){var c=b+a(24-b);if(this.ct[c]!=this.ct[b]){var e=this.ct[b];this.ct[b]=this.ct[c];this.ct[c]=e}}}function H(){H=c;ya=d(18);var a,b;ya[0]=new v(15120,0);ya[3]=new v(21021,1494);ya[6]=new v(8064,1236);ya[9]=new v(9,0);ya[12]=new v(1230,412);ya[15]=new v(224,137);for(a=0;18>a;a+=3)for(b=0;2>b;++b)ya[a+b+1]=new N,P(ya[a+b],ya[a],ya[a+b+1])}function z(a){a.cp=[0,1,2,3,4,5,6,7];a.co=[0,0,0,0,0,0,0,0]}function T(a,b){var c;for(c=0;8>c;++c)a.cp[c]=b.cp[c],a.co[c]=b.co[c]}function P(a,
b,c){var e;for(e=0;8>e;++e){c.cp[e]=a.cp[b.cp[e]];var d=a.co[b.cp[e]];var f=b.co[e];var h=d;h+=3>d?f:6-f;h%=3;3<=d^3<=f&&(h+=3);c.co[e]=h}}function N(){z(this)}function v(a,b){z(this);mathlib.setNPerm(this.cp,a,8);var c=b,e;var d=0;for(e=6;0<=e;--e)d+=this.co[e]=c%3,c=~~(c/3);this.co[7]=(15-d)%3}function I(a){v.call(this,a(40320),a(2187))}function Y(){Y=c;Ea=d(1937880);hb=d(1538);ib=d(1538);Ta=d(11880);Fb=[0,1,6,3,4,5,2,7];pb=d(160,12);qb=d(160,12);rb=[1,1,1,3,12,60,360,2520,20160,181440,1814400,
19958400,239500800];sb=[0,2,4,6,1,3,7,5,8,9,10,11]}function Q(a,b,c,e,d){var f=a.edgeo[d];a.edgeo[d]=a.edge[e];a.edge[e]=a.edgeo[c];a.edgeo[c]=a.edge[b];a.edge[b]=f}function U(a,b){var c;a.isStd||ia(a);var e=0;var d=1985229328;var f=47768;for(c=0;c<b;++c){var h=a.edge[c]<<2;e*=12-c;32<=h?(e+=f>>h-32&15,f-=4368<<h-32):(e+=d>>h&15,f-=4369,d-=286331152<<h)}return e}function X(a){var b=U(a,4);b=Ta[b];var c=b&7;b>>=3;ea(a,c);a=U(a,10)%20160;return 20160*b+a}function Z(a,b){a.isStd=!1;switch(b){case 0:g(a.edge,
0,4,1,5);g(a.edgeo,0,4,1,5);break;case 1:W(a.edge,0,4,1,5);W(a.edgeo,0,4,1,5);break;case 2:g(a.edge,0,5,1,4);g(a.edgeo,0,5,1,4);break;case 3:W(a.edge,5,10,6,11);W(a.edgeo,5,10,6,11);break;case 4:g(a.edge,0,11,3,8);g(a.edgeo,0,11,3,8);break;case 5:W(a.edge,0,11,3,8);W(a.edgeo,0,11,3,8);break;case 6:g(a.edge,0,8,3,11);g(a.edgeo,0,8,3,11);break;case 7:g(a.edge,2,7,3,6);g(a.edgeo,2,7,3,6);break;case 8:W(a.edge,2,7,3,6);W(a.edgeo,2,7,3,6);break;case 9:g(a.edge,2,6,3,7);g(a.edgeo,2,6,3,7);break;case 10:W(a.edge,
4,8,7,9);W(a.edgeo,4,8,7,9);break;case 11:g(a.edge,1,9,2,10);g(a.edgeo,1,9,2,10);break;case 12:W(a.edge,1,9,2,10);W(a.edgeo,1,9,2,10);break;case 13:g(a.edge,1,10,2,9);g(a.edgeo,1,10,2,9);break;case 14:W(a.edge,0,4,1,5);W(a.edgeo,0,4,1,5);g(a.edge,9,11);g(a.edgeo,8,10);break;case 15:W(a.edge,5,10,6,11);W(a.edgeo,5,10,6,11);g(a.edge,1,3);g(a.edgeo,0,2);break;case 16:W(a.edge,0,11,3,8);W(a.edgeo,0,11,3,8);g(a.edge,5,7);g(a.edgeo,4,6);break;case 17:W(a.edge,2,7,3,6);W(a.edgeo,2,7,3,6);g(a.edge,8,10);
g(a.edgeo,9,11);break;case 18:W(a.edge,4,8,7,9);W(a.edgeo,4,8,7,9);g(a.edge,0,2);g(a.edgeo,1,3);break;case 19:W(a.edge,1,9,2,10),W(a.edgeo,1,9,2,10),g(a.edge,4,6),g(a.edgeo,5,7)}}function da(a,b){a.isStd=!1;switch(b){case 0:Z(a,14);Z(a,17);break;case 1:Q(a,11,5,10,6);Q(a,5,10,6,11);Q(a,1,2,3,0);Q(a,4,9,7,8);Q(a,8,4,9,7);Q(a,0,1,2,3);break;case 2:R(a,4,5),R(a,5,4),R(a,11,8),R(a,8,11),R(a,7,6),R(a,6,7),R(a,9,10),R(a,10,9),R(a,1,1),R(a,0,0),R(a,3,3),R(a,2,2)}}function ea(a,b){for(;2<=b;)b-=2,da(a,1),
da(a,2);0!=b&&da(a,0)}function fa(a,b){var c,e;var d=1985229328;var f=47768;for(c=e=0;11>c;++c){var h=rb[11-c];var g=~~(b/h);b%=h;e^=g;g<<=2;32<=g?(g-=32,a.edge[c]=f>>g&15,h=(1<<g)-1,f=(f&h)+(f>>4&~h)):(a.edge[c]=d>>g&15,h=(1<<g)-1,d=(d&h)+(d>>>4&~h)+(f<<28),f>>=4)}0==(e&1)?a.edge[11]=d:(a.edge[11]=a.edge[10],a.edge[10]=d);for(c=0;12>c;++c)a.edgeo[c]=c;a.isStd=!0}function ja(a,b){var c;for(c=0;12>c;++c)a.edge[c]=b.edge[c],a.edgeo[c]=b.edgeo[c];a.isStd=b.isStd}function na(a,b){var c;null==a.temp&&
(a.temp=d(12));for(c=0;12>c;++c)a.temp[c]=c,a.edge[c]=b.ep[sb[c]+12]%12;var e=1;for(c=0;12>c;++c)for(;a.edge[c]!=c;){var f=a.edge[c];a.edge[c]=a.edge[f];a.edge[f]=f;var h=a.temp[c];a.temp[c]=a.temp[f];a.temp[f]=h;e^=1}for(c=0;12>c;++c)a.edge[c]=a.temp[b.ep[sb[c]]%12];return e}function ia(a){var b;null==a.temp&&(a.temp=d(12));for(b=0;12>b;++b)a.temp[a.edgeo[b]]=b;for(b=0;12>b;++b)a.edge[b]=a.temp[a.edge[b]],a.edgeo[b]=b;a.isStd=!0}function W(a,b,c,e,d){var f=a[b];a[b]=a[e];a[e]=f;f=a[c];a[c]=a[d];
a[d]=f}function R(a,b,c){var e=a.edge[b];a.edge[b]=a.edgeo[c];a.edgeo[c]=e}function V(){this.edge=d(12);this.edgeo=d(12)}function ha(a,b){return a[b>>4]>>((b&15)<<1)&3}function pa(a,b,c){var e=qb[b];var d=pb[b];var f=0;var h=1985229328;var g=47768;for(b=0;b<c;++b){var k=e[a[d[b]]]<<2;f*=12-b;32<=k?(f+=g>>k-32&15,g-=4368<<k-32):(f+=h>>k&15,g-=4369,h-=286331152<<k)}return f}function aa(a){var b=new V;var c=0;var e=ha(Ea,a);if(3==e)return 10;for(;0!=a;){0==e?e=2:--e;var d=~~(a/20160);d=hb[d];var f=a%
20160;fa(b,20160*d+f);for(d=0;17>d;++d){f=pa(b.edge,d<<3,4);f=Ta[f];var h=f&7;f>>=3;h=pa(b.edge,d<<3|h,10)%20160;f=20160*f+h;if(ha(Ea,f)==e){++c;a=f;break}}}return c}function Da(a,b,c){a[b>>4]^=(3^c)<<((b&15)<<1)}function ba(){var a;this.ep=d(24);for(a=0;24>a;++a)this.ep[a]=a}function ma(a){var b;ba.call(this);for(b=0;23>b;++b){var c=b+a(24-b);if(c!=b){var e=this.ep[b];this.ep[b]=this.ep[c];this.ep[c]=e}}}function Ba(){Ba=c;tb=[35,1,34,2,4,6,22,5,19]}function va(a,b){var c=a.edge;var e=b.edge,d;for(d=
0;24>d;++d)c.ep[d]=e.ep[d];c=a.center;e=b.center;for(d=0;24>d;++d)c.ct[d]=e.ct[d];T(a.corner,b.corner);a.value=b.value;a.add1=b.add1;a.length1=b.length1;a.length2=b.length2;a.length3=b.length3;a.sym=b.sym;for(c=0;60>c;++c)a.moveBuffer[c]=b.moveBuffer[c];a.moveLength=b.moveLength;a.edgeAvail=b.edgeAvail;a.centerAvail=b.centerAvail;a.cornerAvail=b.cornerAvail}function Ca(a){ka(a);qa(a);ta(a);for(var b=[],c=0;24>c;c++)b[Sa[c]]=a.center.ct[c];for(c=0;24>c;c++)b[Ka[c][0]]=Ka[a.edge.ep[c]][0]>>4,b[Ka[c][1]]=
Ka[a.edge.ep[c]][1]>>4;for(c=0;8>c;c++)for(var e=a.corner.cp[c],d=a.corner.co[c],f=0;3>f;f++)b[La[c][(f+d)%3]]=La[e][f]>>4;return b}function ua(a){a=Ca(a);for(var b=[[1,2],[4,8],[7,11],[13,14],[5,6,9,10]],c=[0,1,3,4,5,7,12,13,15],e=[],d=0;6>d;d++){for(var f=0;f<b.length;f++)for(var h=a[d<<4|b[f][0]],g=1;g<b[f].length;g++)if(h!=a[d<<4|b[f][g]])return console.log("reduction error",b[f][g],b[f][0]),null;for(f=0;f<c.length;f++)e[9*d+f]=a[d<<4|c[f]]}return e}function ka(a){for(;a.centerAvail<a.moveLength;){var b=
a.center,c=a.moveBuffer[a.centerAvail++];var e=c%3;switch(~~(c/3)){case 0:F(b.ct,0,1,2,3,e);break;case 1:F(b.ct,16,17,18,19,e);break;case 2:F(b.ct,8,9,10,11,e);break;case 3:F(b.ct,4,5,6,7,e);break;case 4:F(b.ct,20,21,22,23,e);break;case 5:F(b.ct,12,13,14,15,e);break;case 6:F(b.ct,0,1,2,3,e);F(b.ct,8,20,12,16,e);F(b.ct,9,21,13,17,e);break;case 7:F(b.ct,16,17,18,19,e);F(b.ct,1,15,5,9,e);F(b.ct,2,12,6,10,e);break;case 8:F(b.ct,8,9,10,11,e);F(b.ct,2,19,4,21,e);F(b.ct,3,16,5,22,e);break;case 9:F(b.ct,
4,5,6,7,e);F(b.ct,10,18,14,22,e);F(b.ct,11,19,15,23,e);break;case 10:F(b.ct,20,21,22,23,e);F(b.ct,0,8,4,14,e);F(b.ct,3,11,7,13,e);break;case 11:F(b.ct,12,13,14,15,e),F(b.ct,1,20,7,18,e),F(b.ct,0,23,6,17,e)}}return a.center}function qa(a){for(;a.cornerAvail<a.moveLength;){var b=a.corner,c=a.moveBuffer[a.cornerAvail++]%18;!b.temps&&(b.temps=new N);P(b,ya[c],b.temps);T(b,b.temps)}return a.corner}function ta(a){for(;a.edgeAvail<a.moveLength;){var b=a.edge,c=a.moveBuffer[a.edgeAvail++];var e=c%3;switch(~~(c/
3)){case 0:F(b.ep,0,1,2,3,e);F(b.ep,12,13,14,15,e);break;case 1:F(b.ep,11,15,10,19,e);F(b.ep,23,3,22,7,e);break;case 2:F(b.ep,0,11,6,8,e);F(b.ep,12,23,18,20,e);break;case 3:F(b.ep,4,5,6,7,e);F(b.ep,16,17,18,19,e);break;case 4:F(b.ep,1,20,5,21,e);F(b.ep,13,8,17,9,e);break;case 5:F(b.ep,2,9,4,10,e);F(b.ep,14,21,16,22,e);break;case 6:F(b.ep,0,1,2,3,e);F(b.ep,12,13,14,15,e);F(b.ep,9,22,11,20,e);break;case 7:F(b.ep,11,15,10,19,e);F(b.ep,23,3,22,7,e);F(b.ep,2,16,6,12,e);break;case 8:F(b.ep,0,11,6,8,e);
F(b.ep,12,23,18,20,e);F(b.ep,3,19,5,13,e);break;case 9:F(b.ep,4,5,6,7,e);F(b.ep,16,17,18,19,e);F(b.ep,8,23,10,21,e);break;case 10:F(b.ep,1,20,5,21,e);F(b.ep,13,8,17,9,e);F(b.ep,14,0,18,4,e);break;case 11:F(b.ep,2,9,4,10,e),F(b.ep,14,21,16,22,e),F(b.ep,7,15,1,17,e)}}return a.edge}function Fa(a){var b,c,e;var d=Array(a.moveLength-(a.add1?2:0));for(b=c=0;b<a.length1;++b)d[c++]=a.moveBuffer[b];var h=a.sym;for(b=a.length1+(a.add1?2:0);b<a.moveLength;++b)if(27<=Aa[h][a.moveBuffer[b]]){d[c++]=Aa[h][a.moveBuffer[b]]-
9;var g=tb[Aa[h][a.moveBuffer[b]]-27];h=Ra[h][g]}else d[c++]=Aa[h][a.moveBuffer[b]];b=Ra[Qa[h]];a:{a=ka(a);a=new E(a.ct);for(e=0;48>e;++e){g=!0;for(h=0;24>h;++h)if(a.ct[h]!=Sa[h]>>4){g=!1;break}if(g){a=e;break a}f(a,0);1==e%2&&f(a,1);7==e%8&&f(a,2);15==e%16&&f(a,3)}a=-1}b=b[a];a=[];h=b;for(b=c-1;0<=b;--b)g=d[b],g=3*~~(g/3)+(2-g%3),27<=Aa[h][g]?(a.push(Aa[h][g]-9),g=tb[Aa[h][g]-27],h=Ra[h][g]):a.push(Aa[h][g]);h=-1;c=0;e=[0,0,0];for(b=0;b<a.length;++b){g=a[b];if(h!=~~(g/3)%3){for(d=0;3>d;d++)e[d]%
4&&(a[c++]=ub[9*d+3*h+e[d]-1]+" ",e[d]=0);h=~~(g/3)%3}e[~~(g/9)]+=g%3+1}for(d=0;3>d;d++)e[d]%4&&(a[c++]=ub[9*d+3*h+e[d]-1]+" ",e[d]=0);return a=a.slice(0,c).join("")}function la(a,b){a.moveBuffer[a.moveLength++]=b}function sa(){this.moveBuffer=d(60);this.edge=new ba;this.center=new n;this.corner=new N}function xa(a){sa.call(this);va(this,a)}function Ga(){Ga=c;var a,b;ub="U  ;U2 ;U' ;R  ;R2 ;R' ;F  ;F2 ;F' ;D  ;D2 ;D' ;L  ;L2 ;L' ;B  ;B2 ;B' ;Uw ;Uw2;Uw';Rw ;Rw2;Rw';Fw ;Fw2;Fw';Dw ;Dw2;Dw';Lw ;Lw2;Lw';Bw ;Bw2;Bw'".split(";");
Na=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,21,22,23,25,28,30,31,32,34,36];ab=[0,1,2,4,6,7,8,9,10,11,13,15,16,17,19,22,25,28,31,34,36];Gb=d(37);Hb=d(37);Ua=d(37,36);jb=d(29,28);kb=d(21,20);vb=d(36);bb=d(28);Va=d(20);for(a=0;29>a;++a)Gb[Na[a]]=a;for(a=0;21>a;++a)Hb[ab[a]]=a;for(a=0;36>a;++a){for(b=0;36>b;++b)Ua[a][b]=~~(a/3)==~~(b/3)||~~(a/3)%3==~~(b/3)%3&&a>b;Ua[36][a]=!1}for(a=0;29>a;++a)for(b=0;28>b;++b)jb[a][b]=Ua[Na[a]][Na[b]];for(a=0;21>a;++a)for(b=0;20>b;++b)kb[a][b]=Ua[ab[a]][ab[b]];
for(a=0;36>a;++a)for(vb[a]=36,b=a;36>b;++b)if(!Ua[a][b]){vb[a]=b-1;break}for(a=0;28>a;++a)for(bb[a]=28,b=a;28>b;++b)if(!jb[a][b]){bb[a]=b-1;break}for(a=0;20>a;++a)for(Va[a]=20,b=a;20>b;++b)if(!kb[a][b]){Va[a]=b-1;break}}function Ha(a){a.solution="";var b=+new Date;var c=C(new w(ka(a.c),0));var e=C(new w(ka(a.c),1));var d=C(new w(ka(a.c),2));var f=za[~~c>>6];var g=za[~~e>>6];var k=za[~~d>>6];a.p1SolsCnt=0;a.arr2idx=0;Jb(a.p1sols);for(a.length1=(f<g?f:g)<k?f<g?f:g:k;100>a.length1&&!(k<=a.length1&&Ma(a,
~~d>>>6,d&63,a.length1,-1,0)||f<=a.length1&&Ma(a,~~c>>>6,c&63,a.length1,-1,0)||g<=a.length1&&Ma(a,~~e>>>6,e&63,a.length1,-1,0));++a.length1);k=a.p1sols.array.slice();DEBUG&&console.log("[scramble 444] Phase 1 Done in",+new Date-b);k.sort(function(a,b){return a.value-b.value});g=9;do{d=k[0].value;a:for(;100>d;++d)for(e=0;e<k.length&&!(k[e].value>d);++e)if(!(d-k[e].length1>g)&&(va(a.c1,k[e]),h(a.ct2,ka(a.c1),Ia(ta(a.c1).ep)),c=G(a.ct2),f=u(a.ct2),a.length1=k[e].length1,a.length2=d-k[e].length1,Wa(a,
c,f,a.length2,28,0)))break a;++g}while(100==d);a.arr2.sort(function(a,b){return a.value-b.value});DEBUG&&console.log("[scramble 444] Phase 2 Done in",+new Date-b);k=0;d=13;do{g=a.arr2[0].value;a:for(;100>g;++g)for(e=0;e<Math.min(a.arr2idx,100)&&!(a.arr2[e].value>g);++e)if(!(g-a.arr2[e].length1-a.arr2[e].length2>d)){c=na(a.e12,ta(a.arr2[e]));O(a.ct3,ka(a.arr2[e]),c^Ia(qa(a.arr2[e]).cp));c=L(a.ct3);f=U(a.e12,10);var n=aa(X(a.e12));if(n<=g-a.arr2[e].length1-a.arr2[e].length2&&Xa(a,f,c,n,g-a.arr2[e].length1-
a.arr2[e].length2,20,0)){k=e;break a}}++d}while(100==g);DEBUG&&console.log("[scramble 444] Phase 3 Done in",+new Date-b);d=new xa(a.arr2[k]);a.length1=d.length1;a.length2=d.length2;g=g-a.length1-a.length2;for(e=0;e<g;++e)la(d,ab[a.move3[e]]);(e=ua(d))||console.log("[scramble 444] Reduction Error!",Ca(d));for(g=0;54>g;g++)e[g]="URFDLB"[e[g]];e=e.join("");e=scramble_333.solvFacelet(e);e=e.split(" ");for(g=0;g<e.length;g++)/^[URFDLB][2']?$/.exec(e[g])&&la(d,3*"URFDLB".indexOf(e[g][0])+"2'".indexOf(e[g][1])+
1);a.solution=Fa(d);DEBUG&&console.log("[scramble 444] 3x3x3 Done in",+new Date-b)}function oa(a){var b="          U0U1U2U3\n          U4U5U6U7\n          U8U9UaUb\n          UcUdUeUf\nL0L1L2L3  F0F1F2F3  R0R1R2R3  B0B1B2B3\nL4L5L6L7  F4F5F6F7  R4R5R6R7  B4B5B6B7\nL8L9LaLb  F8F9FaFb  R8R9RaRb  B8B9BaBb\nLcLdLeLf  FcFdFeFf  RcRdReRf  BcBdBeBf\n          D0D1D2D3\n          D4D5D6D7\n          D8D9DaDb\n          DcDdDeDf\n".replace(/[URFDLB][0-9a-f]/g,function(b){var c="URFDLB".indexOf(b[0]);b="0123456789abcdef".indexOf(b[1]);
return"URFDLB"[a[16*c+b]]+" "});console.log(b)}function Ma(a,b,c,e,d,f){var g,k,n;if(0==b){if(b=0==e){va(a.c1,a.c);for(b=0;b<a.length1;++b)la(a.c1,a.move1[b]);switch(mb[c]){case 0:la(a.c1,24);la(a.c1,35);a.move1[a.length1]=24;a.move1[a.length1+1]=35;a.add1=!0;c=19;break;case 12869:la(a.c1,18);la(a.c1,29);a.move1[a.length1]=18;a.move1[a.length1+1]=29;a.add1=!0;c=34;break;case 735470:a.add1=!1,c=0}h(a.ct2,ka(a.c1),Ia(ta(a.c1).ep));b=G(a.ct2);e=u(a.ct2);a.c1.value=ra[70*b+e]+a.length1;a.c1.length1=a.length1;
a.c1.add1=a.add1;a.c1.sym=c;++a.p1SolsCnt;if(500>a.p1sols.size)var m=new xa(a.c1);else{c=a.p1sols;if(0==c.size)m=null;else{b=c.array[0];e=c.size-1;d=c.array[e];c.array.splice(e,1);--c.size;if(0<c.size){Oa(c,0,d);e=0;d=c.size;for(n=c.array[e];2*e+1<d;){f=(g=2*e+1,m=g+1,k=g,m<d&&0>c.array[g].value-c.array[m].value&&(k=m),k);if(0>c.array[f].value-n.value)break;Oa(c,e,c.array[f]);e=f}Oa(c,e,n)}m=b}m.value>a.c1.value&&va(m,a.c1)}g=a.p1sols;b:{c=g.size;for(g.array[g.size++]=m;0<c;){k=c;c=~~((c-1)/2);if(0>=
m.value-g.array[c].value){Oa(g,k,m);break b}Oa(g,k,g.array[c])}Oa(g,c,m)}b=1E4==a.p1SolsCnt}return b}for(g=0;27>g;g+=3)if(g!=d&&g!=d-9&&g!=d-18)for(n=0;3>n;++n){k=g+n;m=eb[b][Aa[c][k]];var p=za[~~m>>>6];if(p>=e){if(p>e)break}else if(p=Ra[c][m&63],m>>>=6,a.move1[f]=k,Ma(a,m,p,e-1,g,f+1))return!0}return!1}function Wa(a,b,c,e,d,f){var h;if(0==b&&0==ra[c]&&5>e){if(b=0==e){va(a.c2,a.c1);for(b=0;b<a.length2;++b)la(a.c2,a.move2[b]);b=ta(a.c2);c=0;d=!1;for(e=0;12>e;++e)c|=1<<b.ep[e],d=d!=12<=b.ep[e];0!=(c&
~~c>>12)||d?b=!1:(b=na(a.e12,ta(a.c2)),O(a.ct3,ka(a.c2),b^Ia(qa(a.c2).cp)),b=L(a.ct3),U(a.e12,10),c=aa(X(a.e12)),a.arr2[a.arr2idx]?va(a.arr2[a.arr2idx],a.c2):a.arr2[a.arr2idx]=new xa(a.c2),a.arr2[a.arr2idx].value=a.length1+a.length2+Math.max(c,Ja[b]),a.arr2[a.arr2idx].length2=a.length2,++a.arr2idx,b=a.arr2idx==a.arr2.length)}return b}for(h=0;23>h;++h)if(jb[d][h])h=bb[h];else{var g=fb[b][h];var k=gb[c][h];var n=ra[70*g+k];if(n>=e)n>e&&(h=bb[h]);else if(a.move2[f]=Na[h],Wa(a,g,k,e-1,h,f+1))return!0}return!1}
function Xa(a,b,c,e,d,f,h){var g;if(0==d)return 0==b&&0==c;fa(a.tempe[h],b);for(g=0;17>g;++g)if(kb[f][g])g=Va[g];else{b=$a[c][g];var k=Ja[b];if(k>=d)k>d&&14>g&&(g=Va[g]);else{k=pa(a.tempe[h].edge,g<<3,10);var n=~~(k/20160);n=Ta[n];var m=n&7;n>>=3;var p=pa(a.tempe[h].edge,g<<3|m,10)%20160;m=e;n=ha(Ea,20160*n+p);n=3==n?10:(1227133513<<n>>m&3)+m-1;if(n>=d)n>d&&14>g&&(g=Va[g]);else if(Xa(a,k,b,n,d-1,g,h+1))return a.move3[h]=g,!0}}return!1}function Ya(){var a;this.p1sols=new Kb;this.move1=d(15);this.move2=
d(20);this.move3=d(20);this.c1=new sa;this.c2=new sa;this.ct2=new J;this.ct3=new M;this.e12=new V;this.tempe=d(20);this.arr2=d(100);for(a=0;20>a;++a)this.tempe[a]=new V}function Ia(a){var b,c,e;var d=e=0;for(c=a.length;d<c;++d)for(b=d;b<c;++b)a[d]>a[b]&&(e^=1);return e}function F(a,b,c,e,d,f){switch(f){case 0:f=a[d];a[d]=a[e];a[e]=a[c];a[c]=a[b];a[b]=f;break;case 1:f=a[b];a[b]=a[e];a[e]=f;f=a[c];a[c]=a[d];a[d]=f;break;case 2:f=a[b],a[b]=a[c],a[c]=a[e],a[e]=a[d],a[d]=f}}function Jb(a){a.array=[];a.size=
0}function Oa(a,b,c){var e=a.array[b];a.array[b]=c;return e}function Kb(){this.array=[];this.array.length=500;this.size=0}function db(a){var b=a.length,c;for(c=0;c<b;++c)a[c]=-1}function wb(){wb=c;Ga();A();x();K();Y();H();Ba();if(!Ib){var h,g,n;var l=new k;for(h=0;24>h;++h)l.ct[h]=h;var v=new E(l.ct);var I=new E(l.ct);var z=new E(l.ct);for(h=0;48>h;++h){for(g=0;48>g;++g){for(n=0;48>n;++n)b(l,v)&&(Ra[h][g]=n,0==n&&(Qa[h]=g)),f(v,0),1==n%2&&f(v,1),7==n%8&&f(v,2),15==n%16&&f(v,3);f(l,0);1==g%2&&f(l,
1);7==g%8&&f(l,2);15==g%16&&f(l,3)}f(l,0);1==h%2&&f(l,1);7==h%8&&f(l,2);15==h%16&&f(l,3)}for(h=0;48>h;++h)for(D(l,I),q(l,Qa[h]),g=0;36>g;++g)for(D(v,l),B(v,g),q(v,h),n=0;36>n;++n)if(D(z,I),B(z,n),b(z,v)){Aa[h][g]=n;break}r(l,0);for(h=0;48>h;++h)mb[Qa[h]]=y(l),f(l,0),1==h%2&&f(l,1),7==h%8&&f(l,2),15==h%16&&f(l,3);Pa=d(735471);l=new k;g=d(22984);for(I=0;22984>I;I++)g[I]=0;for(I=v=0;735471>I;++I)if(0==(g[~~I>>>5]&1<<(I&31))){r(l,I);for(h=0;48>h;++h)z=y(l),g[~~z>>>5]|=1<<(z&31),null!=Pa&&(Pa[z]=v<<6|
Qa[h]),f(l,0),1==h%2&&f(l,1),7==h%8&&f(l,2),15==h%16&&f(l,3);Za[v++]=I}l=new k;v=new k;for(I=0;15582>I;++I)for(r(v,Za[I]),z=0;36>z;++z)D(l,v),B(l,z),eb[I][z]=C(l);Pa=null;db(za);v=za[0]=0;for(I=1;15582!=I;){var Q=(g=4<v)?-1:v;l=g?v:-1;++v;for(z=0;15582>z;++z)if(za[z]==Q)for(n=0;27>n;++n)if(h=~~eb[z][n]>>>6,za[h]==l)if(++I,g){za[z]=v;break}else za[h]=v}I=new J;for(l=0;70>l;++l)for(v=0;28>v;++v)e(I,l),p(I,Na[v]),gb[l][v]=u(I);for(l=0;70>l;++l)for(e(I,l),v=0;16>v;++v)Cb[l][v]=u(I),m(I,0),1==v%2&&m(I,
1),7==v%8&&m(I,2);for(l=0;6435>l;++l)for(t(I,l),v=0;16>v;++v)Ab[l][v]=G(I)&65535,m(I,0),1==v%2&&m(I,1),7==v%8&&m(I,2);for(l=0;6435>l;++l)for(v=0;28>v;++v)t(I,l),p(I,Na[v]),fb[l][v]=G(I)&65535;db(ra);z=ra[0]=ra[18]=ra[28]=ra[46]=ra[54]=ra[56]=0;for(h=6;450450!=h;){Q=(n=6<z)?-1:z;var w=n?z:-1;++z;for(l=0;450450>l;++l)if(ra[l]==Q)for(I=~~(l/70),g=l%70,v=0;23>v;++v){var S=fb[I][v];var X=gb[g][v];S=70*S+X;if(ra[S]==w)if(++h,n){ra[l]=z;break}else ra[S]=z}}for(l=0;12>l;++l)ob[nb[l]]=l;I=new M;for(l=0;29400>
l;++l)for(v=0;20>v;++v){g=I;n=l;g.parity=n&1;n>>>=1;Q=nb[n%12];n=~~(n/12);z=4;for(h=7;0<=h;--h)g.rl[h]=0,Q>=a[h][z]&&(Q-=a[h][z--],g.rl[h]=1);Q=n%35;n=~~(n/35);z=4;g.fb[7]=0;for(h=6;0<=h;--h)Q>=a[h][z]?(Q-=a[h][z--],g.fb[h]=1):g.fb[h]=0;z=4;g.ud[7]=0;for(h=6;0<=h;--h)n>=a[h][z]?(n-=a[h][z--],g.ud[h]=1):g.ud[h]=0;z=I;h=v;z.parity^=Db[h];switch(h){case 0:case 1:case 2:F(z.ud,0,1,2,3,h%3);break;case 3:F(z.rl,0,1,2,3,1);break;case 4:case 5:case 6:F(z.fb,0,1,2,3,(h-1)%3);break;case 7:case 8:case 9:F(z.ud,
4,5,6,7,(h-1)%3);break;case 10:F(z.rl,4,5,6,7,1);break;case 11:case 12:case 13:F(z.fb,4,5,6,7,(h+1)%3);break;case 14:F(z.ud,0,1,2,3,1);F(z.rl,0,5,4,1,1);F(z.fb,0,5,4,1,1);break;case 15:F(z.rl,0,1,2,3,1);F(z.fb,1,4,7,2,1);F(z.ud,1,6,5,2,1);break;case 16:F(z.fb,0,1,2,3,1);F(z.ud,3,2,5,4,1);F(z.rl,0,3,6,5,1);break;case 17:F(z.ud,4,5,6,7,1);F(z.rl,3,2,7,6,1);F(z.fb,3,2,7,6,1);break;case 18:F(z.rl,4,5,6,7,1);F(z.fb,0,3,6,5,1);F(z.ud,0,3,4,7,1);break;case 19:F(z.fb,4,5,6,7,1),F(z.ud,0,7,6,1,1),F(z.rl,1,
4,7,2,1)}$a[l][v]=L(I)&65535}db(Ja);I=Ja[0]=0;for(z=1;29400!=z;){for(l=0;29400>l;++l)if(Ja[l]==I)for(v=0;17>v;++v)-1==Ja[$a[l][v]]&&(Ja[$a[l][v]]=I+1,++z);++I}l=new V;for(I=0;20>I;++I)for(z=0;8>z;++z){fa(l,0);Z(l,I);ea(l,z);for(v=0;12>v;++v)pb[I<<3|z][v]=l.edge[v];ia(l);for(v=0;12>v;++v)qb[I<<3|z][v]=l.temp[v]}v=new V;g=d(1485);for(I=0;1485>I;I++)g[I]=0;for(I=l=0;11880>I;++I)if(0==(g[~~I>>>3]&1<<(I&7))){fa(v,I*rb[8]);for(h=0;8>h;++h)z=U(v,4),z==I&&(ib[l]=(ib[l]|1<<h)&65535),g[~~z>>3]|=1<<(z&7),Ta[z]=
l<<3|Fb[h],da(v,0),1==h%2&&(da(v,1),da(v,2));hb[l++]=I}var O;I=new V;z=new V;g=new V;db(Ea);v=0;lb=1;for(Da(Ea,0,0);31006080!=lb;){n=9<v;Q=v%3;l=(v+1)%3;h=n?3:Q;Q=n?Q:3;if(9<=v)break;for(X=0;31006080>X;X+=16){var P=Ea[~~X>>4];if(n||-1!=P)for(S=X,w=X+16;S<w;++S,P>>=2)if((P&3)==h){var T=~~(S/20160);T=hb[T];var aa=S%20160;fa(I,20160*T+aa);for(T=0;17>T;++T){aa=pa(I.edge,T<<3,4);aa=Ta[aa];var N=aa&7;aa>>=3;var ba=pa(I.edge,T<<3|N,10)%20160;ba=20160*aa+ba;if(ha(Ea,ba)==Q){Da(Ea,n?S:ba,l);++lb;if(n)break;
ba=ib[aa];if(1!=ba)for(ja(z,I),Z(z,T),ea(z,N),O=1;0!=(ba=~~ba>>1&65535);++O)1==(ba&1)&&(ja(g,z),ea(g,O),N=20160*aa+U(g,10)%20160,ha(Ea,N)==Q&&(Da(Ea,N,l),++lb))}}}}++v}Ib=!0}cb=new Ya}function xb(a,b,c,e){var d=[0,1,2,3,4,5];e&&(e=mathlib.rn([1,4,8,1,1,1,24][e]),8<=e&&(mathlib.acycle(d,[0,1,2],e>>3),mathlib.acycle(d,[3,4,5],e>>3),e&=7),4<=e&&(mathlib.acycle(d,[0,1,3,4],2),e&=3),1<=e&&mathlib.acycle(d,[1,2,4,5],e));e=!0;for(var h=0;e&&100>h;h++){var f=new sa;for(var g=[],k=[],n=[],m=0;24>m;m++)a>>
m&1&&g.push(m),b>>m&1&&k.push(m),c>>m&1&&n.push(m);var l=mathlib.rndPerm(g.length);for(m=0;m<g.length;m++)f.center.ct[g[m]]=Sa[g[l[m]]]>>4;g=mathlib.rndPerm(k.length);for(m=0;m<k.length;m++)f.edge.ep[k[m]]=k[g[m]];k=mathlib.rndPerm(n.length);g=24;for(m=0;m<n.length;m++)l=mathlib.rn(3),f.corner.co[n[m]]=l,f.corner.cp[n[m]]=n[k[m]],g-=l;0!=g%3&&(f.corner.co[n[0]]=(f.corner.co[n[0]]+g)%3);f=Ca(f);for(m=0;96>m;m++)f[m]="URFDLB".charAt(d[f[m]]),f[m]!=f[m>>4<<4]&&(e=!1)}return f.join("")}function yb(a){wb();
a=a.split("");for(var b=0;96>b;b++)a[b]="URFDLB".indexOf(a[b]);DEBUG&&console.log("[scramble 444] Scramble to state:");DEBUG&&oa(a);cb.c=new sa;b=cb.c;for(var c=a,e=0,d=0,h=0,f=0,g=0;24>g;g++)b.center.ct[g]=c[Sa[g]],e+=1<<4*c[Sa[g]];for(g=0;24>g;g++)for(var k=0;24>k;k++)c[Ka[g][0]]==Ka[k][0]>>4&&c[Ka[g][1]]==Ka[k][1]>>4&&(b.edge.ep[g]=k,d|=1<<k);var n;for(g=0;8>g;g++){for(n=0;3>n&&0!=c[La[g][n]]&&3!=c[La[g][n]];n++);var m=c[La[g][(n+1)%3]];var l=c[La[g][(n+2)%3]];for(k=0;8>k;k++)if(m==La[k][1]>>4&&
l==La[k][2]>>4){b.corner.cp[g]=k;b.corner.co[g]=n%3;h|=1<<k;f+=n%3;break}}b=1*(255!=h)+2*(0!=f%3)+4*(4473924!=e)+8*(16777215!=d);0!=b&&console.log("[scramble 444] State Check Error!",b,a);Ha(cb);return cb.solution.replace(/\s+/g," ")}function wa(a,b,c,e){return yb(xb(a,b,c,e))}function zb(){return yb(xb(16777215,16777215,255))}var ca;l(k,w,E);var za,eb,mb,Pa=null,Za,Qa,Aa,Ra;l(J);ca.parity=0;var fb,ra,Ab,Bb,gb,Cb;l(M);ca.parity=0;var $a,Db,Ja,nb,ob;l(n,S);l(N,v,I);ca.temps=null;var ya;l(V);ca.isStd=
!0;ca.temp=null;var sb,lb=0,Ea,rb,pb,qb,Ta,hb,Fb,ib;l(ba,ma);var Sa=[5,6,10,9,53,54,58,57,37,38,42,41,85,86,90,89,21,22,26,25,69,70,74,73],La=[[15,16,35],[12,32,67],[0,64,83],[3,80,19],[51,47,28],[48,79,44],[60,95,76],[63,31,92]],Ka=[[13,33],[4,65],[2,81],[11,17],[61,94],[52,78],[50,46],[59,30],[75,40],[68,87],[27,88],[20,39],[34,14],[66,8],[82,1],[18,7],[93,62],[77,56],[45,49],[29,55],[36,71],[91,72],[84,23],[43,24]];l(sa,xa,function(a){this.moveBuffer=d(60);this.edge=new ma(a);this.center=new S(a);
this.corner=new I(a)});ca.add1=!1;ca.center=null;ca.centerAvail=0;ca.corner=null;ca.cornerAvail=0;ca.edge=null;ca.edgeAvail=0;ca.length1=0;ca.length2=0;ca.length3=0;ca.moveLength=0;ca.sym=0;ca.value=0;var tb,Ua,jb,kb,Na,ub,ab,vb,bb,Va,Gb,Hb;l(Ya);ca.add1=!1;ca.arr2idx=0;ca.c=null;ca.length1=0;ca.length2=0;ca.p1SolsCnt=0;ca.solution="";var Ib=!1,cb;scrMgr.reg("444wca",zb)("4edge",function(){return wa(0,16777215,255)})("444edo",function(){return wa(0,16777215,0)})("444cto",function(){return wa(16777215,
0,0)})("444ll",function(a,b,c,e){return wa(0,983280,240,e)})("444ell",function(a,b,c,e){return wa(0,983280,0,e)})("444ctud",function(a,b,c,e){return wa(16776960,16777215,255,e)})("444ctrl",function(a,b,c,e){return wa(65535,16777215,255,e)})("444l8e",function(a,b,c,e){return wa(0,16715760,255,e)})("444ud3c",function(a,b,c,e){a=mathlib.rn(4);return wa(16776960,16715760|4097<<a,255,e)})("444rlda",function(a,b,c,e){a=4*mathlib.rn(2);return wa(240|3840<<a,16777215,255,e)})("444rlca",function(a,b,c,e){a=
4*mathlib.rn(2);return wa(240|3840<<a,16715760,255,e)});return{getRandomScramble:zb,getPartialScramble:wa}}(mathlib.Cnk,mathlib.circle);var sq1=function(a,g,d,l){function c(){this.ul=70195;this.ur=4544119;this.dl=10062778;this.dr=14536702;this.ml=0}function A(a){var b;void 0===a&&(a=l(3678));var e=new c;var d=t[a];var h=324508639;var f=38177486;var g=b=8;for(a=0;24>a;a++)if(0==(d>>a&1)){var k=l(b)<<2;e.setPiece(23-a,f>>k&15);k=(1<<k)-1;f=(f&k)+(f>>4&~k);--b}else k=l(g)<<2,e.setPiece(23-a,h>>k&15),e.setPiece(22-a,h>>k&15),k=(1<<k)-1,h=(h&k)+(h>>4&~k),--g,++a;e.ml=l(2);return e}function b(a,c,d,f,k,n){if(0==d&&4>f){if(c=0==f)a:{a.Search_d.copy(a.Search_c);
for(c=0;c<a.Search_length1;++c)a.Search_d.doMove(a.Search_move[c]);c=a.Search_d;f=a.Search_sq;d=[];for(k=0;8>k;++k)d[k]=c.pieceAt(3*k+1)>>1;f.cornperm=g(d,8);f.topEdgeFirst=c.pieceAt(0)==c.pieceAt(1);k=f.topEdgeFirst?2:0;for(n=0;4>n;k+=3,++n)d[n]=c.pieceAt(k)>>1;f.botEdgeFirst=c.pieceAt(12)==c.pieceAt(13);for(k=f.botEdgeFirst?14:12;8>n;k+=3,++n)d[n]=c.pieceAt(k)>>1;f.edgeperm=g(d,8);f.ml=c.ml;k=a.Search_sq.edgeperm;f=a.Search_sq.cornperm;n=a.Search_sq.ml;for(c=Math.max(M[a.Search_sq.edgeperm<<1|n],
M[a.Search_sq.cornperm<<1|n]);c<a.Search_maxlen2;++c)if(y(a,k,f,a.Search_sq.topEdgeFirst,a.Search_sq.botEdgeFirst,n,c,a.Search_length1,0)){for(f=0;f<c;++f)a.Search_d.doMove(a.Search_move[a.Search_length1+f]);f=a;k="";d=n=0;for(c=c+a.Search_length1-1;0<=c;c--){var m=a.Search_move[c];0<m?(m=12-m,n=6<m?m-12:m):0>m?(m=12+m,d=6<m?m-12:m):(m="/",c==a.Search_length1-1&&(m="`/`"),k=0==n&&0==d?k+m:k+(" ("+n+","+d+")"+m),n=d=0)}if(0!=n||0!=d)k+=" ("+n+","+d+") ";f.Search_sol_string=k;c=!0;break a}c=!1}return c}if(0!=
n){var l=K[c];m=e[l];if(m<f&&(a.Search_move[k]=0,b(a,l,m,f-1,k+1,0)))return!0}l=c;if(0>=n)for(d=0;;){d+=J[l];l=d>>4;d&=15;if(12<=d)break;m=e[l];if(m>f)break;else if(m<f&&(a.Search_move[k]=d,b(a,l,m,f-1,k+1,1)))return!0}l=c;if(1>=n)for(d=0;;){d+=h[l];l=d>>4;d&=15;if(6<=d)break;m=e[l];if(m>f)break;else if(m<f&&(a.Search_move[k]=-d,b(a,l,m,f-1,k+1,2)))return!0}return!1}function y(a,b,c,e,d,f,h,g,k){var m,l;if(0==h&&!e&&d)return!0;if(0!=k&&e==d){var p=S[b];var t=S[c];if(M[p<<1|1-f]<h&&M[t<<1|1-f]<h&&
(a.Search_move[g]=0,y(a,p,t,e,d,1-f,h-1,g+1,0)))return!0}if(0>=k){p=(l=!e)?n[b]:b;t=l?c:n[c];var v=l?1:2;var z=M[p<<1|f];for(m=M[t<<1|f];12>v&&z<=h&&z<=h;){if(z<h&&m<h&&(a.Search_move[g]=v,y(a,p,t,l,d,f,h-1,g+1,1)))return!0;(l=!l)?(p=n[p],z=M[p<<1|f],v+=1):(t=n[t],m=M[t<<1|f],v+=2)}}if(1>=k)for(p=(d=!d)?O[b]:b,t=d?c:O[c],v=d?1:2,z=M[p<<1|f],m=M[t<<1|f];v<(6<h?6:12)&&z<=h&&z<=h;){if(z<h&&m<h&&(a.Search_move[g]=-v,y(a,p,t,e,d,f,h-1,g+1,2)))return!0;(d=!d)?(p=O[p],z=M[p<<1|f],v+=1):(t=O[t],m=M[t<<1|
f],v+=2)}return!1}function C(a,c){a.Search_c=c;var d=c.ur&1118481;d|=d>>3;d|=d>>6;d=d&15|d>>12&48;var f=c.ul&1118481;f|=f>>3;f|=f>>6;f=f&15|f>>12&48;var h=c.dr&1118481;h|=h>>3;h|=h>>6;h=h&15|h>>12&48;var g=c.dl&1118481;g|=g>>3;g|=g>>6;g=g&15|g>>12&48;var n,m;var l=0;var p=[c.pieceAt(0)];for(n=1;24>n;++n)c.pieceAt(n)!=p[l]&&(p[++l]=c.pieceAt(n));for(l=m=0;16>l;++l)for(n=l+1;16>n;++n)p[l]>p[n]&&(m^=1);g=k(m<<24|f<<18|d<<12|g<<6|h);for(a.Search_length1=e[g];100>a.Search_length1&&(a.Search_maxlen2=Math.min(32-
a.Search_length1,17),!b(a,g,e[g],a.Search_length1,0,-1));++a.Search_length1);return a.Search_sol_string}function B(){this.Search_move=[];this.Search_d=new c;this.Search_sq=new E}function f(){f=$.noop;L=[0,3,6,12,15,24,27,30,48,51,54,60,63];t=[];e=[];J=[];h=[];K=[];var a,b;for(b=a=0;28561>b;++b){var c=L[b%13];var d=L[~~(b/13)%13];var g=L[~~(~~(b/13)/13)%13];var n=L[~~(~~(~~(b/13)/13)/13)];d=n<<18|g<<12|d<<6|c;16==x(d)&&(t[a++]=d)}a=new D;for(b=0;7356>b;++b){r(a,b);d=J;c=b;var m=a;n=g=0;do 0==(m.top&
2048)?(g+=1,m.top<<=1):(g+=2,m.top=m.top<<2^12291),n=1-n;while(0!=(x(m.top&63)&1));0==(x(m.top)&2)&&(m.Shape_parity^=n);d[c]=g;J[b]|=q(a)<<4;r(a,b);d=h;c=b;m=a;n=g=0;do 0==(m.bottom&2048)?(g+=1,m.bottom<<=1):(g+=2,m.bottom=m.bottom<<2^12291),n=1-n;while(0!=(x(m.bottom&63)&1));0==(x(m.bottom)&2)&&(m.Shape_parity^=n);d[c]=g;h[b]|=q(a)<<4;r(a,b);n=a.top&63;d=x(n);c=x(a.bottom&4032);a.Shape_parity^=1&(d&c)>>1;a.top=a.top&4032|a.bottom>>6&63;a.bottom=a.bottom&63|n<<6;K[b]=q(a)}for(b=0;7536>b;++b)e[b]=
-1;e[k(14378715)]=0;e[k(31157686)]=0;e[k(23967451)]=0;e[k(7191990)]=0;d=4;c=0;for(a=-1;d!=c;)for(c=d,++a,b=0;7536>b;++b)if(e[b]==a){g=0;n=b;do n=J[n],g+=n&15,n>>=4,-1==e[n]&&(++d,e[n]=a+1);while(12!=g);g=0;n=b;do n=h[n],g+=n&15,n>>=4,-1==e[n]&&(++d,e[n]=a+1);while(12!=g);n=K[b];-1==e[n]&&(++d,e[n]=a+1)}}function q(a){return G(t,a.top<<12|a.bottom)<<1|a.Shape_parity}function r(a,b){a.Shape_parity=b&1;a.top=t[b>>1];a.bottom=a.top&4095;a.top>>=12}function D(){}function k(a){return G(t,a&16777215)<<1|
a>>24}function w(){w=$.noop;M=[];S=[];n=[];O=[];var b,c,e;var f=[];for(c=0;40320>c;++c)a(f,c,8),d(f,2,4)(f,3,5),S[c]=g(f,8),a(f,c,8),d(f,0,3,2,1),n[c]=g(f,8),a(f,c,8),d(f,4,7,6,5),O[c]=g(f,8);for(c=0;80640>c;++c)M[c]=-1;var h=M[0]=0;for(b=1;80640>b;){var k=(e=11<=h)?-1:h;f=e?h:-1;++h;c=0;a:for(;80640>c;++c)if(M[c]==k){var m=c>>1;var l=c&1;var p=S[m]<<1|1-l;if(M[p]==f&&(++b,M[e?c:p]=h,e))continue a;p=m;for(m=0;4>m;++m)if(p=n[p],M[p<<1|l]==f&&(++b,M[e?c:p<<1|l]=h,e))continue a;for(m=0;4>m;++m)if(p=
O[p],M[p<<1|l]==f&&(++b,M[e?c:p<<1|l]=h,e))continue a}}}function E(){}function x(a){a-=a>>1&1431655765;a=(a>>2&858993459)+(a&858993459);a=(a>>4)+a&252645135;a+=a>>8;return a+(a>>16)&63}function G(a,b){var c;var e=0;for(c=a.length-1;e<=c;){var d=e+(c-e>>1);var f=a[d];if(f<b)e=d+1;else if(f>b)c=d-1;else return d}return-e-1}function u(){u=$.noop;for(var a=new D,b=0;b<H.length;b++){for(var c=[H[b]],e=0;e<c.length;e++){var d=c[e];do d=J[d<<1]>>5,-1==c.indexOf(d)&&c.push(d);while(d!=c[e]);do d=h[d<<1]>>
5,-1==c.indexOf(d)&&c.push(d);while(d!=c[e]);r(a,d<<1);d=a.top;a.top=a.bottom;a.bottom=d;d=q(a)>>1;-1==c.indexOf(d)&&c.push(d)}H[b]=c}}function p(a,b,c){f();w();return C(T,A())}var m=c.prototype;m.toString=function(){return this.ul.toString(16).padStart(6,0)+this.ur.toString(16).padStart(6,0)+"|/".charAt(this.ml)+this.dl.toString(16).padStart(6,0)+this.dr.toString(16).padStart(6,0)};m.pieceAt=function(a){return(6>a?this.ul>>(5-a<<2):12>a?this.ur>>(11-a<<2):18>a?this.dl>>(17-a<<2):this.dr>>(23-a<<
2))&15};m.setPiece=function(a,b){6>a?(this.ul&=~(15<<(5-a<<2)),this.ul|=b<<(5-a<<2)):12>a?(this.ur&=~(15<<(11-a<<2)),this.ur|=b<<(11-a<<2)):18>a?(this.dl&=~(15<<(17-a<<2)),this.dl|=b<<(17-a<<2)):(this.dr&=~(15<<(23-a<<2)),this.dr|=b<<(23-a<<2))};m.copy=function(a){this.ul=a.ul;this.ur=a.ur;this.dl=a.dl;this.dr=a.dr;this.ml=a.ml};m.doMove=function(a){a<<=2;if(24<a){a=48-a;var b=this.ul;this.ul=(this.ul>>a|this.ur<<24-a)&16777215;this.ur=(this.ur>>a|b<<24-a)&16777215}else 0<a?(b=this.ul,this.ul=(this.ul<<
a|this.ur>>24-a)&16777215,this.ur=(this.ur<<a|b>>24-a)&16777215):0==a?(b=this.ur,this.ur=this.dl,this.dl=b,this.ml=1-this.ml):-24<=a?(a=-a,b=this.dl,this.dl=(this.dl<<a|this.dr>>24-a)&16777215,this.dr=(this.dr<<a|b>>24-a)&16777215):-24>a&&(a=48+a,b=this.dl,this.dl=(this.dl>>a|this.dr<<24-a)&16777215,this.dr=(this.dr>>a|b<<24-a)&16777215)};m=B.prototype=function(){}.prototype;m.Search_c=null;m.Search_length1=0;m.Search_maxlen2=0;m.Search_sol_string=null;m=D.prototype=function(){}.prototype;m.bottom=
0;m.Shape_parity=0;m.top=0;var h,t,e,J,K,L;m=E.prototype=function(){}.prototype;m.botEdgeFirst=!1;m.cornperm=0;m.edgeperm=0;m.ml=0;m.topEdgeFirst=!1;var O,M,n,S,H=[0,1,3,18,19,1004,1005,1006,1007,1008,1009,1011,1015,1016,1018,1154,1155,1156,1157,1158,1159,1161,1166,1168,424,425,426,427,428,429,431,436,95,218,341,482,528,632,1050,342,343,345,346,348,353,223,487,533,535,1055,219,225,483,489,639,1051,1057,486,1054,1062,6,21,34,46,59,71,144,157,182,305,7,22,35,47,60,72,145,158,183,306,8,23,36,48,61,73,
146,159,184,307],z=[16,16,16,10,16,24,16,24,16,24,16,16,4,24,16,48,32,48,32,48,32,32,48,16,48,32,48,16,48,32,32,48,36,48,72,72,48,48,72,48,36,72,48,48,72,32,48,16,32,48,16,32,48,48,16,48,48,36,72,36,72,96,96,72,96,72,72,72,72,24,48,64,64,48,64,48,48,48,48,16,24,32,32,24,32,24,24,24,24,8],T=new B,P=[[4146,12816],[12546,12816],[12321,12816],[8961,12816],[12816,12321],[12816,12546],[12816,8961],[12306,12801],[8496,12321],[4896,12546],[12321,12546],[12546,12321],[12801,12801],[12576,12801],[4656,12306],
[12306,12306],[531,12801],[8976,12801],[4656,12801],[12576,12306],[12801,12306]],N=[1,4,4,2,4,4,2,4,4,4,4,4,4,4,1,1,4,4,4,4,4];scrMgr.reg("sqrs",p);scrMgr.reg("sqrcsp",function(a,b,c){f();w();u();a=mathlib.rndEl(H[scrMgr.fixCase(c,z)]);return C(T,A(a))},["Star-x8 Star-x71 Star-x62 Star-x44 Star-x53 Square-Scallop Square-rPawn Square-Shield Square-Barrel Square-rFist Square-Mushroom Square-lPawn Square-Square Square-lFist Square-Kite Kite-Scallop Kite-rPawn Kite-Shield Kite-Barrel Kite-rFist Kite-Mushroom Kite-lPawn Kite-lFist Kite-Kite Barrel-Scallop Barrel-rPawn Barrel-Shield Barrel-Barrel Barrel-rFist Barrel-Mushroom Barrel-lPawn Barrel-lFist Scallop-Scallop Scallop-rPawn Scallop-Shield Scallop-rFist Scallop-Mushroom Scallop-lPawn Scallop-lFist Shield-rPawn Shield-Shield Shield-rFist Shield-Mushroom Shield-lPawn Shield-lFist Mushroom-rPawn Mushroom-rFist Mushroom-Mushroom Mushroom-lPawn Mushroom-lFist Pawn-rPawn-rPawn Pawn-rPawn-lPawn Pawn-rPawn-rFist Pawn-lPawn-rFist Pawn-lPawn-lPawn Pawn-rPawn-lFist Pawn-lPawn-lFist Fist-rFist-rFist Fist-lFist-rFist Fist-lFist-lFist Pair-x6 Pair-r42 Pair-x411 Pair-r51 Pair-l42 Pair-l51 Pair-x33 Pair-x312 Pair-x321 Pair-x222 L-x6 L-r42 L-x411 L-r51 L-l42 L-l51 L-x33 L-x312 L-x321 L-x222 Line-x6 Line-r42 Line-x411 Line-r51 Line-l42 Line-l51 Line-x33 Line-x312 Line-x321 Line-x222".split(" "),
z]);scrMgr.reg("sq1pll",function(a,b,e){f();w();var d=P[scrMgr.fixCase(e,N)];a=new c;var h=4369*mathlib.rn(4);e=4*mathlib.rn(4);b=17476-d[0]+h&13107;d=13107-d[1]+h&13107;b=(b|b<<16)>>e;d=(d|d<<16)>>e;for(e=0;4>e;e++)h=(d>>12-4*e&15)<<1|1,a.setPiece(3*e+1,h),a.setPiece(3*e+2,h),a.setPiece((3*e+3)%12,(b>>12-4*e&15)<<1);0!=mathlib.rn(2)&&a.doMove(1);a.ml=mathlib.rn(2);return C(T,a)},["H Ua Ub Z Aa Ab E F Ga Gb Gc Gd Ja Jb Na Nb Ra Rb T V Y".split(" "),N,function(a,b){f();w();var e=P[scrMgr.fixCase(a,
N)],d=new c,h=17476-e[0]&13107;e=13107-e[1]&13107;for(var g=0;4>g;g++){var n=(e>>12-4*g&15)<<1|1;d.setPiece(3*g+1,n);d.setPiece(3*g+2,n);d.setPiece((3*g+3)%12,(h>>12-4*g&15)<<1)}if(!b)return[d,!1,null];image.sqllImage(d,!1,b)}]);return{initialize:$.noop,SqCubie:c,getRandomScramble:p}}(mathlib.setNPerm,mathlib.getNPerm,mathlib.circle,mathlib.rn);(function(){function a(a,b){var c=y.set([],b&31),f=B.set([],b>>5),g=C.set([],a),k=[];mathlib.fillFacelet(d,k,[0,1,2,3],f,6);mathlib.fillFacelet(l,k,g,c,6);c=[4,2,3,1,5,0];for(f=0;6>f;f++)for(g=0;2>g;g++){var m=l[f][0^g],h=l[f][1^g],t=6*~~(m/6)+c[(c.indexOf(m%6)+5)%6],e=6*~~(h/6)+c[(c.indexOf(h%6)+1)%6];if(k[t]==k[m]&&k[e]==k[h])return!1}return!0}function g(a,b){for(var c=C.set([],a[0]),d=y.set([],a[1]&31),f=B.set([],a[1]>>5),g=C.set([],b[0]),k=y.set([],b[1]&31),h=B.set([],b[1]>>5),l=[],e=[],J=[],
K=0;6>K;K++)l[K]=c[g[K]],e[K]=d[g[K]]^k[K];for(K=0;4>K;K++)J[K]=f[K]+h[K];return[C.get(l),B.get(J)<<5|y.get(e)]}for(var d=[[3,16,11],[4,23,15],[5,9,22],[10,17,21]],l=[[1,7],[2,14],[0,18],[6,12],[8,20],[13,19]],c=new mathlib.Solver(4,2,[[0,[function(a,b){mathlib.acycle(a,A[b])},"p",6,-1],360],[0,function(a,c){var d=y.set([],a&31),f=B.set([],a>>5);f[c]++;mathlib.acycle(d,A[c],1,b[c]);return B.get(f)<<5|y.get(d)},2592]]),A=[[0,1,3],[1,2,5],[0,4,2],[3,5,4]],b=[[0,1,0,2],[0,1,0,2],[0,0,1,2],[0,0,1,2]],
y=new mathlib.coord("o",6,-2),C=new mathlib.coord("p",6,-1),B=new mathlib.coord("o",4,3),f=[[0,0],[183,869],[87,1729]],q=[[1,3,"L3Bar-1","LLDGFFRRG"],[59,3,"L3Bar-2","DLLGFFRRG"],[25,3,"L3Bar-3","FFGDRRLLG"],[35,3,"L3Bar-4","GRRGLLFFD"],[12,3,"LL-1","LLGFFGGGG"],[10,3,"LL-2","GLLGGGGRR"],[2,1,"LL-3","RLRLFLFRF"],[4,1,"LL-4","FLFRFRLRL"],[3,3,"L4NB-1","FGGGGDGFGGGF"],[57,3,"L4NB-2","GGRGRGDGGGGR"],[53,3,"L4NB-3","GGDGRGGGRGGR"],[45,3,"L4NB-4","DGGFGGGFGGGF"],[33,3,"L4NB-5","GGDGGGGRGGGR"],[27,3,"L4NB-6",
"DGGGFGGGGGGF"],[49,3,"L3NB-1","RRGGGDGFF"],[43,3,"L3NB-2","GFFRRGDGG"],[41,3,"L3NB-3","GGGDLLFFG"],[51,3,"L3NB-4","GGGGRRLLD"],[8,3,"Flip-1","RLFLFFRRL"],[16,3,"Flip-2","LFFRRRLLFGGD"],[56,1,"Flip-3","RLFLFRFRLGGD"],[21,3,"L4Blk-1","GGDGGGLLL"],[13,3,"L4Blk-2","DGGLLLGGG"],[29,3,"L4Bar-1","GGGDGGGRR"],[37,3,"L4Bar-2","GGGFFGGGD"],[61,3,"L4Bar-3","GGGDGGLLG"],[5,3,"L4Bar-4","GGGGLLGGD"],[17,3,"L4Bar-5","GGGLLDGGG"],[11,3,"L4Bar-6","GGGGGGDLL"],[9,3,"L4Bar-7","RRGDGGGGG"],[19,3,"L4Bar-8","GFFGGGGGD"],
[20,3,"DFlip-1","GGGRRGGGGGGD"],[18,3,"DFlip-2","GGGGGGGFFGGD"],[60,1,"DFlip-3","FFGRRGLLGGGD"],[58,1,"DFlip-4","GRRGLLGFFGGD"]],r=[],D=[],k=0;k<q.length;k++)r.push(q[k][1]),D.push(q[k][2]);scrMgr.reg(["pyro","pyrso","pyrnb","pyr4c"],function(b){var d="pyro"==b?0:8,f="pyrl4e"==b?2:7;do{if("pyro"==b||"pyrso"==b||"pyr4c"==b){var g=mathlib.rn(360);var k=mathlib.rn(2592)}else if("pyrl4e"==b)g=mathlib.getNPerm(mathlib.setNPerm([],mathlib.rn(12),4,-1).concat([4,5]),6,-1),k=864*mathlib.rn(3)+mathlib.rn(8);
else if("pyrnb"==b){do g=mathlib.rn(360),k=mathlib.rn(2592);while(!a(g,k))}var l=c.search([g,k],0).length;var m=c.toStr(c.search([g,k],d).reverse(),"ULRB",["'",""])+" ";for(var h=0;4>h;h++){var t=mathlib.rn("pyr4c"==b?2:3);2>t&&(m+="lrbu".charAt(h)+[" ","' "][t],l++)}}while(l<f);return m})("pyrl4e",function(a,b,d){b=q[scrMgr.fixCase(d,r)][0];a=mathlib.getNPerm(mathlib.setNPerm([],b&1,4,-1).concat([4,5]),6,-1);b=864*(b>>1&3)+(b>>3);a=g(mathlib.rndEl(f),g([a,b],mathlib.rndEl(f)));a=c.toStr(c.search(a,
8).reverse(),"ULRB",["'",""])+" ";for(b=0;4>b;b++)d=mathlib.rn(3),2>d&&(a+="lrbu".charAt(b)+[" ","' "][d]);return a},[D,r,function(a,b){var c=q[a];if(!b)return["GGG"+c[3],null,c[2]];image.pyrllImage("GGG"+c[3],b)}])})();
var mpyr=function(){function a(a,b,c,d,f,h){this.ep=a||[0,1,2,3,4,5];this.eo=b||[0,0,0,0,0,0];this.wp=c||[0,1,2,3,4,5,6,7,8,9,10,11];this.ct=d||[0,1,2,3];this.co=f||[0,0,0,0];this.cp=h||[0,1,2,3]}function g(b){for(var c=[],e=new a,d=new a,f=0;f<b.length;f++){c[f]=1<<f;for(var h=0;h<f;h++)a.MpyrMult(a.moveCube[b[f]],a.moveCube[b[h]],e),a.MpyrMult(a.moveCube[b[h]],a.moveCube[b[f]],d),e.toString(1)==d.toString(1)&&(c[f]|=1<<h)}return c}function d(b,c){return a.MpyrMult(b,a.moveCube[c],null)}function l(a,
b){var c=b.ep.indexOf(a),e=b.eo[c];return 12*(12*c+b.wp.indexOf(a<<1|e))+b.wp.indexOf(a<<1|e^1)}function c(){var b=new a;x=mathlib.createMoveHash(b,E,l.bind(null,0),d);for(var c=[],f=[],h=0;6>h;h++){c.push(x[1][l(h,b)]);for(var k=0;k<h;k++)f.push(792*Math.min(c[h],c[k])+Math.max(c[h],c[k]))}var m=[];mathlib.createPrun(m,f,1881792,12,function(a,b){var c=(~~(a/792/792)+1-(E[b]>>1)%2)%3;var e=x[0][b][~~(a/792)%792];var d=x[0][b][a%792];return 627264*c+792*Math.min(e,d)+Math.max(e,d)},8,2);b=g(E);G=new mathlib.Searcher(null,
function(a){for(var b=0,c=627264*a[6],e=0;6>e;e++)for(var d=0;d<e;d++)b=Math.max(b,mathlib.getPruning(m,c+792*Math.min(a[e],a[d])+Math.max(a[e],a[d])));return b},function(a,b){for(var c=[],e=0;6>e;e++)c[e]=x[0][b][a[e]];c[6]=(a[6]+1-(E[b]>>1)%2)%3;return c},8,2,b)}function A(a){return 4*mathlib.getNPerm(a.ep,6,-1)+a.ct.indexOf(0)}function b(a){return 81*(parseInt(a.eo.join(""),2)>>1)+parseInt(a.co.join(""),3)}function y(){p=mathlib.createMoveHash(new a,u,A,d);m=mathlib.createMoveHash(new a,u,b,d);
var c=[],f=[];mathlib.createPrun(c,0,1440,14,p[0],4,2);mathlib.createPrun(f,0,2592,14,m[0],4,2);var k=g(u);h=new mathlib.Searcher(null,function(a){return Math.max(mathlib.getPruning(c,a[0]),mathlib.getPruning(f,a[1]))},function(a,b){return[p[0][b][a[0]],m[0][b][a[1]]]},4,2,k)}function C(a){for(var b=[],c=0;c<a.length;c++)b[c]=t[a[c]];return b.join(" ")}function B(b,c){for(var e=0;e<c.length;e++)b=a.MpyrMult(b,a.moveCube[c[e]],null);return b}function f(a){G||(c(),y());for(var e=$.now(),d=[],f=0;6>
f;f++)d[f]=x[1][l(f,a)];d[6]=a.getCosetIdx();d=G.solve(d,14);e=$.now()-e;for(f=0;f<d.length;f++)d[f]=E[d[f][0]]+d[f][1];a=B(a,d);f=p[1][A(a)];var g=m[1][b(a)];a=$.now();g=h.solve([f,g],20);a=$.now()-a;for(f=0;f<g.length;f++)g[f]=u[g[f][0]]+g[f][1];return[d,g,e,a]}function q(){var b=a.randomCube();b=f(b);b=C([].concat(b[0],b[1]));for(var c=0;4>c;c++){var d=mathlib.rn(3);2>d&&(b+=" "+"lrbu".charAt(c)+["","'"][d])}return b}a.prototype.toString=function(){var a=this.toFaceCube(1);return"XX L0 L1 L2 L3 L4 XX    XX R0 R1 R2 R3 R4 XX\n   L5 L6 L7 L8 L9    XX    R5 R6 R7 R8 R9\n      La Lb Lc    Fc Fb Fa    Ra Rb Rc\n         XX    F9 F8 F7 F6 F5    XX\n            XX F4 F3 F2 F1 F0 XX\n            XX D0 D1 D2 D3 D4 XX\n               D5 D6 D7 D8 D9\n                  Da Db Dc\n                     XX".replace(/([FRDL])([0-9a-c])/g,
function(b,c,e){b=13*"FRDL".indexOf(c)+parseInt(e,16);return"FRDL"[~~(a[b]/13)]+(a[b]%13).toString(16)})};var r=[[8,47],[34,21],[6,19],[32,45],[2,28],[15,41]],D=[[9,51],[48,12],[35,25],[22,38],[10,18],[23,5],[36,44],[49,31],[1,29],[27,3],[14,42],[40,16]],k=[[0,24,30],[26,50,4],[13,11,43],[39,37,17]],w=[7,33,20,46];a.prototype.toFaceCube=function(a){var b=[];a=a||13;mathlib.fillFacelet(r,b,this.ep,this.eo,a);mathlib.fillFacelet(D,b,this.wp,[],a);mathlib.fillFacelet(k,b,this.cp,this.co,a);mathlib.fillFacelet(w,
b,this.ct,null,a);return b};a.prototype.fromFacelet=function(a){for(var b=0,c=[],e=0;52>e;++e)c[e]=a[e],b+=Math.pow(16,c[e]);if(56797!=b)return-1;for(e=0;6>e;e++)a:for(a=0;6>a;a++)for(b=0;2>b;b++)if(~~(r[a][0]/13)==c[r[e][b]]&&~~(r[a][1]/13)==c[r[e][b^1]]){this.ep[e]=a;this.eo[e]=b;break a}for(e=0;12>e;e++)for(a=0;12>a;a++)if(~~(D[a][0]/13)==c[D[e][0]]&&~~(D[a][1]/13)==c[D[e][1]]){this.wp[e]=a;break}for(e=0;4>e;e++)a:for(a=0;4>a;a++)for(b=0;3>b;b++)if(~~(k[a][0]/13)==c[k[e][b]]&&~~(k[a][1]/13)==c[k[e][(b+
1)%3]]&&~~(k[a][2]/13)==c[k[e][(b+2)%3]]){this.cp[e]=a;this.co[e]=b;break a}for(e=0;4>e;e++)for(a=0;4>a;a++)~~(w[a]/13)==c[w[e]]&&(this.ct[e]=a);return this};a.randomCube=function(){return new a(mathlib.rndPerm(6,!0),mathlib.setNOri([],mathlib.rn(32),6,-2),mathlib.rndPerm(12,!0),mathlib.rndPerm(4,!0),mathlib.setNOri([],mathlib.rn(27),4,-3),null)};a.MpyrMult=function(){for(var b=arguments[arguments.length-1]||new a,c=0;c<arguments.length;c++){for(var d=arguments[arguments.length-1-c],f=0;4>f;f++)b.ct[f]=
0==c?f:d.ct[b.ct[f]],b.co[f]=0==c?0:(d.co[b.cp[f]]+b.co[f])%3,b.cp[f]=0==c?f:d.cp[b.cp[f]];for(f=0;6>f;f++)b.eo[f]=0==c?0:d.eo[b.ep[f]]^b.eo[f],b.ep[f]=0==c?f:d.ep[b.ep[f]];for(f=0;12>f;f++)b.wp[f]=0==c?f:d.wp[b.wp[f]]}return b};(function(){if(!a.moveCube){var b=[];b[0]=new a([0,1,2,3,4,5],[0,0,0,0,0,0],[0,4,2,3,10,5,6,7,8,9,1,11],[0,1,2,3],[0,0,1,0],null);b[2]=new a([2,1,5,3,4,0],[1,0,0,0,0,1],[5,4,2,3,10,11,6,7,8,9,1,0],[2,1,3,0],[0,0,1,0],null);b[4]=new a([0,1,2,3,4,5],[0,0,0,0,0,0],[0,1,2,6,4,
5,11,7,8,9,10,3],[0,1,2,3],[0,0,0,1],null);b[6]=new a([0,3,2,5,4,1],[0,1,0,1,0,0],[0,1,7,6,4,5,11,10,8,9,2,3],[0,3,1,2],[0,0,0,1],null);b[8]=new a([0,1,2,3,4,5],[0,0,0,0,0,0],[0,1,5,3,4,8,6,7,2,9,10,11],[0,1,2,3],[1,0,0,0],null);b[10]=new a([0,2,4,3,1,5],[0,1,1,0,0,0],[0,1,5,4,9,8,6,7,2,3,10,11],[1,2,0,3],[1,0,0,0],null);b[12]=new a([0,1,2,3,4,5],[0,0,0,0,0,0],[7,1,2,3,4,5,6,9,8,0,10,11],[0,1,2,3],[0,1,0,0],null);b[14]=new a([3,1,2,4,0,5],[1,0,0,0,1,0],[7,6,2,3,4,5,8,9,1,0,10,11],[3,0,2,1],[0,1,0,
0],null);for(var c=1;16>c;c+=2)b[c]=a.MpyrMult(b[c-1],b[c-1],null);a.moveCube=b}})();a.prototype.getPairPerm=function(){for(var a=[],b=[],c=0;6>c;c++){var d=this.eo[c];a[2*this.ep[c]]=2*c+d;a[2*this.ep[c]+1]=2*c+(d^1)}for(c=0;12>c;c++)b[c]=a[this.wp[c]];return b};a.prototype.getCosetIdx=function(){for(var a=0,b=0;4>b;b++)a+=this.co[b];a+=3-this.ct[3^this.ct.indexOf(3)];return a%3};var E=[0,2,4,6,8,10,12,14],x=null,G=null,u=[2,6,10,14],p=null,m=null,h=null,t="U U' Uw Uw' B B' Bw Bw' R R' Rw Rw' L L' Lw Lw'".split(" ");
scrMgr.reg("mpyrso",q);return{getRandomScramble:q,solveTest:function(b){var c=[0,2,4,6,8,10,12,14];var e=[];for(var d=0;d<b;d++)e.push(c[~~(Math.random()*c.length)]);b=new a;for(d=0;d<e.length;d++)b=a.MpyrMult(b,a.moveCube[e[d]],null);e=[b,e];C(e[1].slice());b=e[0];e=f(b);DEBUG&&console.log("[mpyr] phase1 solved in ",e[2]);DEBUG&&console.log("[mpyr] phase2 solved in ",e[3]);b=B(b,e[0]);b=B(b,e[1]);d=!0;b=b.toFaceCube();for(c=0;52>c;c+=13)for(var h=c+1;h<c+13;h++)if(b[c]!=b[h]){d=!1;break}d||console.log("ERROR! NOT SOLVED!");
return[e[0].length,e[1].length,e[2],e[3]]}}}();(function(){function a(a,b){var d=C.set([],a%12),g=y.set([],~~(a/12)),k=B.set([],b%81);b=f.set([],~~(b/81));for(var q=[],p=0;6>p;p++)q[5*p]=g[p];mathlib.fillFacelet(l,q,[0,1,2,3],k,5);mathlib.fillFacelet(c,q,d,b,5);for(p=0;30>p;p+=5)for(d=1;5>d;d++)if(q[p]==q[p+d])return!1;return!0}function g(a,c){var d=C.set([],a%12),f=y.set([],~~(a/12));mathlib.acycle(f,A[c]);mathlib.acycle(d,b[c]);return 12*y.get(f)+C.get(d)}function d(a,c){var d=B.set([],a%81),g=f.set([],~~(a/81));d[c]++;mathlib.acycle(g,b[c],
1,[0,2,1,3]);return 81*f.get(g)+B.get(d)}var l=[[4,16,7],[1,11,22],[26,14,8],[29,19,23]],c=[[3,6,12],[2,21,17],[27,9,18],[28,24,13]],A=[[0,3,1],[0,2,4],[1,5,2],[3,4,5]],b=[[0,1,2],[0,3,1],[0,2,3],[1,3,2]],y=new mathlib.coord("p",6,-1),C=new mathlib.coord("p",4,-1),B=new mathlib.coord("o",4,3),f=new mathlib.coord("o",4,-3),q=new mathlib.Solver(4,2,[[0,g,4320],[0,d,2187]]),r=new mathlib.Solver(4,2,[[0,function(a,b){return~~(g(12*a,b)/12)},360],[0,function(a,b){return d(a,b)%81},81]]),D=[0,1,2,0,2,1,
1,2,0,2,1,0];scrMgr.reg(["skbo","skbso","skbnb"],function(b){var c="skbso"==b?6:2,d="skbo"==b?0:8;do{var f=mathlib.rn(4320);var g=mathlib.rn(2187)}while(0==f&&0==g||D[f%12]!=(g+~~(g/3)+~~(g/9)+~~(g/27))%3||null!=q.search([f,g],0,c)||"skbnb"==b&&!a(f,g));b=q.search([f,g],d).reverse();f=[];g=["L","R","B","U"];for(c=0;c<b.length;c++){d=b[c][0];var k=1-b[c][1];2==d&&mathlib.acycle(g,[0,3,1],k+1);f.push(g[d]+(1==k?"'":""))}return f.join(" ")})(["ivyo","ivyso"],function(a){var b="ivyso"==a?6:0;do{a=mathlib.rn(360);
var c=mathlib.rn(81)}while(0==a&&0==c||null!=r.search([a,c],0,1));return r.toStr(r.search([a,c],b).reverse(),"RLDB","' ")})})();var scramble_222=function(a){function g(a,b){mathlib.acycle(a,C[b])}function d(a,b){mathlib.acycle(a,C[b],1,B[b])}function l(a,b){for(var c=mathlib.setNPerm([],a,7),e=f.set([],b),d=[],h=0;24>h;h++)d[h]=h>>2;mathlib.fillFacelet(q,d,c,e,4);for(h=0;24>h;h+=4)if((1<<d[h]|1<<d[h+3])&(1<<d[h+1]|1<<d[h+2]))return!1;return!0}function c(b,c,m){var n=0,l=4;c=[0,1,2,3];var t=[0,0,0,0,0,0,0];if("222tcp"==b)n=E[scrMgr.fixCase(m,h)],t=[0,0,0,0,1,0,0],c=c.concat(k[0]);else if("222tcn"==b)n=x[scrMgr.fixCase(m,e)],
t=[0,0,0,0,2,0,0],c=c.concat(k[0]);else if("222tc"==b)for(t=scrMgr.fixCase(m,K),n=G[t].slice(),t=[0,0,0,0,7>t?1:2,0,0],c=c.concat(k[0]),b=mathlib.rndPerm(4),m=n[0]=0;4>m;m++)n[0]|=b[m]<<4*m;else if("222eg0"==b)n=w[scrMgr.fixCase(m,p)],c=c.concat(k[0]);else if("222eg1"==b)n=w[scrMgr.fixCase(m,p)],c=c.concat(k[2+a(4)]);else if("222eg2"==b)n=w[scrMgr.fixCase(m,p)],c=c.concat(k[1]);else if("222lsall"==b){c=c.concat(k[0]);b=mathlib.rndPerm(4);b.push(b[3]);b[3]=4;n=[0,u[scrMgr.fixCase(m,O)][0]];for(m=0;5>
m;m++)n[0]|=b[m]<<4*m;l=5}for(m=a(4);0<m--;)g(c,0);b=c.slice();for(m=0;m<l;m++)c[m]=b[n[0]>>4*m&15],t[m]=n[1]>>4*m&15;for(n=a(4);0<n--;)d(t,0),g(c,0);c=mathlib.getNPerm(c,7);t=f.get(t);return y.toStr(y.search([c,t],9).reverse(),"URF","'2 ")}function A(a,b,c,e,d){b=b[e];for(var f=[],h=0;4>h;h++)if(!a||"all"==a||"ori"==a)for(var g=b[0]>>(h<<2)&15,k=b[1]>>(h<<2)&15,n="all"==a?"DLFURB":"DGGUGG",m=0;3>m;m++){var l=r.indexOf(q[h][m]);f[l]=n.charAt(q[g][(m+3-k)%3]>>2)}else if("ls"==a)for(k=b[0]>>(h<<2)&
15,m=0;3>m;m++)l=r.indexOf(q[h][m]),f[l]="DGU".charAt(0==(m+3-k)%3?3==h?2:0:1);f=f.join("");if(!d)return[f,null,c[e]];image.llImage.drawImage(f,null,d)}function b(c,e,h){var g="222o"==c?0:9;do{var n=2;if("222o"==c||"222so"==c){var m=a(5040);var p=a(729);n=3}else if("222eg"==c){p=D[h&7];m=[0,2,3,4,5,1][h>>3];m=mathlib.setNPerm([0,0,0,0].concat(k[m]),a(24),4);m=mathlib.getNPerm(m,7);var t=a(4);for(p=f.set([],p);0<t--;)d(p,0);p=f.get(p)}else{if(/^222eg[012]$/.exec(c))return b("222eg",e,[0,8,40][~~c[5]]+
h);if("222nb"==c){do m=a(5040),p=a(729);while(!l(m,p))}}}while(0==m&&0==p||null!=y.search([m,p],0,n));return y.toStr(y.search([m,p],g).reverse(),"URF","'2 ")}var y=new mathlib.Solver(3,3,[[0,[g,"p",7],5040],[0,[d,"o",7,-3],729]]),C=[[0,2,3,1],[0,1,5,4],[0,4,6,2]],B=[null,[0,1,0,1,3],[1,0,1,0,3]],f=new mathlib.coord("o",7,-3),q=[[3,4,9],[1,20,5],[2,8,17],[0,16,21],[13,11,6],[15,7,22],[12,19,10]],r=[0,1,2,3,8,9,4,5,20,21,16,17],D=[0,17,5,14,8,1,2,4],k=[[4,5,6],[4,6,5],[6,5,4],[5,4,6],[5,6,4],[6,4,5]],
w=[[12816,4641,2,"H-1"],[12576,4641,2,"H-2"],[8976,4641,4,"H-3"],[12306,4641,4,"H-4"],[786,528,4,"L-1"],[8976,528,4,"L-2"],[531,528,4,"L-3"],[12816,528,4,"L-4"],[8211,528,4,"L-5"],[12306,528,4,"L-6"],[12816,4626,4,"Pi-1"],[531,4626,4,"Pi-2"],[8976,4626,4,"Pi-3"],[8211,4626,4,"Pi-4"],[12306,4626,4,"Pi-5"],[786,4626,4,"Pi-6"],[12816,8736,4,"S-1"],[531,8736,4,"S-2"],[786,8736,4,"S-3"],[12306,8736,4,"S-4"],[8211,8736,4,"S-5"],[8976,8736,4,"S-6"],[8976,4128,4,"T-1"],[8211,4128,4,"T-2"],[531,4128,4,"T-3"],
[12816,4128,4,"T-4"],[12306,4128,4,"T-5"],[786,4128,4,"T-6"],[531,8208,4,"U-1"],[12816,8208,4,"U-2"],[786,8208,4,"U-3"],[12306,8208,4,"U-4"],[8976,8208,4,"U-5"],[8211,8208,4,"U-6"],[12816,4113,4,"aS-1"],[531,4113,4,"aS-2"],[786,4113,4,"aS-3"],[12306,4113,4,"aS-4"],[8976,4113,4,"aS-5"],[8211,4113,4,"aS-6"]],E=[[291,545,4,"Hammer-1"],[12321,545,4,"Hammer-2"],[306,545,4,"Hammer-3"],[561,545,4,"Hammer-4"],[801,545,4,"Hammer-5"],[8961,545,4,"Hammer-6"],[291,4130,4,"Spaceship-1"],[8961,4130,4,"Spaceship-2"],
[4896,4130,4,"Spaceship-3"],[12321,4130,4,"Spaceship-4"],[12306,4130,4,"Spaceship-5"],[561,4130,4,"Spaceship-6"],[8241,2,4,"Stollery-1"],[12576,2,4,"Stollery-2"],[12801,2,4,"Stollery-3"],[8451,2,4,"Stollery-4"],[561,2,4,"Stollery-5"],[8496,2,4,"Stollery-6"],[291,8738,1,"Pinwheel-1"],[4146,8738,1,"Pinwheel-2"],[12801,8738,4,"Pinwheel-3"],[8241,272,2,"2Face-1"],[12546,272,4,"2Face-2"],[531,272,2,"2Face-3"],[12321,272,4,"2Face-4"],[4866,290,4,"Turtle-1"],[4146,290,4,"Turtle-2"],[12801,290,4,"Turtle-3"],
[4656,290,4,"Turtle-4"],[8976,290,4,"Turtle-5"],[801,290,4,"Turtle-6"],[12816,4370,4,"Pinwheel Poser-1"],[12576,4370,4,"Pinwheel Poser-2"],[12801,4370,4,"Pinwheel Poser-3"],[8451,4370,4,"Pinwheel Poser-4"],[8976,4370,4,"Pinwheel Poser-5"],[8496,4370,4,"Pinwheel Poser-6"],[8241,17,4,"Gun-1"],[4146,17,4,"Gun-2"],[306,17,4,"Gun-3"],[12321,17,4,"Gun-4"],[8976,17,4,"Gun-5"],[8496,17,4,"Gun-6"]],x=[[4866,4609,4,"Hammer-1"],[12321,4609,4,"Hammer-2"],[8976,4609,4,"Hammer-3"],[12801,4609,4,"Hammer-4"],[4611,
4609,4,"Hammer-5"],[12576,4609,4,"Hammer-6"],[291,4114,4,"Spaceship-1"],[4146,4114,4,"Spaceship-2"],[786,4114,4,"Spaceship-3"],[12801,4114,4,"Spaceship-4"],[4131,4114,4,"Spaceship-5"],[8496,4114,4,"Spaceship-6"],[291,1,4,"Stollery-1"],[12576,1,4,"Stollery-2"],[306,1,4,"Stollery-3"],[8451,1,4,"Stollery-4"],[12546,1,4,"Stollery-5"],[4611,1,4,"Stollery-6"],[291,4369,1,"Pinwheel-1"],[4146,4369,1,"Pinwheel-2"],[4896,4369,4,"Pinwheel-3"],[8241,8194,2,"2Face-1"],[306,8194,4,"2Face-2"],[4146,8194,2,"2Face-3"],
[12321,8194,4,"2Face-4"],[8241,4354,4,"Turtle-1"],[12576,4354,4,"Turtle-2"],[4131,4354,4,"Turtle-3"],[12321,4354,4,"Turtle-4"],[306,4354,4,"Turtle-5"],[4611,4354,4,"Turtle-6"],[4866,8482,4,"Pinwheel Poser-1"],[531,8482,4,"Pinwheel Poser-2"],[8211,8482,4,"Pinwheel Poser-3"],[786,8482,4,"Pinwheel Poser-4"],[8976,8482,4,"Pinwheel Poser-5"],[801,8482,4,"Pinwheel Poser-6"],[291,34,4,"Gun-1"],[4146,34,4,"Gun-2"],[306,34,4,"Gun-3"],[8976,34,4,"Gun-4"],[786,34,4,"Gun-5"],[8496,34,4,"Gun-6"]],G=[[291,545,
4,"TCLL1-Hammer"],[291,4130,4,"TCLL1-Spaceship"],[8241,2,4,"TCLL1-Stollery"],[291,8738,1,"TCLL1-Pinwheel"],[8241,272,2,"TCLL1-2Face"],[4866,290,4,"TCLL1-Turtle"],[12816,4370,4,"TCLL1-Pinwheel Poser"],[8241,17,4,"TCLL1-Gun"],[4866,4609,4,"TCLL2-Hammer"],[291,4114,4,"TCLL2-Spaceship"],[291,1,4,"TCLL2-Stollery"],[291,4369,1,"TCLL2-Pinwheel"],[8241,8194,2,"TCLL2-2Face"],[8241,4354,4,"TCLL2-Turtle"],[4866,8482,4,"TCLL2-Pinwheel Poser"],[291,34,4,"TCLL2-Gun"]],u=[[0,"LS1-PBL"],[546,"LS1-Sune"],[273,"LS1-aSune"],
[258,"LS1-Ua"],[33,"LS1-Ub"],[288,"LS1-La"],[528,"LS1-Lb"],[513,"LS1-Ta"],[18,"LS1-Tb"],[66081,"LS2-Hammer"],[66066,"LS2-Spaceship"],[66048,"LS2-StolleryA"],[65538,"LS2-StolleryB"],[65568,"LS2-StolleryC"],[65808,"LS2-2Face"],[65826,"LS2-Turtle"],[65553,"LS2-GunA"],[65793,"LS2-GunB"],[131346,"LS3-Hammer"],[131601,"LS3-Spaceship"],[131328,"LS3-StolleryA"],[131073,"LS3-StolleryB"],[131088,"LS3-StolleryC"],[131616,"LS3-2Face"],[131361,"LS3-Turtle"],[131106,"LS3-GunA"],[131586,"LS3-GunB"],[8226,"LS4-SuneA"],
[8736,"LS4-SuneB"],[8706,"LS4-SuneC"],[8721,"LS4-PiA"],[8481,"LS4-PiB"],[8208,"LS4-U"],[8193,"LS4-L"],[8448,"LS4-T"],[8466,"LS4-H"],[73746,"LS5-HammerA"],[73986,"LS5-HammerB"],[74016,"LS5-SpaceshipA"],[74241,"LS5-SpaceshipB"],[73728,"LS5-Stollery"],[74274,"LS5-Pinwheel"],[73761,"LS5-TurtleA"],[74256,"LS5-TurtleB"],[74001,"LS5-Pinwheel Poser"],[139536,"LS6-Hammer"],[139521,"LS6-Spaceship"],[139266,"LS6-2Face"],[139281,"LS6-Turtle"],[139554,"LS6-Pinwheel PoserA"],[139809,"LS6-Pinwheel PoserB"],[139794,
"LS6-Pinwheel PoserC"],[139776,"LS6-GunA"],[139296,"LS6-GunB"],[4113,"LS7-aSuneA"],[4368,"LS7-aSuneB"],[4353,"LS7-aSuneC"],[4626,"LS7-PiA"],[4386,"LS7-PiB"],[4608,"LS7-U"],[4098,"LS7-L"],[4128,"LS7-T"],[4641,"LS7-H"],[70176,"LS8-Hammer"],[69666,"LS8-Spaceship"],[69633,"LS8-2Face"],[70146,"LS8-Turtle"],[69921,"LS8-Pinwheel PoserA"],[69906,"LS8-Pinwheel PoserB"],[70161,"LS8-Pinwheel PoserC"],[69648,"LS8-GunA"],[69888,"LS8-GunB"],[135681,"LS9-HammerA"],[135201,"LS9-HammerB"],[135186,"LS9-SpaceshipA"],
[135456,"LS9-SpaceshipB"],[135168,"LS9-Stollery"],[135441,"LS9-Pinwheel"],[135426,"LS9-TurtleA"],[135696,"LS9-TurtleB"],[135714,"LS9-Pinwheel Poser"]],p=mathlib.idxArray(w,2),m=mathlib.idxArray(w,3),h=mathlib.idxArray(E,2),t=mathlib.idxArray(E,3),e=mathlib.idxArray(x,2),J=mathlib.idxArray(x,3),K=mathlib.idxArray(G,2),L=mathlib.idxArray(G,3),O=mathlib.valuedArray(u.length,1),M=mathlib.idxArray(u,1);scrMgr.reg(["222o","222so","222nb"],b)("222eg0",c,[m,p,A.bind(null,"all",w,m)])("222eg1",c,[m,p,A.bind(null,
"all",w,m)])("222eg2",c,[m,p,A.bind(null,"all",w,m)])("222tcp",c,[t,h,A.bind(null,"all",E,t)])("222tcn",c,[J,e,A.bind(null,"all",x,J)])("222tc",c,[L,K,A.bind(null,"ori",G,L)])("222lsall",c,[M,O,A.bind(null,"ls",u,M)])("222eg",b,["EG0-O EG0-H EG0-L EG0-Pi EG0-S EG0-T EG0-U EG0-aS EG1B-O EG1B-H EG1B-L EG1B-Pi EG1B-S EG1B-T EG1B-U EG1B-aS EG1L-O EG1L-H EG1L-L EG1L-Pi EG1L-S EG1L-T EG1L-U EG1L-aS EG1F-O EG1F-H EG1F-L EG1F-Pi EG1F-S EG1F-T EG1F-U EG1F-aS EG1R-O EG1R-H EG1R-L EG1R-Pi EG1R-S EG1R-T EG1R-U EG1R-aS EG2-O EG2-H EG2-L EG2-Pi EG2-S EG2-T EG2-U EG2-aS".split(" "),
[1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4]]);return{getEGLLImage:A.bind(null,!1,w,m)}}(mathlib.rn);(function(){function a(a,b){mathlib.acycle(a,[0,b+1])}function g(a,b){var c=mathlib.setNPerm([],~~(a/3),4);mathlib.acycle(c,C[b]);return 3*mathlib.getNPerm(c,4)+(a%3+(0==b?1:0))%3}function d(a,c,d){return 72*A[d][~~(c/72)]+b[(d+a)%3][c%72]}function l(a,c,d,g){if(0==c)return 0==a[0]&&0==a[1]&&0==a[2]&&0==a[3];if(Math.max(mathlib.getPruning(y[0],72*a[0]+a[1]),mathlib.getPruning(y[1],72*a[0]+a[2]),mathlib.getPruning(y[2],72*a[0]+a[3]))>c)return!1;for(var f=0;3>f;f++)if(f!=d)for(var k=a.slice(),q=0;11>
q;q++){k[0]=A[f][k[0]];for(var r=1;4>r;r++)k[r]=b[(f+r-1)%3][k[r]];if(l(k,c-1,f,g))return g.push("URF".charAt(f)+"' 2' 3' 4' 5' 6 5 4 3 2 ".split(" ")[q]),!0}}function c(){c=$.noop;mathlib.createMove(b,72,g,3);mathlib.createMove(A,24,[a,"p",4],3);for(var l=0;3>l;l++)mathlib.createPrun(y[l],0,1728,5,d.bind(null,l),3,12,0)}var A=[],b=[],y=[[],[],[]],C=[[0,3,2,1],[0,1],[0,3]];scrMgr.reg(["gearo","gearso"],function(a){c();do{var b=[mathlib.rn(24)];for(var d=0;3>d;d++){do b[d+1]=mathlib.rn(72);while(15==
mathlib.getPruning(y[d],72*b[0]+b[d+1]))}}while(0==b);a="gearso"==a?4:0;for(d=[];!l(b,a,-1,d);)a++;return d.reverse().join(" ")})})();(function(){var a=new mathlib.Solver(4,1,[[0,function(a,l){var c=mathlib.setNPerm([],a>>4,4);mathlib.acycle(c,g[l]);return(mathlib.getNPerm(c,4)<<4)+(a&15^1<<l)},384]]),g=[[0,1],[2,3],[0,3],[1,2]];scrMgr.reg("133",function(){var d=1+mathlib.rn(191);d=2*d+((mathlib.getNParity(d>>3,4)^d>>1^d>>2^d)&1);return a.toStr(a.search([d],0),"RLFB",[""])})})();(function(a,g){function d(){d=$.noop;for(var b=[],l,C=0;40320>C;C++)c[C]=[];for(C=0;40320>C;C++)mathlib.setNPerm(b,C,8),a(b,0,1,2,3),l=c[0][C]=g(b,8),a(b,4,5,6,7),l=c[1][l]=g(b,8),a(b,2,5)(b,3,6),l=c[2][l]=g(b,8),a(b,0,5)(b,3,4),c[3][l]=g(b,8);mathlib.createPrun(A,0,40320,12,c,4,3)}function l(b,d,C,B,f){if(0==C)return 0==b+d;if(mathlib.getPruning(A,b)>C)return!1;var q,r;for(r=0;4>r;r++)if(r!=B){var y=b;var k=d;for(q=0;q<(2>r?3:1);q++){y=c[r][y];var w=r;2>w||(k=mathlib.setNPerm([],k,3),2==w?a(k,0,
1):3==w&&a(k,0,2),k=g(k,3));if(l(y,k,C-1,r,f))return f.push(["U","D","R2","F2"][r]+(2>r?" 2'".charAt(q):"")),!0}}}var c=[],A=[];scrMgr.reg("223",function(){d();do{var a=mathlib.rn(40320);var c=mathlib.rn(6)}while(0==c+a);for(var g=[],B=0;99>B&&!l(a,c,B,-1,g);B++);return g.reverse().join(" ")})})(mathlib.circle,mathlib.getNPerm);var clock=function(a,g){function d(a,b,c,d,g){for(var f=a[0].length;d<f;d++)a[c][d]=(a[c][d]+a[b][d]*g)%12}var l=[[0,1,1,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,1,1,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0],[1,1,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,0,0,0,0,0],[11,0,0,0,0,0,0,0,0,1,0,1,1,0],[0,0,0,0,0,0,11,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,11,0,1,1,0,1],[0,0,11,0,0,0,0,0,0,1,1,
1,0,0],[11,0,11,0,0,0,0,0,0,1,1,1,1,0],[11,0,0,0,0,0,11,0,0,1,0,1,1,1],[0,0,0,0,0,0,11,0,11,0,1,1,1,1],[0,0,11,0,0,0,0,0,11,1,1,1,0,1],[11,0,11,0,0,0,11,0,11,1,1,1,1,1]],c=[-1,1,-1,-1,-1,5,-1,7,-1,-1,-1,11],A=[7695,42588,47187,85158,86697,156568,181700,209201,231778],b="UR DR DL UL U R D L ALL".split(" ");scrMgr.reg("clko",function(y){var C=[];for(y=0;14>y;y++)C[y]=a(12);y=[];y.length=18;if(14==C.length&&18==y.length)for(var B=15,f=0;f<g[18][14];f++){var q=f;var r=14;for(var D=0,k=17;0<=k;k--)q>=
g[k][r]&&(q-=g[k][r--],D|=1<<k);r=D;q=!1;for(D=0;D<A.length;D++)if((r&A[D])==A[D]){q=!0;break}if(!q){q=[];for(D=k=0;18>D;D++)1==(r>>D&1)&&(q[k++]=D);r=[];for(k=0;14>k;k++){r[k]=[];for(D=0;14>D;D++)r[k][D]=l[q[D]][k];r[k][14]=C[k]}b:{D=r;k=D[0].length;for(var w=0;w<k-1;w++){if(-1==c[D[w][w]]){for(var E=-1,x=w+1;14>x;x++)if(-1!=c[D[x][w]]){E=x;break}if(-1==E)c:for(x=w;13>x;x++)for(var G=x+1;14>G;G++)if(-1!=c[(D[x][w]+D[G][w])%12]){d(D,G,x,w,1);E=x;break c}if(-1==E){for(x=w+1;14>x;x++)if(0!=D[x][w]){D=
-1;break b}D=w+1;break b}x=D;G=x[w];x[w]=x[E];x[E]=G}E=c[D[w][w]];for(x=w;x<k;x++)D[w][x]=D[w][x]*E%12;for(x=w+1;14>x;x++)d(D,w,x,w,12-D[x][w])}D=0}if(0==D){D=!0;for(k=14;14>k;k++)if(0!=r[k][14]){D=!1;break}if(D){D=r;for(k=D[0].length-2;0<k;k--)for(w=k-1;0<=w;w--)0!=D[w][k]&&d(D,k,w,k,12-D[w][k]);for(k=D=0;14>k;k++)0!=r[k][14]&&D++;if(D<B){for(k=0;18>k;k++)y[k]=0;for(k=0;14>k;k++)y[q[k]]=r[k][14];B=D}}}}}C="";for(B=0;9>B;B++)f=y[B],0!=f&&(q=6>=f,6<f&&(f=12-f),C+=b[B]+f+(q?"+":"-")+" ");C+="y2 ";for(B=
0;9>B;B++)f=y[B+9],0!=f&&(q=6>=f,6<f&&(f=12-f),C+=b[B]+f+(q?"+":"-")+" ");y=!0;for(B=0;4>B;B++)1==a(2)&&(C+=(y?"":" ")+b[B],y=!1);return C});return{moveArr:l}}(mathlib.rn,mathlib.Cnk);(function(){var a=[[0,1,2,3],[0,2,5,4]],g=[[0,0,0,0,2],[0,1,0,1,2]],d=new mathlib.Solver(2,3,[[0,function(d,c){var g=d>>3,b=d,l=d<<1|mathlib.getNParity(g,6)^b>>1&1;g=mathlib.setNPerm([],g,6);mathlib.acycle(g,a[c]);0==c&&(b+=2);1==c&&(l+=1);return mathlib.getNPerm(g,6)<<3|b&6|l>>1&1},5760],[0,[function(d,c){mathlib.acycle(d,a[c],1,g[c])},"o",6,-2],32]]);scrMgr.reg("lsemu",function(){do{var a=mathlib.rn(5760);var c=mathlib.rn(32)}while(0==c+a);return d.toStr(d.search([a,c],0),"UM"," 2'").replace(/ +/g,
" ")})})();(function(){function a(a,y,C){C=y=0;do"mlsll"==a?(y=mathlib.rn(11520),C=mathlib.rn(87480)):"mgmpll"==a?(y=32*g.get(mathlib.rndPerm(5,!0).concat([5])),C=243*l.get(mathlib.rndPerm(5,!0).concat([5]))):"mgmll"==a&&(y=d.set([],mathlib.rn(32)),y[0]+=y[5],y[5]=0,C=c.set([],mathlib.rn(243)),C[0]+=C[5],C[5]=0,y=32*g.get(mathlib.rndPerm(5,!0).concat([5]))+d.get(y),C=243*l.get(mathlib.rndPerm(5,!0).concat([5]))+c.get(C));while(0==y&&0==C);a=A.search([y,C],0);y=[];for(C=0;C<a.length;C++){var b=a[C];y.push(["U",
"R U","F' U"][b[0]]+["","2","2'","'"][b[1]]+[""," R'"," F"][b[0]])}return y.join(" ").replace(/ +/g," ")}var g=new mathlib.coord("p",6,-1),d=new mathlib.coord("o",6,-2),l=new mathlib.coord("p",6,-1),c=new mathlib.coord("o",6,-3),A=new mathlib.Solver(3,4,[[0,function(a,c){var b=g.set([],a>>5),l=d.set([],a&31);0==c?(mathlib.acycle(l,[0,1,2,3,4],1),mathlib.acycle(b,[0,1,2,3,4],1)):1==c?(mathlib.acycle(l,[0,1,2,3,5],1),mathlib.acycle(b,[0,1,2,3,5],1)):2==c&&(mathlib.acycle(l,[1,2,3,4,5],1,[0,0,0,0,1,
2]),mathlib.acycle(b,[1,2,3,4,5]));return g.get(b)<<5|d.get(l)},11520],[0,function(a,d){var b=l.set([],~~(a/243)),g=c.set([],a%243);0==d?(mathlib.acycle(g,[0,1,2,3,4],1),mathlib.acycle(b,[0,1,2,3,4],1)):1==d?(mathlib.acycle(g,[0,5,1,2,3],1,[2,0,0,0,0,3]),mathlib.acycle(b,[0,5,1,2,3])):2==d&&(mathlib.acycle(g,[0,2,3,4,5],1,[1,0,0,0,1,3]),mathlib.acycle(b,[0,2,3,4,5]));return 243*l.get(b)+c.get(g)},87480]]);scrMgr.reg("mlsll",a)("mgmpll",a)("mgmll",a)})();var kilominx=function(){function a(){this.perm=[];this.twst=[];for(var a=0;20>a;a++)this.perm[a]=a,this.twst[a]=0}function g(){for(var b=[],c=[],e=0;48>e;e++)b[e]=new a;for(var d=0;48>d;d+=4){b[d].faceletMove(d>>2,1,0);c[d]=b[d].hashCode();for(var f=0;3>f;f++)a.KiloMult(b[d+f],b[d],b[d+f+1]),c[d+f+1]=b[d+f+1].hashCode()}a.moveCube=b;d=[];f=[];var h=[],g=[],k=[],m=new a;for(e=0;60>e;e++)d[e]=(new a).init(m.perm,m.twst),k[e]=d[e].hashCode(),f[e]=[],h[e]=[],m.faceletMove(0,1,1),4==e%5&&m.faceletMove(4==
e%10?1:2,1,1),29==e%30&&(m.faceletMove(1,2,1),m.faceletMove(2,1,1),m.faceletMove(0,3,1));for(e=0;60>e;e++)for(var l=0;60>l;l++){a.KiloMult(d[e],d[l],m);var p=k.indexOf(m.hashCode());f[e][l]=p;h[p][l]=e}for(e=0;60>e;e++)for(g[e]=[],l=0;12>l;l++)a.KiloMult3(d[h[0][e]],b[4*l],d[e],m),p=c.indexOf(m.hashCode()),g[e][l]=p>>2;a.symCube=d;a.symMult=f;a.symMulI=h;a.symMulM=g}function d(b){this.map=new a;this.imap=new a;this.map.perm=b.slice();for(var c=0;20>c;c++)-1==b.indexOf(c)&&this.map.perm.push(c);this.imap.invFrom(this.map);
this.tmp=new a}function l(a,b,c){a=a[c][~~(b/81/24)];return 1944*a[0]+81*D[~~(b/81)%24][a[1]]+w[k[a[1]][b%81]][a[2]]}function c(a,b,c){a=a[c][~~(b/27/6)];return 162*a[0]+27*D[~~(b/27)%6][a[1]]+w[k[a[1]][b%27*3]/3][a[2]]}function A(){function c(a,b){for(var c=0;4>c;c++)a[c]=b%3,b=~~(b/3)}function e(a){for(var b=0,c=3;0<=c;c--)b=3*b+a[c];return b}A=$.noop;var d=performance.now();g();for(var f=[],h=[],m=[],l=0;24>l;l++){D[l]=[];mathlib.setNPerm(f,l,4);for(var p=0;24>p;p++){mathlib.setNPerm(h,p,4);for(var t=
0;4>t;t++)m[t]=f[h[t]];D[l][p]=mathlib.getNPerm(m,4)}}for(p=0;24>p;p++)for(k[p]=[],mathlib.setNPerm(h,p,4),l=0;81>l;l++){c(f,l);for(t=0;4>t;t++)m[t]=f[h[t]];k[p][l]=e(m)}for(p=0;81>p;p++)for(w[p]=[],c(h,p),l=0;81>l;l++){c(f,l);for(t=0;4>t;t++)m[t]=(f[t]+h[t])%3;w[p][l]=e(m)}f=new a;h=new a;for(m=0;12>m;m++)for(l=0;l<m;l++)a.KiloMult(a.moveCube[4*m],a.moveCube[4*l],f),a.KiloMult(a.moveCube[4*l],a.moveCube[4*m],h),f.isEqual(h);b();y();C();DEBUG&&console.log("[kilo] init finished, tt=",performance.now()-
d)}function b(){e=new d([5,6,7,8,9]);var b=new a,f=new a;mathlib.createMove(G,1140,function(c,d){e.set(b,c,3);a.KiloMult(b,a.moveCube[4*d],f);return e.get(f,3)},12);mathlib.createPrun(m,0,184680,8,c.bind(null,G),12,4,5);var h=c.bind(null,G);L=new mathlib.Searcher(null,function(a){return Math.max(mathlib.getPruning(m,a[0]),mathlib.getPruning(m,a[1]))},function(a,b){var c=[h(a[0],b),h(a[1],E[b])];return c[0]==a[0]&&c[1]==a[1]?null:c},12,4,9)}function y(){J=new d([13,15,16,0,1,2,3,4,10,11,12,14,17,18,
19]);var b=new a,e=new a;mathlib.createMove(u,455,function(c,d){J.set(b,c,3);a.KiloMult(b,a.moveCube[4*d],e);return J.get(e,3)},6);mathlib.createPrun(h,0,73710,8,c.bind(null,u),6,4,4);var f=c.bind(null,u);O=new mathlib.Searcher(null,function(a){return Math.max(mathlib.getPruning(h,a[0]),mathlib.getPruning(h,a[1]))},function(a,b){var c=[f(a[0],b),f(a[1],x[b])];return c[0]==a[0]&&c[1]==a[1]?null:c},6,4)}function C(){K=new d([0,1,2,3,4,10,11,14,17,18]);var b=new a,c=new a;mathlib.createMove(p,210,function(e,
d){K.set(b,e);a.KiloMult(b,a.moveCube[4*d],c);return K.get(c)},3);var e=l.bind(null,p);mathlib.createPrun(t,0,408240,14,e,3,4,6);M=new mathlib.Searcher(null,function(a){return Math.max(mathlib.getPruning(t,a[0]),mathlib.getPruning(t,a[1]),mathlib.getPruning(t,a[2]))},function(a,b){return[e(a[0],b),e(a[1],(b+1)%3),e(a[2],(b+2)%3)]},3,4)}function B(a){for(var b=[],c=0;c<a.length;c++)b.push("U R F L BL BR DR DL DBL B DBR D".split(" ")[a[c][0]]+["","2","2'","'"][a[c][1]]);return b.join(" ")}function f(b,
c){A();var d=new a,f=new a,h=new a;d.init(b.perm,b.twst);for(var g=$.now(),k=0,m=[],n=0;n<(c?12:1);n++){a.KiloMult3(a.symCube[a.symMulI[0][5*n]],d,a.symCube[5*n],f);var l=e.get(f,3);a.KiloMult3(a.symCube[a.symMulI[0][2]],f,a.symCube[2],h);var p=e.get(h,3);m.push([162*l[0]+27*l[1]+l[2],162*p[0]+27*p[1]+p[2]])}m=L.solveMulti(m,9);l=5*m[1];m=m[0];a.KiloMult3(a.symCube[a.symMulI[0][l]],d,a.symCube[l],f);d.init(f.perm,f.twst);k=a.symMult[k][l];for(p=0;p<m.length;p++)n=m[p],a.KiloMult(d,a.moveCube[4*n[0]+
n[1]],f),d.init(f.perm,f.twst),n[0]=a.symMulM[a.symMulI[0][k]][n[0]];DEBUG&&console.log("[kilo] Phase1s in ",$.now()-g,"ms",m.length,"move(s) sym=",l);g=$.now();var t=[];for(n=0;n<(c?5:1);n++)a.KiloMult3(a.symCube[a.symMulI[0][n]],d,a.symCube[n],f),l=J.get(f,3),a.KiloMult3(a.symCube[a.symMulI[0][1]],f,a.symCube[1],h),p=J.get(h,3),t.push([162*l[0]+27*l[1]+l[2],162*p[0]+27*p[1]+p[2]]);h=O.solveMulti(t,14);l=h[1];h=h[0];a.KiloMult3(a.symCube[a.symMulI[0][l]],d,a.symCube[l],f);d.init(f.perm,f.twst);k=
a.symMult[k][l];for(p=0;p<h.length;p++)n=h[p],a.KiloMult(d,a.moveCube[4*n[0]+n[1]],f),d.init(f.perm,f.twst),n[0]=a.symMulM[a.symMulI[0][k]][n[0]];DEBUG&&console.log("[kilo] Phase2s in ",$.now()-g,"ms",h.length,"move(s) sym=",l);l=K.get(d);a.KiloMult3(a.symCube[a.symMulI[0][6]],d,a.symCube[6],f);p=K.get(f);a.KiloMult3(a.symCube[a.symMulI[0][29]],d,a.symCube[29],f);g=K.get(f);d=[81*(24*l[0]+l[1])+l[2],81*(24*p[0]+p[1])+p[2],81*(24*g[0]+g[1])+g[2]];g=$.now();d=M.solve(d,14);DEBUG&&console.log("[kilo] Phase3 in ",
$.now()-g,"ms",d.length,"move(s)");for(p=0;p<d.length;p++)n=d[p],n[0]=a.symMulM[a.symMulI[0][k]][n[0]];DEBUG&&console.log("[kilo] total length: ",m.length+h.length+d.length);return B(Array.prototype.concat(m,h,d))}function q(){A();var b=new a;b.perm=mathlib.rndPerm(20,!0);for(var c=60,e=0;19>e;e++){var d=mathlib.rn(3);b.twst[e]=d;c-=d}b.twst[19]=c%3;return f(b,!0)}a.SOLVED=new a;var r=[[2,8,14],[3,13,19],[4,18,24],[0,23,29],[1,28,9],[58,45,41],[57,50,46],[56,30,51],[55,35,31],[59,40,36],[10,7,33],
[15,12,38],[20,17,43],[25,22,48],[5,27,53],[49,21,42],[54,26,47],[34,6,52],[39,11,32],[44,16,37]];a.prototype.toFaceCube=function(a){a=a||r;var b=[];mathlib.fillFacelet(a,b,this.perm,this.twst,5);return b};a.prototype.fromFacelet=function(a,b){b=b||r;for(var c=0,e=[],d=0;60>d;++d)e[d]=a[d],c+=Math.pow(16,e[d]);return 93824992236885!=c||-1==mathlib.detectFacelet(b,e,this.perm,this.twst,5)?-1:this};a.prototype.hashCode=function(){for(var a=0,b=0;20>b;b++)a=0|31*a+3*this.perm[b]+this.twst[b];return a};
a.KiloMult=function(a,b,c){for(var e=0;20>e;e++)c.perm[e]=a.perm[b.perm[e]],c.twst[e]=(a.twst[b.perm[e]]+b.twst[e])%3};a.KiloMult3=function(a,b,c,e){for(var d=0;20>d;d++)e.perm[d]=a.perm[b.perm[c.perm[d]]],e.twst[d]=(a.twst[b.perm[c.perm[d]]]+b.twst[c.perm[d]]+c.twst[d])%3};a.prototype.invFrom=function(a){for(var b=0;20>b;b++)this.perm[a.perm[b]]=b,this.twst[a.perm[b]]=(3-a.twst[b])%3;return this};a.prototype.init=function(a,b){this.perm=a.slice();this.twst=b.slice();return this};a.prototype.isEqual=
function(a){for(var b=0;20>b;b++)if(this.perm[b]!=a.perm[b]||this.twst[b]!=a.twst[b])return!1;return!0};a.prototype.setComb=function(a,b){b=b||4;for(var c=19,e=19;0<=e;e--)a>=mathlib.Cnk[e][b]?(a-=mathlib.Cnk[e][b--],this.perm[e]=b):this.perm[e]=c--,this.twst[e]=0};a.prototype.getComb=function(a){for(var b=a=a||4,c=0,e=0,d=[],f=19;0<=f;f--)this.perm[f]<b&&(c+=mathlib.Cnk[f][a--],e=3*e+this.twst[f],d[a]=this.perm[f]);return[c,mathlib.getNPerm(d,b),e]};a.prototype.faceletMove=function(a,b,c){for(var e=
this.toFaceCube(),d=[],f=0;12>f;f++){for(var h=0;5>h;h++)d[11*f+h]=e[5*f+h],d[11*f+h+5]=0;d[11*f+10]=0}mathlib.minx.doMove(d,a,b,c);for(f=0;12>f;f++)for(h=0;5>h;h++)e[5*f+h]=d[11*f+h];this.fromFacelet(e)};d.prototype.get=function(b,c){a.KiloMult3(this.imap,b,this.map,this.tmp);return this.tmp.getComb(c)};d.prototype.set=function(b,c,e){this.tmp.setComb(c,e);a.KiloMult3(this.map,this.tmp,this.imap,b)};a.CombCoord=d;var D=[],k=[],w=[],E=[0,3,4,5,1,2,8,9,10,6,7,11],x=[0,2,3,4,5,1,7,8,9,10,6,11],G=[],
u=[],p=[],m=[],h=[],t=[],e,J,K,L=null,O=null,M=null;scrMgr.reg("klmso",q);return{KiloCubie:a,getScramble:q,checkSolver:function(){A();for(var b=new a,c=new a,e=[],d=0;200>d;d++){var h=mathlib.rn(12);e.push([h,0]);a.KiloMult(b,a.moveCube[4*h],c);b.init(c.perm,c.twst)}return B(e)+"   "+f(b,!0)}}}();var ftosolver=function(){function a(a,b,c,e,d){this.cp=a&&a.slice()||[0,1,2,3,4,5];this.co=b&&b.slice()||[0,0,0,0,0,0];this.ep=c&&c.slice()||[0,1,2,3,4,5,6,7,8,9,10,11];this.uf=e&&e.slice()||[0,1,2,3,4,5,6,7,8,9,10,11];this.rl=d&&d.slice()||[0,1,2,3,4,5,6,7,8,9,10,11]}function g(b,c,e){var d=[];b=a.moveCube[e][b];for(e=0;12>e;e++)d[e]=c[b[e]];return d}function d(b,c){return a.FtoMult(b,a.moveCube[c],null)}function l(a){for(var b=0,c=-1,e=0;12>e;e++)0!=(1592>>a[e]&1)&&(0!=(56>>a[e]&1)?(-1==c&&(c=a[e]),
b+=Math.pow(16,e)*((a[e]-c+3)%3+3)):b+=Math.pow(16,e)*a[e]);return b}function c(a){for(var b=0,c=0;12>c;c++)if(6==a.uf[c]||9==a.uf[c])b|=(6==a.uf[c]?1:2)<<2*c;c=a.cp.indexOf(3);return b|=c<<25|a.co[c]<<24}function A(a){for(var b=0,c=0;12>c;c++)4>a[c]&&(b|=(3>a[c]?1:2)<<2*c);return b}function b(a){for(var b=[0,1,2,3,3,3,0,1,1,2,2,0],c=[[0,6,11],[1,7,8],[2,9,10],[3,4,5]],e=0,d=[-1,-1,-1,-1],f=0;12>f;f++){var h=b[a[f]],g=c[h].indexOf(a[f]);-1==d[h]&&(d[h]=g);e+=(4*h+(g-d[h]+3)%3)*Math.pow(16,f)}return e}
function y(a){for(var b=0,c=0;12>c;c++)b|=~~(a[c]/3)<<2*c;return b}function C(a){return String.fromCharCode.apply(null,a)}function B(a){return String.fromCharCode.apply(null,[].concat(a.cp,a.co))}function f(b){for(var c=[],e=new a,d=new a,f=0;f<b.length;f++){c[f]=1<<f;for(var h=0;h<f;h++)a.FtoMult(a.moveCube[b[f]],a.moveCube[b[h]],e),a.FtoMult(a.moveCube[b[h]],a.moveCube[b[f]],d),e.isEqual(d)&&(c[f]|=1<<h)}return c}function q(){var b=new a;L=mathlib.createMoveHash(b.ep.slice(),K,l,g.bind(null,"ep"));
O=mathlib.createMoveHash(b.rl.slice(),K,A,g.bind(null,"rl"));M=mathlib.createMoveHash(new a,K,c,d);var e=[],h=[],k=[];mathlib.createPrun(e,0,31680,14,L[0],8,2);mathlib.createPrun(h,0,261360,14,function(a,b){return 132*O[0][b][~~(a/132)]+M[0][b][a%132]},8,2);mathlib.createPrun(k,0,4181760,5,function(a,b){return 132*L[0][b][~~(a/132)]+M[0][b][a%132]},8,2);n=f(K);S=new mathlib.Searcher(null,function(a){return Math.max(mathlib.getPruning(e,a[0]),mathlib.getPruning(h,132*a[1]+a[2]),Math.min(7,mathlib.getPruning(k,
132*a[0]+a[2])))},function(a,b){return[L[0][b][a[0]],O[0][b][a[1]],M[0][b][a[2]]]},8,2,n)}function r(b){for(var e=[],d=[],f=new a,h=new a,g=[0,1,2,4,5,3,6,7,8,9,10,11],k=[0,1,9,3,4,5,6,7,8,10,2,11],m=0;m<12*H.length;m++){a.FtoMult(H[~~(m/12)],a.symCube[m%12],b,f);var n;for(n=0;12>n&&(a.FtoMult(f,a.symCube[n],h),3!=h.cp[3]||0!=h.co[3]);n++);for(var p=[],t=[],q=[],J=0;3>J;J++)p.push(L[1][l(h.ep)]),t.push(O[1][A(h.rl)]),a.permMult(k,h.ep,h.ep),a.permMult(g,h.rl,h.rl);for(J=0;9>J;J++)q.push(M[1][c(h)]),
a.permMult(T,h.uf,h.uf),2==J%3&&a.permMult(P,h.uf,h.uf);for(J=0;81>J;J++)e.push([p[~~(J/9/3)],t[~~(J/9)%3],q[J%9]]),d.push([m,n])}return[e,d]}function D(b){S||q();var c=$.now(),e=r(b),d=e[1];e=e[0];var f=[];S.solveMulti(e,12,function(c,e){for(var h=c.slice(),g=d[e].slice(),k=b,m=0;m<h.length;m++)h[m]=K[h[m][0]]+h[m][1];m=0;var n=[];for(var l=[4,5,3,2],p=[1,10,5,11],t=0;t<h.length;t++){var q=0,J=h[t]>>1,L=h[t]&1;8<=J&&(q=p[J-8],J=l[J-8]);L||(q=a.symMult[q][q]);n.push(2*a.symMulM[m][J]+L);m=a.symMult[q][m]}n=
[n,m];for(m=0;m<n[0].length;m++)l=n[0][m],h[m]=2*a.symMulM[a.symMulI[0][g[1]]][l>>1]+(l&1),k=a.FtoMult(k,a.moveCube[h[m]],null);g[1]=a.symMulI[g[1]][n[1]];k=a.FtoMult(H[~~(g[0]/12)],a.symCube[g[0]%12],k,a.symCube[g[1]],null);if(2!=~~(k.uf[6]/3)||3!=~~(k.uf[9]/3))debugger;for(;6!=k.uf[6];)a.permMult(T,k.uf,k.uf);for(;9!=k.uf[9];)a.permMult(P,k.uf,k.uf);f.push([k,h,g[0],g[1]]);return 10<=f.length});c=$.now()-c;for(e=0;e<f.length;e++)f[e].push(c);return f}function k(b){for(var c=[],e=0;6>e;e++)c[e]=
2*b.co[e];e=b.toFaceCube();mathlib.fillFacelet(Z,e,b.cp,c,9);b=new a;b.fromFacelet(e);return[].concat(b.cp,b.co,Y[1][y(b.uf)]).join(",")}function w(){var c=new a;v=mathlib.createMoveHash(c.ep.slice(),N,b,g.bind(null,"ep"));I=mathlib.createMoveHash(c.rl.slice(),N,y,g.bind(null,"rl"));Y=mathlib.createMoveHash(c.uf.slice(),N,y,g.bind(null,"uf"));Q=mathlib.createMoveHash(c,N,k,d);var e={};c=[];var h=[[],[]];for(n in Q[1]){var m=Q[1][n];var n=n.split(",");var l=parseInt(n[12]);e[960*l+m]=!0;var p=n.indexOf("0");
p=2*p+parseInt(n[p+6]);h[0][p]=m;h[1][m]=p;c.push(12*l+p)}var t=[];mathlib.createPrun(t,c,302400,14,function(a,b){return 12*Y[0][b][~~(a/12)]+h[1][Q[0][b][h[0][a%12]]]},3,2);var q=[];mathlib.createPrun(q,0,156800,14,function(a,b){return 280*I[0][b][~~(a/280)]+v[0][b][a%280]},3,2);U=f(N);X=new mathlib.Searcher(function(a){return e[960*a[3]+a[2]]},function(a){return Math.max(mathlib.getPruning(q,280*a[1]+a[0]),mathlib.getPruning(t,12*a[3]+h[1][a[2]]))},function(a,b){return[v[0][b][a[0]],I[0][b][a[1]],
Q[0][b][a[2]],Y[0][b][a[3]]]},3,2,U)}function E(){var b=new a;ea=mathlib.createMoveHash(b.ep.slice(),da,C,g.bind(null,"ep"));fa=mathlib.createMoveHash(new a,da,B,d);ja=[];na=[];mathlib.createPrun(ja,0,81,14,ea[0],4,2);mathlib.createPrun(na,0,11520,14,fa[0],4,2);ia=f(da);W=new mathlib.Searcher(function(a){return 0==a[0]&&0==a[1]},function(a){return Math.max(mathlib.getPruning(ja,a[0]),mathlib.getPruning(na,a[1]))},function(a,b){return[ea[0][b][a[0]],fa[0][b][a[1]]]},4,2,ia)}function x(b,c){for(var e=
0;e<c.length;e++)b=a.FtoMult(b,a.moveCube[c[e]],null);return b}function G(a){for(var b=[],c=0;c<a.length;c++)b[c]=R[a[c]];return b.join(" ").replace(/l/g,"BL").replace(/r/g,"BR")}function u(){}function p(){var a=new ftosolver.FtoCubie;a.ep=mathlib.rndPerm(12,!0);a.uf=mathlib.rndPerm(12,!0);a.rl=mathlib.rndPerm(12,!0);a.cp=mathlib.rndPerm(6,!0);mathlib.setNOri(a.co,mathlib.rn(32),6,-2);return ftosolver.solveFacelet(a.toFaceCube(),!0)}function m(a){var b=a.length>>1,c=new ftosolver.FtoCubie;do{var e=
mathlib.rndPerm(b,!0);var d=mathlib.setNOri([],mathlib.rn(1<<b>>1),b,-2);var f=mathlib.rndPerm(a.length,!0);var h=!0;for(var g=0;g<a.length;g++)h=h&&~~(a[f[g]]/3)==~~(a[g]/3);for(g=0;g<b;g++)h=h&&e[g]==g&&0==d[g]}while(h);for(g=0;g<b;g++)c.cp[g]=e[g],c.co[g]=d[g];for(g=0;g<a.length;g++)c.uf[a[g]]=a[f[g]];return ftosolver.solveFacelet(c.toFaceCube(),!0)}var h=[[0,54,9,63],[4,53,22,62],[8,67,35,49],[27,36,18,45],[13,44,31,71],[26,40,17,58]],t=[[1,57],[3,64],[6,51],[28,39],[21,37],[15,42],[12,55],[10,
66],[33,69],[30,46],[19,48],[24,60]],e=[2,5,7,11,14,16,20,23,25,29,32,34],J=[38,41,43,47,50,52,65,68,70,56,59,61];a.prototype.isEqual=function(a){for(var b=0;12>b;b++)if(this.ep[b]!=a.ep[b]||this.uf[b]!=a.uf[b]||this.rl[b]!=a.rl[b]||6>b&&(this.cp[b]!=a.cp[b]||this.co[b]!=a.co[b]))return!1;return!0};a.prototype.toFaceCube=function(a){var b=[];a=a||9;for(var c=[],d=0;6>d;d++)c[d]=2*this.co[d];mathlib.fillFacelet(h,b,this.cp,c,a);mathlib.fillFacelet(t,b,this.ep,[],a);mathlib.fillFacelet(e,b,this.uf,
null,a);mathlib.fillFacelet(J,b,this.rl,null,a);return b};a.prototype.fromFacelet=function(a){for(var b=0,c=[],d=0;72>d;++d)c[d]=a[d],b+=Math.pow(16,c[d]);if(2576980377!=b)return-1;a=[];if(-1==mathlib.detectFacelet(h,c,this.cp,a,9)||-1==mathlib.detectFacelet(t,c,this.ep,[],9))return-1;for(d=0;6>d;d++)this.co[d]=a[d]>>1;a=[3,3,3,3];for(d=0;12>d;d++){b=c[e[d]];if(!(0<a[b]))return-1;this.uf[d]=3*b+3-a[b];a[b]--}a=[3,3,3,3];for(d=0;12>d;d++){b=[0,1,3,2][c[J[d]]-4];if(!(0<a[b]))return-1;this.rl[d]=3*b+
3-a[b];a[b]--}if(0!=mathlib.getNParity(mathlib.getNPerm(this.uf,12),12))for(d=0;12>d;d++)this.uf[d]^=2>this.uf[d]?1:0;if(0!=mathlib.getNParity(mathlib.getNPerm(this.rl,12),12))for(d=0;12>d;d++)this.rl[d]^=2>this.rl[d]?1:0;return this};a.prototype.toString=function(a){var b=this.toFaceCube(a);return"  U8 U7 U6 U5 U4      B8 B7 B6 B5 B4\nL4   U3 U2 U1   R8  r4   B3 B2 B1   l8\nL5 L1   U0   R3 R7  r5 r1   B0   l3 l7\nL6 L2 L0  R0 R2 R6  r6 r2 r0  l0 l2 l6\nL7 L3   F0   R1 R5  r7 r3   D0   l1 l5\nL8   F1 F2 F3   R4  r8   D1 D2 D3   l4\n  F4 F5 F6 F7 F8      D4 D5 D6 D7 D8".replace(/([UFrlDBRL])([0-8])/g,
function(a,c,e){a=9*"UFrlDBRL".indexOf(c)+~~e;return"UFrlDBRL"[~~(b[a]/9)]+b[a]%9})};a.permMult=function(a,b,c){for(var e=0;e<b.length;e++)c[e]=a[b[e]]};a.FtoMult=function(){for(var b=arguments[arguments.length-1]||new a,c=0;c<arguments.length;c++){for(var e=arguments[arguments.length-1-c],d=0;6>d;d++)b.co[d]=0==c?0:e.co[b.cp[d]]^b.co[d],b.cp[d]=0==c?d:e.cp[b.cp[d]];for(d=0;12>d;d++)b.ep[d]=0==c?d:e.ep[b.ep[d]],b.uf[d]=0==c?d:e.uf[b.uf[d]],b.rl[d]=0==c?d:e.rl[b.rl[d]]}return b};(function(){var b=
new a([1,2,0,4,5,3],[0,0,0,0,0,0],[2,0,1,5,3,4,10,11,6,7,8,9],[1,2,0,7,8,6,10,11,9,4,5,3],[2,0,1,8,6,7,11,9,10,5,3,4]),c=new a([5,0,4,2,3,1],[1,1,0,1,1,0],[6,5,7,9,2,10,11,4,3,8,1,0],[5,3,4,8,6,7,2,0,1,11,9,10],[4,5,3,7,8,6,1,2,0,10,11,9]),e=a.FtoMult(b,b,null),d=a.FtoMult(c,c,null);e=a.FtoMult(e,c,b,null);var f=a.FtoMult(c,b,d,null);d=[];d[0]=new a([1,2,0,3,4,5],[0,0,0,0,0,0],[2,0,1,3,4,5,6,7,8,9,10,11],[1,2,0,3,4,5,6,7,8,9,10,11],[0,1,2,3,6,7,11,9,8,5,10,4]);d[2]=new a([4,1,2,3,5,0],[1,0,0,0,1,
0],[0,1,2,3,4,6,7,5,8,9,10,11],[0,1,2,4,5,3,6,7,8,9,10,11],[0,9,10,3,4,5,2,7,1,8,6,11]);d[4]=new a([0,5,2,1,4,3],[0,1,0,0,0,1],[0,1,2,3,10,5,6,7,8,9,11,4],[0,1,2,3,4,5,7,8,6,9,10,11],[5,3,2,11,4,10,6,7,8,9,0,1]);d[6]=new a([0,1,3,4,2,5],[0,0,1,1,0,0],[0,1,2,8,4,5,6,7,9,3,10,11],[0,1,2,3,4,5,6,7,8,10,11,9],[8,1,7,2,0,5,6,3,4,9,10,11]);d[8]=new a([0,1,2,5,3,4],[0,0,0,0,0,0],[0,1,2,4,5,3,6,7,8,9,10,11],[0,1,2,3,9,10,5,7,4,8,6,11],[1,2,0,3,4,5,6,7,8,9,10,11]);d[10]=new a([0,3,1,2,4,5],[0,1,1,0,0,0],[0,
1,10,3,4,5,6,7,8,2,9,11],[0,6,7,3,4,5,11,9,8,2,10,1],[0,1,2,4,5,3,6,7,8,9,10,11]);d[12]=new a([5,0,2,3,4,1],[1,1,0,0,0,0],[6,1,2,3,4,5,11,7,8,9,10,0],[5,3,2,8,4,7,6,0,1,9,10,11],[0,1,2,3,4,5,6,7,8,10,11,9]);d[14]=new a([2,1,4,3,0,5],[1,0,1,0,0,0],[0,8,2,3,4,5,6,1,7,9,10,11],[11,1,10,2,0,5,6,7,8,9,3,4],[0,1,2,3,4,5,7,8,6,9,10,11]);d[16]=a.FtoMult(b,d[8],null);d[18]=a.FtoMult(f,d[10],null);d[20]=a.FtoMult(c,d[6],null);d[22]=a.FtoMult(e,d[4],null);for(var h=1;24>h;h+=2)d[h]=new a,a.FtoMult(d[h-1],d[h-
1],d[h]);e=[];for(h=0;24>h;h++)e[h]=d[h].ep.join(",");f=[];var g=[],k=[],m=[],n=[],l=new a;new a;for(h=0;12>h;h++)f[h]=new a(l.cp,l.co,l.ep,l.uf,l.rl),n[h]=f[h].ep.join(","),g[h]=[],k[h]=[],l=a.FtoMult(l,b,null),2==h%3&&(l=a.FtoMult(l,c,b,null)),5==h%6&&(l=a.FtoMult(l,b,c,null));for(h=0;12>h;h++)for(b=0;12>b;b++)a.FtoMult(f[h],f[b],l),c=n.indexOf(l.ep.join(",")),g[h][b]=c,k[c][b]=h;for(h=0;12>h;h++)for(m[h]=[],b=0;8>b;b++)a.FtoMult(f[k[0][h]],d[2*b],f[h],l),c=e.indexOf(l.ep.join(",")),m[h][b]=c>>
1;a.moveCube=d;a.symCube=f;a.symMult=g;a.symMulI=k;a.symMulM=m})();for(var K=[0,2,12,14,16,18,20,22],L=null,O=null,M=null,n=null,S=null,H=[],z=0;12>z;z++)H.push(new a(a.symCube[z].cp,a.symCube[z].co,null,a.symCube[z].uf,null));var T=[0,1,2,3,4,5,7,8,6,9,10,11],P=[0,1,2,3,4,5,6,7,8,10,11,9],N=[0,12,14],v=null,I=null,Y=null,Q=null,U=null,X=null,Z=[[2,56,11,65],[5,52,23,61],[7,68,34,50],[29,38,20,47],[14,43,32,70],[25,41,16,59]],da=[8,10,12,14],ea=null,fa=null,ja=null,na=null,ia=null,W=null,R="U U' F F' r r' l l' D D' B B' R R' L L'".split(" ");
u.prototype.solveFto=function(c,e){if(!S){var d=$.now();q();w();E();DEBUG&&console.log("[ftosolver] init time:",$.now()-d)}d=D(c);X||w();var f=$.now();for(var h=[],g=0;g<d.length;g++)h.push([v[1][b(d[g][0].ep)],I[1][y(d[g][0].rl)],Q[1][k(d[g][0])],Y[1][y(d[g][0].uf)]]);g=X.solveMulti(h,25);h=g[0];var m=g[1],n=d[m],l=n[0];for(g=0;g<h.length;g++){var p=N[h[g][0]]+h[g][1];h[g]=2*a.symMulM[a.symMulI[0][n[3]]][p>>1]+(p&1);l=a.FtoMult(l,a.moveCube[p],null)}f=[l,h,n[2],n[3],m,$.now()-f];d=d[f[4]];this.sol1=
d[1].slice();this.tt1=d[4];d=d[2];this.sol2=f[1].slice();this.tt2=f[5];f[0]=a.FtoMult(H[a.symMulI[0][~~(d/12)]],f[0],null);d=f[0];ja||E();g=$.now();h=ea[1][C(d.ep)];m=fa[1][B(d)];h=W.solve([h,m],25);for(m=0;m<h.length;m++)n=da[h[m][0]]+h[m][1],h[m]=2*a.symMulM[a.symMulI[0][f[3]]][n>>1]+(n&1),d=a.FtoMult(d,a.moveCube[n],null);d=[d,h,f[2],f[3],$.now()-g];this.sol3=d[1].slice();this.tt3=d[4];d=[].concat(this.sol1,this.sol2,this.sol3);if(e){for(f=0;f<d.length;f++)d[f]^=1;d.reverse()}return G(d)};var V=
new u;scrMgr.reg("ftoso",p)("ftol3t",m.bind(null,[0,1,2,3,7,11]))("ftol4t",m.bind(null,[0,1,2,3,6,7,9,11]));return{getRandomScramble:p,solveFacelet:function(b,c){var e=new a;return-1==e.fromFacelet(b)?"FTO Solver ERROR!":V.solveFto(e,c)},FtoCubie:a,testbench:function(b){b=b||100;for(var c=[],e=0;e<b;e++){var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];var f=[];for(var h=0;200>h;h++)f.push(d[~~(Math.random()*d.length)]);d=new a;for(h=0;h<f.length;h++)d=a.FtoMult(d,a.moveCube[f[h]],null);d=[d,f];f=G(d[1].slice());
h=V.solveFto(d[0]);d=d[0];DEBUG&&console.log("scrambled state\n",d.toString(1));d=x(d,V.sol1);DEBUG&&console.log("after phase 1 ("+G(V.sol1)+"):\n",d.toString(1));d=x(d,V.sol2);DEBUG&&console.log("after phase 2 ("+G(V.sol2)+"):\n",d.toString(1));d=x(d,V.sol3);DEBUG&&console.log("after phase 3 ("+G(V.sol3)+"):\n",d.toString(1));d=d.toFaceCube();var g=!0,k=0;a:for(;8>k;k++)for(var m=1;9>m;m++)if(d[9*k+m]!=d[9*k]){g=!1;break a}g||console.log("error, FTO not solved!!!");DEBUG&&console.log(f,h);f=[V.sol1.length+
V.sol2.length+V.sol3.length,V.sol1.length,V.sol2.length,V.sol3.length,V.tt1,V.tt2,V.tt3];for(h=0;h<f.length;h++)c[h]=(c[h]||0)+f[h];console.log("AvgL: ",c[0]/(e+1))}console.log("AvgL1:",c[1]/b);console.log("AvgL2:",c[2]/b);console.log("AvgL3:",c[3]/b);console.log("AvgT1:",c[4]/b);console.log("AvgT2:",c[5]/b);console.log("AvgT3:",c[6]/b)}}}();var redi=function(){function a(a,b){mathlib.acycle(a,q[b],1)}function g(a,b){a[b]=(a[b]+1)%3}function d(a){for(var b=0,c=[],d=4,e=11;0<=e;e--)4==(a[e]&12)&&(b+=mathlib.Cnk[e][d--],c[d]=a[e]&3);return[b,mathlib.getNPerm(c,4)]}function l(a,b){for(var c=[],g=a,e=11,k=4,m=11;0<=m;m--)g>=mathlib.Cnk[m][k]?(g-=mathlib.Cnk[m][k--],c[m]=k+4):(c[m]=e--,4==(e&12)&&(e-=4));mathlib.acycle(c,f[b],1);return d(c)}function c(a,b){var c=D[b][~~(a/24)];return 24*c[0]+r[a%24][c[1]]}function A(a,b){if(4>b)return a;var c=
w.set([],a);c[b-4]=(c[b-4]+1)%3;return w.get(c)}function b(a){for(var b=[],c=0;c<a.length;c++)b.push("FLBRflbr"[a[c][0]]+["","'"][a[c][1]]);return b.join(" ")}function y(){if(!G){for(var b=[],d=[],f=[],t=0;24>t;t++){r[t]=[];mathlib.setNPerm(b,t,4);for(var e=0;24>e;e++){mathlib.setNPerm(d,e,4);for(var q=0;4>q;q++)f[q]=b[d[q]];r[t][e]=mathlib.getNPerm(f,4)}}w=new mathlib.coord("o",4,3);mathlib.createMove(k,81,A,8);mathlib.createMove(D,495,l,8);mathlib.createPrun(x,0,81,4,k,8,2);mathlib.createPrun(E,
1656,11880,8,c,8,2);G=new mathlib.Searcher(null,function(a){return Math.max(mathlib.getPruning(x,a[0]),mathlib.getPruning(E,a[1]))},function(a,b){var e=[k[b][a[0]],c(a[1],b)];return e[0]==a[0]&&e[1]==a[1]?null:e},8,2);u=new mathlib.Solver(4,2,[[0,[g,"o",4,3],81],[0,[a,"p",8,-1],20160]])}}function C(a,c){var h=d(a),g=w.get(c.slice(4));h=G.solve([g,24*h[0]+h[1]],15);for(g=0;g<h.length;g++){var e=h[g][0],k=h[g][1]+1;mathlib.acycle(a,f[e],k);c[e]=(c[e]+k)%3}e=[];for(g=0;8>g;g++)k=4>g?g:g+4,e[g]=4>a[k]?
a[k]:a[k]-4;g=mathlib.getNPerm(e,8,-1);e=w.get(c);g=u.search([e,g],0);return b([].concat(h,g))}function B(){y();for(var a=mathlib.rndPerm(12,!0),b=[],c=0;8>c;c++)b[c]=mathlib.rn(3);return C(a,b)}var f=[[1,0,8],[2,1,9],[3,2,10],[0,3,11],[4,5,8],[5,6,9],[6,7,10],[7,4,11]],q=[[1,0,4],[2,1,5],[3,2,6],[0,3,7]],r=[],D=[],k=[],w=null,E=[],x=[],G=null,u=null;scrMgr.reg("rediso",B);return{solveRedi:C,getRandomScramble:B,testbench:function(){y();for(var a=[],c=0;20>c;c++)a.push([~~(8*Math.random()),~~(2*Math.random())]);
var d=[0,1,2,3,4,5,6,7,8,9,10,11],g=[0,0,0,0,0,0,0,0];for(c=0;c<a.length;c++){var e=a[c][0],k=a[c][1]+1;mathlib.acycle(d,f[e],k);g[e]=(g[e]+k)%3}console.log(b(a)+"   "+C(d,g))}}}();(function(a,g,d){function l(b,c,d,f,e){f=f||[""];for(var h=0,k,m=[],l=0;l<d;l++){do k=e?mathlib.rndProb(e):a(b.length);while(h>>k&1);m.push(b[k]+g(f));h&=~c[k];h|=1<<k}return m.join(" ")}function c(a){return" "+g([a+"=0",a+"+1",a+"+2",a+"+3",a+"+4",a+"+5",a+"+6",a+"-5",a+"-4",a+"-3",a+"-2",a+"-1"])+" "}function A(){return g(["U","d"])+g(["U","d"])}function b(b,c,d,f){for(var e=[[0,-1],[1,0],[-1,0],[0,1]],h=0,g=3,k,m=5,l=[],n=0;n<c;n++){do k=a(4);while(0>h+e[k][0]||3<h+e[k][0]||0>g+e[k][1]||3<g+e[k][1]||
3==k+m);h+=e[k][0];g+=e[k][1];0<l.length&&l[l.length-1][0]==k?l[l.length-1][1]++:l.push([k,1]);m=k}c="";for(n=0;n<l.length;n++)if(e=b?l[n][0]:3-l[n][0],e=(d?"":"ULRD").charAt(e),f)c+=e+(1==l[n][1]?"":l[n][1])+" ";else for(h=0;h<l[n][1];h++)c+=e+" ";return c}function y(a,b){var c="",d,e;for(d=0;d<b;d++){c+="  ";for(e=0;e<a;e++)c+=(0==e%2?"R":"D")+g(["++","--"])+" ";c+="U"+(c.endsWith("-- ")?"'\\n":"~\\n")}return c}function C(a,b){var c="",d,e;for(d=0;d<b;d++){c+=" ";for(e=0;e<a/2;e++)c+=g(["+",
"-"])+g(["+","-"])+" ";c+="U"+g(["'\\n","~\\n"])}return c}function B(b){var c="",d,f;for(d=0;d<Math.ceil(b/10);d++){c+="  ";for(f=0;10>f;f++)c+=(0==f%2?"Rr".charAt(a(2)):"Dd".charAt(a(2)))+g(["+ ","++","- ","--"])+" ";c+="y"+g(x)+"\\n"}return c}function f(a,b){G=[];var c;r(1,a,b);var d="";for(c=0;c<G[0].length;c++){var e=G[0][c];d=7==e[0]?d+"/":d+(" ("+e[0]+","+e[1]+")")}return d}function q(a){G=[];var b;r(2,0,a);var c=G[0],d=G[1],e="";7==c[0][0]&&(c=[[0,0]].concat(c));7==d[0][0]&&(d=[[0,0]].concat(d));
for(b=0;b<a;b++)e+="("+c[2*b][0]+","+d[2*b][0]+","+d[2*b][1]+","+c[2*b][1]+")/ ";return e}function r(b,c,d){for(var f=0;f<b;f++){u=[1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0];G[f]=[];for(var e=0;e<d;){var h=a(12)-5,g=2==c?0:a(12)-5,k=(0==h?0:1)+(0==g?0:1);(e+k<=d||1!=c)&&(0<k||0==e)&&D(h,g)&&(1==c&&(e+=k),0<k&&(G[f][G[f].length]=[h,g]),e<d||1!=c)&&(e++,G[f][G[f].length]=[7,0],D(7,0))}}}function D(a,b){var c;if(7==a){for(c=0;6>c;c++)mathlib.circle(u,c+6,c+12);return!0}if(u[(17-a)%12]||u[(11-
a)%12]||u[12+(17-b)%12]||u[12+(11-b)%12])return!1;var d=u.slice(0,12);var e=u.slice(12,24);for(c=0;12>c;c++)u[c]=d[(12+c-a)%12],u[c+12]=e[(12+c-b)%12];return!0}function k(b){for(var c=[],f=0;f<b;f++)c.push(d([["R"],["L"]],["","'"],3+a(3)));return c.join(" x ")}function w(b,c){for(var d=0,f=[],e=0;4>e;e++)f[e]=a(3),0<f[e]?(f[e]="ulrb".charAt(e)+["! ","' "][f[e]-1],d++):f[e]="";return b.substr(0,b.length-c*d)+" "+f.join("")}var E=["","2","'"],x=["","2","'","2'"],G=[],u=[];scrMgr.reg("444yj",function(b,
c){var d=[["U","D"],["R","L","r"],["F","B","f"]],f=[],e=0,g,k="";var m=-1;for(g=0;g<c;g++){var l=0;do{var p=a(d.length),n=a(d[p].length);if(p!=m||0==f[n]){if(p==m)f[n]=1,l=a(E.length);else{for(m=0;m<d[p].length;m++)f[m]=0;m=p;f[n]=1;l=a(E.length)}0==p&&0==n&&(e=(e+4+l)%4);k=1==p&&2==n?0==e||3==e?k+("l"+E[l]+" "):k+("r"+E[l]+" "):2==p&&2==n?0==e||1==e?k+("b"+E[l]+" "):k+("f"+E[l]+" "):k+(d[p][n]+E[l]+" ");l=1}}while(0==l)}return k});scrMgr.reg("bic",function(b,c){function d(a){var b=[],c,d,f,h=0;for(c=
0;9>c;c++){for(d=f=0;d<b.length;d++)b[d]==g[e[a][c]]&&(f=1);0==f&&(b[b.length]=g[e[a][c]],0==g[e[a][c]]&&(h=1))}return 5==b.length&&1==h}function f(a,b){for(var c=0;c<b;c++){var d=g[e[a][0]];g[e[a][0]]=g[e[a][6]];g[e[a][6]]=g[e[a][4]];g[e[a][4]]=g[e[a][2]];g[e[a][2]]=d;d=g[e[a][7]];g[e[a][7]]=g[e[a][5]];g[e[a][5]]=g[e[a][3]];g[e[a][3]]=g[e[a][1]];g[e[a][1]]=d}}for(var e=[[0,1,2,5,8,7,6,3,4],[6,7,8,13,20,19,18,11,12],[0,3,6,11,18,17,16,9,10],[8,5,2,15,22,21,20,13,14]],g=[1,1,2,3,3,2,4,4,0,5,6,7,8,
9,10,10,5,6,7,8,9,11,11],k="",m=[],l,p,n,q;m.length<c;){l=[1,1,1,1];for(p=0;4>p;p++)1!=l[p]||d(p)||(l[p]=0);for(p=0;0==p;)n=a(4),1==l[n]&&(q=a(3)+1,f(n,q),p=1);m[m.length]=[n,q];2<=m.length&&m[m.length-1][0]==m[m.length-2][0]&&(m[m.length-2][1]=(m[m.length-2][1]+m[m.length-1][1])%4,m=m.slice(0,m.length-1));1<=m.length&&0==m[m.length-1][1]&&(m=m.slice(0,m.length-1))}for(l=0;l<c;l++)k+="UFLR"[m[l][0]]+E[m[l][1]-1]+" ";return k});scrMgr.reg("15p 15pm 15pat clkwca clkwcab clknf clk clkc clke giga mgmo mgmp mgmc klmp heli helicv heli2x2 heli2x2g redi redim pyrm prcp mpyr r3 r3ni sq1h sq1t sq2 ssq1t bsq ctico -1 333noob lol".split(" "),
function(p,m){var h="";switch(p){case "15p":return b(!1,m);case "15pm":return b(!0,m);case "15pat":return b(!1,m,!0,!0);case "clkwca":case "clkwcab":case "clknf":var t="0+ 1+ 2+ 3+ 4+ 5+ 6+ 1- 2- 3- 4- 5-".split(" ");h="clknf"==p?"UR? DR? DL? UL? U(?,?) R(?,?) D(?,?) L(?,?) ALL? all?????":"UR? DR? DL? UL? U? R? D? L? ALL? y2 U? R? D? L? ALL?????";for(var e=0;14>e;e++)h=h.replace("?",g(t));"clkwca"==p&&(h=h.slice(0,-4));return h.replace("?",g([""," UR"])).replace("?",g([""," DR"])).replace("?",g(["",
" DL"])).replace("?",g([""," UL"]));case "clk":return"UU"+c("u")+"dU"+c("u")+"dd"+c("u")+"Ud"+c("u")+"dU"+c("u")+"Ud"+c("u")+"UU"+c("u")+"UU"+c("u")+"UU"+c("u")+"dd     "+A()+"\\ndd"+c("d")+"dU"+c("d")+"UU"+c("d")+"Ud"+c("d")+"UU     UU     Ud     dU     UU     dd"+c("d")+A();case "clkc":h="";for(e=0;4>e;e++)h+="("+(a(12)-5)+", "+(a(12)-5)+") / ";for(e=0;6>e;e++)h+="("+(a(12)-5)+") / ";for(e=0;4>e;e++)h+=g(["d","U"]);return h;case "clke":return"UU"+c("u")+"dU"+c("u")+"dU"+c("u")+"UU"+c("u")+"UU"+
c("u")+"UU"+c("u")+"Ud"+c("u")+"Ud"+c("u")+"dd"+c("u")+"dd     "+A()+"\\nUU     UU     dU"+c("d")+"dU     dd"+c("d")+"Ud     Ud"+c("d")+"UU     UU"+c("d")+"dd"+c("d")+A();case "giga":return B(m);case "mgmo":return l("F B U D L DBR DL BR DR BL R DBL".split(" "),[1364,2728,1681,2402,2629,1418,2329,1574,1129,2198,421,602],m,x);case "mgmp":return y(10,Math.ceil(m/10));case "mgmc":return C(10,Math.ceil(m/10));case "klmp":return y(10,Math.ceil(m/10));case "heli":case "helicv":return l("UF UR UB UL FR BR BL FL DF DR DB DL".split(" "),
[154,53,106,197,771,1542,3084,2313,2704,1328,2656,1472],m);case "heli2x2":h=l("UR UF UL UB DR DF DL DB FR FL BL BR UFR UFL UBL UBR DFR DFL DBL DBR U R F".split(" "),[40931328,24129536,55599104,53526528,48824320,31653888,63307776,61603840,15798272,30547968,60047360,45645824,7340291,22020614,51381260,36702217,14680368,29360736,58721472,44042384,56688399,47815099,28521335,57610224,47605486,29150429],m,null,[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3]).split(" ");for(e=0;e<h.length;e++)3==h[e].length?
h[e]+=mathlib.rndEl(["","'"]):1==h[e].length&&(h[e]+=mathlib.rndEl(["","'","2"]));return h.join(" ");case "heli2x2g":t=-1;h=[];var J="UFR UFL UBL UBR DFR DFL DBL DBR".split(" "),r="UF UL UB UR FR FL BL BR DF DL DB DR".split(" "),u=0;for(e=0;e<m;e++){do var G=mathlib.rndPerm(3);while(G[0]==t);t=G[2];for(var D=mathlib.rndPerm(8).slice(0,4).sort(),n=mathlib.rndPerm(12).slice(0,mathlib.rn(2)+6).sort(function(a,b){return a-b}),E=[],H=0;3>H;H++)E.push("URF".charAt(G[H])+mathlib.rndEl([" ","2","'"]));E.push("");
for(H=0;H<D.length;H++)E.push(J[D[H]]+mathlib.rndEl([" ","'"]));E.push("");for(H=0;H<n.length;H++)E.push(r[n[H]]);h[e]=E.join(" ");u=Math.max(u,h[e].length)}for(e=0;e<h.length;e++)h[e]=h[e].padEnd(u,"~");return h.join("\\n");case "redi":return l("LRFBlrfb".split(""),[28,44,67,131,193,194,52,56],m,["","'"]);case "redim":return k(m);case "pyrm":return h=d([["U"],["L"],["R"],["B"]],["!","'"],m),w(h,3).replace(/!/g,"");case "prcp":return y(10,Math.ceil(m/10));case "mpyr":return h=l("U! L! R! B! Uw Lw Rw Bw".split(" "),
[224,208,176,112,238,221,187,119],m,["!","'"]),w(h,4).replace(/!/g,"");case "r3":for(e=0;e<m;e++)h+=(0==e?"":"\\n")+(e+1)+") ${333}";return scrMgr.formatScramble(h);case "r3ni":for(e=0;e<m;e++)h+=(0==e?"":"\\n")+(e+1)+") ${333ni}";return scrMgr.formatScramble(h);case "sq1h":return f(1,m);case "sq1t":return f(0,m);case "sq2":for(e=0;e<m;)if(t=a(12)-5,J=a(12)-5,0!=t||0!=J)e++,h+="("+t+","+J+")/ ";return h;case "ssq1t":return q(m);case "bsq":return f(2,m);case "ctico":return l("UL UR UrUl FlFr LBl RBr".split(" "),
[63,63,63,63,63,63],m,x);case "-1":for(e=0;e<m;e++)h+=String.fromCharCode(32+a(224));return h+"Error: subscript out of range";case "333noob":return h=d(SCRAMBLE_NOOBST,SCRAMBLE_NOOBSS.split("|"),m).replace(/t/,"T"),h.substr(0,h.length-2)+".";case "lol":return h=d([["L"],["O"]],0,m),h.replace(/ /g,"")}console.log("Error")})})(mathlib.rn,mathlib.rndEl,scrMgr.mega);var tools=function(){function a(a){return/^222(so|[236o]|eg[012]?|tc[np]|lsall|nb)$/.exec(a)?"222":/^(333(oh?|ni|f[mt]|drud|custom)?|(z[zb]|[coep]|c[om]|2g|ls|tt)?ll|lse(mu)?|2genl?|3gen_[LF]|edges|corners|f2l|lsll2|(zb|w?v|eo)ls|roux|RrU|half|easyx?c|eoline|sbrx|mt(3qb|eole|tdr|6cp|l5ep|cdrll)|nocache_333(bld|pat)spec)$/.exec(a)?"333":/^(444([mo]|wca|yj|bld|ctud|ctrl|ud3c|l8e|rlda|rlca|edo|cto|e?ll)?|4edge|RrUu)$/.exec(a)?"444":/^(555(wca|bld)?|5edge)$/.exec(a)?"555":/^(666(si|[sp]|wca)?|6edge)$/.exec(a)?
"666":/^(777(si|[sp]|wca)?|7edge)$/.exec(a)?"777":/^888$/.exec(a)?"888":/^999$/.exec(a)?"999":/^101010$/.exec(a)?"101010":/^111111$/.exec(a)?"111111":/^cubennn$/.exec(a)?"cubennn":/^pyr(s?[om]|l4e|nb|4c)$/.exec(a)?"pyr":/^skb(s?o|nb)?$/.exec(a)?"skb":/^sq(rs|1pll|1[ht]|rcsp)$/.exec(a)?"sq1":/^clk(wcab?|o|nf)$/.exec(a)?"clk":/^(mgmp|mgmo|mgmc|minx2g|mlsll|mgmpll|mgmll)$/.exec(a)?"mgm":/^(klmso|klmp)$/.exec(a)?"klm":/^(fto|fto(so|l[34]t))$/.exec(a)?"fto":/^(mpyr|mpyrso)$/.exec(a)?"mpyr":/^15p(at|ra?p?)?$/.exec(a)?
"15p":/^15p(rmp|m)$/.exec(a)?"15b":/^8p(at|ra?p?)?$/.exec(a)?"8p":/^8p(rmp|m)$/.exec(a)?"8b":/^heli2x2g?$/.exec(a)?"heli2x2":/^prc[po]$/.exec(a)?"prc":/^redi(m|so)?$/.exec(a)?"redi":a}var g=["-","",0],d=execMain(function(){function a(b,c){if(-1==b)for(var d=0;d<kernel.getProp("NTools");d++)a(d,c);else if(!D){for(d in p)p[d]();k[b].empty()}else for(d in p)if(d==w[b])p[d](k[b],c)}function c(a,b){for(var c in p)if(c==w[a])p[c](void 0,b)}function d(b,d){DEBUG&&console.log("[func select]",b,d);kernel.blur();
for(var f=void 0===b?4:b+1,e=void 0===b?0:b;e<f;e++){var h=x[e].getSelected();w[e]!=h&&(c(e,"property"),w[e]=h,kernel.setProp("toolsfunc",JSON.stringify(w)),a(e,"property"))}}function B(b,f){if("property"==b)if(/^(img|col).*/.exec(f[0]))for(var h=0;h<kernel.getProp("NTools");h++)"image"==w[h]&&a(h,b);else if("NTools"==f[0])for(h=0;4>h;h++)h<f[1]?(r[h].show(),""==k[h].html()&&a(h,b)):(r[h].hide(),c(h,b));else if("toolHide"==f[0]){h=!f[1];for(var e=0;4>e;e++)h?E[e].show():E[e].hide()}else if("toolsfunc"==
f[0]&&"session"==f[2]){e=JSON.parse(f[1]);for(h=0;4>h;h++)x[h].loadVal(e[h]);d()}else"toolPos"==f[0]&&($("html").removeClass("toolf toolt"),-1!="ft".indexOf(f[1])&&$("html").addClass("tool"+f[1]));else if("scramble"==b||"scrambleX"==b)g=f,kernel.setProp("isTrainScr",!!l.exec((g||[])[0])),a(-1,b);else if("button"==b&&"tools"==f[0])if(D=f[1])for(h=0;h<kernel.getProp("NTools");h++)D&&""==k[h].html()&&a(h,b);else a(-1,b)}function f(a){$(a.target).is("input,textarea,select,.click")||kernel.setProp("toolHide",
!1)}function q(a){a=$(this);if("a"==a.attr("data"))a.prevAll().show(),a.prev().hide(),a.hide();else if("n"==a.attr("data")){var b=a.prevAll(":hidden");b.last().show();1==b.length&&(a.next().hide(),a.hide())}}for(var r=[],D=!1,k=[],w=["image","stats","cross"],E=[],x=[],G=[],u=0;4>u;u++)k[u]=$("<div />"),E[u]=$("<span />"),x[u]=new kernel.TwoLvMenu(G,d.bind(null,u),$("<select />"),$("<select />")),r[u]=$("<div />").css("display","inline-block");$(function(){kernel.regListener("tools","property",B,/^(?:img(Size|Rep)|image|toolsfunc|NTools|col(?:cube|pyr|skb|sq1|mgm|fto|clk|15p|ico)|toolHide|toolPos)$/);
kernel.regListener("tools","scramble",B);kernel.regListener("tools","scrambleX",B);kernel.regListener("tools","button",B,/^tools$/);for(var a=$('<div id="toolsDiv"/>'),b=0;4>b;b++)k[b].click(f),E[b].append("<br>",TOOLS_SELECTFUNC,x[b].select1,x[b].select2),r[b].append(k[b],E[b]).appendTo(a),1==b&&a.append("<br>");kernel.regProp("tools","toolPos",1,PROPERTY_TOOLPOS,["b",["b","f","t"],PROPERTY_TOOLPOS_STR.split("|")],1);kernel.regProp("tools","solSpl",0,PROPERTY_HIDEFULLSOL,[!1]);kernel.regProp("tools",
"imgSize",2,PROPERTY_IMGSIZE,[15,5,50],1);kernel.regProp("tools","imgRep",0,PROPERTY_IMGREP,[!0],1);kernel.regProp("tools","NTools",2,PROPERTY_NTOOLS,[1,1,4],1);b=JSON.stringify(["image","stats","cross","distribution"]);kernel.regProp("tools","toolsfunc",5,PROPERTY_TOOLSFUNC,[b],1);kernel.regProp("tools","isTrainScr",-6,"Is Train Scramble",[!1],0);var c=kernel.getProp("toolsfunc",b);-1==c.indexOf("[")&&(c=b.replace("image",c),kernel.setProp("toolsfunc",c));w=JSON.parse(c);kernel.addWindow("tools",
BUTTON_TOOLS,a,!1,!0,6);kernel.regProp("ui","toolHide",-1,"Hide Tools Selector",[!1])});var p={};return{regTool:function(a,b,c){DEBUG&&console.log("[regtool]",a,b);p[a]=c;b=b.split(">");if(2==b.length){c=-1;for(var d=0;d<G.length;d++)if(G[d][0]==b[0]&&$.isArray(G[d][1])){c=d;break}-1!=c?G[c][1].push([b[1],a]):G.push([b[0],[[b[1],a]]])}else G.push([b[0],a]);for(d=0;4>d;d++)x[d].reset(w[d])},getSolutionSpan:function(a){for(var b=$("<span />"),c=0;c<a.length;c++)b.append('<span style="display:none;">&nbsp;'+
a[c]+"</span>");kernel.getProp("solSpl")?(b.append($('<span class="click" data="n">[+1]</span>').click(q)),b.append($('<span class="click" data="a">['+a.length+"f]</span>").click(q))):b.children().show();return b}}}),l=/^((z[zb]|[coep]|c[om]|2g|ls|tt)?ll|lse(mu)?|2genl?|3gen_[LF]|333drud|f2l|lsll2|(zb|w?v|eo)ls|roux|eoline|sbrx|mt(3qb|eole|tdr|6cp|l5ep|cdrll)|222(eg[012]?|tc[np]|lsall))$/,c={getCurScramble:function(){return g},getCurPuzzle:function(){return a(g[0])},scrambleType:function(a){return null==
a.match(/^([\d]?[xyzFRUBLDfrubldSME]([w]|&sup[\d];)?[2']?\s*)+$/)?"-":a.match(/^([xyzFRU][2']?\s*)+$/)?"222o":a.match(/^([xyzFRUBLDSME][2']?\s*)+$/)?"333":a.match(/^(([xyzFRUBLDfru]|[FRU]w)[2']?\s*)+$/)?"444":a.match(/^(([xyzFRUBLDfrubld])[w]?[2']?\s*)+$/)?"555":"-"},puzzleType:a,carrot2poch:function(a){return a.replace(/([+-])([+-]) /g,function(a,b,c){return"R"+b+b+" D"+c+c+" "})},isCurTrainScramble:function(a){return!!l.exec((a||g||[])[0])},isPuzzle:function(b,c){c=c||g;var d=a(c[0]);c=c[1];return d?
d==b:"222"==b?c.match(/^([xyzFRU][2']?\s*)+$/):"333"==b?c.match(/^([xyzFRUBLDSME][2']?\s*)+$/):"444"==b?c.match(/^(([xyzFRUBLDfru]|[FRU]w)[2']?\s*)+$/):"555"==b?c.match(/^(([xyzFRUBLDfrubld])[w]?[2']?\s*)+$/):"skb"==b?c.match(/^([RLUB]'?\s*)+$/):"pyr"==b?c.match(/^([RLUBrlub]'?\s*)+$/):"sq1"==b?c.match(/^$/):"fto"==b?c.match(/^(([FRUBLD]|(?:BL)|(?:BR))[']?\s*)+$/):!1}},A;for(A in c)d[A]=c[A];return d}();var image=function(){function a(b,c){var d=c[0];"input"==d&&(d=tools.scrambleType(c[1]));d=tools.puzzleType(d);var g=E.indexOf(d),h=0;if(0<=g)h=f.draw(b,g+2,c[1]);else if("cubennn"==d)f.draw(b,c[2],c[1]);else if(poly3d.udpolyre.exec(d))h=0,/^prc|giga|mgm|klm$/.exec(d)?h=3:"fto"==d?h=255:"ctico"==d&&(h=1048575),h=k(b,d,c[1],h,"klm"==d?.1:0);else if("sq1"==d||"sq2"==d)h=B.scrImage(b,c[1],"sq2"==d);else if("clk"==d)C(b,c[1]);else if("15b"==d||"15p"==d)w(b,d[2],4,c[1]);else if("8b"==d||"8p"==d)w(b,d[1],
3,c[1]);else if(/^r(3(ni)?|23\d+w?|mngf)$/.exec(d)){var l=[];c[1].replaceAll(/(?<=^|\n)\s*(\d+|3oh|pyr|skb|sq1|clk|mgm)\)\s*([^\0]*?)\s*(?=\n.*\)|$)/g,function(a,b,c){a=d.startsWith("r3")?"333":"rmngf"==d?b.replace("3oh","333").padEnd(3,b):E[l.length];l.push([a,c,0])});var e=Math.ceil(Math.sqrt(l.length));g=Math.ceil(l.length/e);b.width=240*g;b.height=150*e;for(e=0;e<l.length;e++){var q=e%g*240,r=150*~~(e/g),u=new $.svg;a(u,l[e]);b.addElem(u.renderGroup(q,r,240,150));b.addText((e+1).toString(),[q,
r],{font:"40px Arial",fill:kernel.getProp("col-font")},1)}}else return-1;return h}function g(b,c){var f=new $.svg,g=a(f,b);if(-1==g)return!1;if(!c)return f;var h=Math.min(1.6/f.width,1/f.height)*kernel.getProp("imgSize")*.6;d.attr("src","data:image/svg+xml;base64,"+btoa(f.render()));d.width(f.width*h+"em");d.height(f.height*h+"em");if(g&&kernel.getProp("imgRep")){for(f=0;f<g[1].length;f++)g[1][f]=g[1][f]+"@"+1E3*(f+1);g[1]=g[1].join(" ");d.click(function(a){replay.popupReplay.apply(null,a)}.bind(null,
g))}else d.click(function(a,b){var c=$('<img style="display:block;">');c.attr("src","data:image/svg+xml;base64,"+btoa(a.render()));c.css("object-fit","contain");kernel.showDialog([c,$.noop,void 0,$.noop],"share",TOOLS_IMAGE)}.bind(null,f,h));return!0}var d,l=Math.sqrt(3)/2,c=Math.PI,A=$.ctxRotate,b=$.ctxTransform,y=$.ctxDrawPolygon,C=function(){var a=/([UD][RL]|ALL|[UDRLy]|all)(?:(\d[+-]?)|\((\d[+-]?),(\d[+-]?)\))?/,d="UR DR DL UL U R D L ALL".split(" "),f=["#f00","#37b","#5cf","#ff0","#850"];return function(g,
h){f=kernel.getProp("colclk").match(x);for(var k=h.split(/\s+/),e=clock.moveArr,l=9,m=[0,0,0,0],p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0],q=0;q<k.length;q++){var r=a.exec(k[q]);if(r)if("y2"==r[0])l=9-l;else{var n=d.indexOf(r[1])+l;if(void 0==r[2]&&void 0==r[3])m[n%9]=1;else{var u=[];if("all"==r[1]){var H=~~r[2][0]*("+"==r[2][1]?-1:1)+12;u.push(17-l,H)}else r[2]?H=~~r[2][0]*("+"==r[2][1]?1:-1)+12:(H=~~r[3][0]*("+"==r[3][1]?1:-1)+12,u.push(n,H),H=~~r[4][0]*("+"==r[4][1]?-1:1)+12,n=(10-n%9)%4+13-l),u.push(n,H);
for(r=0;r<u.length;r+=2)for(n=0;14>n;n++)p[n]=(p[n]+e[u[r]][n]*u[r+1])%12}}}p=[p[0],p[3],p[6],p[1],p[4],p[7],p[2],p[5],p[8],12-p[2],p[10],12-p[8],p[9],p[11],p[13],12-p[0],p[12],12-p[6]];m=[m[3],m[2],m[0],m[1],1-m[0],1-m[1],1-m[3],1-m[2]];g.width=375;g.height=180;k=[10,30,50];e=[10,30,50,75,95,115];for(u=0;18>u;u++){q=(u+l)%18;r=g;n=[f[1],f[2]][~~(u/9)];H=[3,e[~~(q/3)],k[q%3]];var z=b(A([[1,1,0,-1,-1,-1,1,0],[0,-1,-8,-1,0,1,1,0]],p[u]/6*c),H);q=z[0];z=z[1];r.addElem('<circle cx="'+q[7]+'" cy="'+z[7]+
'" r="'+9*H[0]+'" style="fill:'+n+'" />');n=[];n.push("M"+q[0]+" "+z[0]);n.push("Q"+q[1]+" "+z[1]+","+q[2]+" "+z[2]);n.push("Q"+q[3]+" "+z[3]+","+q[4]+" "+z[4]);n.push("C"+q[5]+" "+z[5]+","+q[6]+" "+z[6]+","+q[0]+" "+z[0]);r.addElem('<path d="'+n.join(" ")+'" style="fill:'+f[3]+";stroke:"+f[0]+'" />')}k=[20,40];e=[20,40,85,105];for(q=0;8>q;q++)l=g,p=[f[4],f[3]][m[q]],u=[3,e[~~(q/2)],k[q%2]],r=b([[0],[0]],u),l.addElem('<circle cx="'+r[0][0]+'" cy="'+r[1][0]+'" r="'+3*u[0]+'" style="fill:'+p+';stroke:#000;" />')}}(),
B=function(){function a(a,b){0!=a[0]&&b.doMove(a[0]);0!=a[1]&&b.doMove(-a[1]);0!=a[2]&&b.doMove(0)}function d(a,b,d,f,k){for(var l=0;l<(k?12:24);l++){var n=12>l?[45,g,g]:[45,3*g,g],m=b.pieceAt(l),p=d["UD"[8<=m?1:0]],t=-(12>l?l-1:l-6)*c/6,u=-(12>l?l:l-5)*c/6;1==m%2?f?(u=f.pieceAt(l)&1,t+=u?0:c/6,y(a,d["RBBLLFFRRFFLLBBR"[m-u]],A(u?e:q,t),n),y(a,p,A(u?w:E,t),n)):(y(a,d["RBBLLFFRRFFLLBBR"[m-1]],A(e,t),n),y(a,d["RBBLLFFRRFFLLBBR"[m]],A(q,t),n),y(a,p,A(L,t),n),l++):(y(a,d["R-B-L-F-F-L-B-R-"[m]],A(h,u),
n),y(a,p,A(r,u),n))}}var f=l+1,g=f*Math.sqrt(2),h=[[0,-.5,.5],[0,-f,-f]],k=[[0,-.5,-f,-f],[0,-f,-f,-.5]],e=[[0,-.5,-f],[0,-f,-f]],q=[[0,-f,-f],[0,-f,-.5]],r=b(h,[.66,0,0]),L=b(k,[.66,0,0]),w=b(e,[.66,0,0]),E=b(q,[.66,0,0]),n={U:"#ff0",R:"#f80",F:"#0f0",D:"#fff",L:"#f00",B:"#00f"},D=/^\s*\(\s*(-?\d+),\s*(-?\d+)\s*\)\s*$/;return{scrImage:function(b,c,e){var h=kernel.getProp("colsq1").match(x);n={U:h[0],R:h[1],F:h[2],D:h[3],L:h[4],B:h[5]};h=new sq1.SqCubie;var k=null;e&&(k=new sq1.SqCubie,k.ul=k.ur=
65552,k.dl=k.dr=1048832);c=c.split("/");var m=[];for(e=0;e<c.length;e++)if(/^\s*$/.exec(c[e]))m.push([0,0,1]);else{var p=D.exec(c[e]);m.push([(~~p[1]+12)%12,(~~p[2]+12)%12,1])}m.push([0,0,1]);for(e=0;e<m.length;e++)a(m[e],h),k&&a(m[e],k);b.width=180*g;b.height=90*g;for(e=0;2>e;e++)p=0==e?[45,g,g+f]:[45,3*g,g-f-.7],y(b,n.L,[[-f,-f,-.5,-.5],[0,.7,.7,0]],p),0==h.ml?y(b,n.L,[[f,f,-.5,-.5],[0,.7,.7,0]],p):y(b,n.R,[[l,l,-.5,-.5],[0,.7,.7,0]],p);d(b,h,n,k);b=[];for(e=0;e<c.length;e++)/^\s*$/.exec(c[e])||
(p=D.exec(c[e]),~~p[1]&&b.push("("+p[1]+",0)"),~~p[2]&&b.push("(0,"+p[2]+")")),b.push("/");"/"==b[b.length-1]?b.pop():b.push("/");return["~",b,"sq1"]},llImage:function(a,b,c){var e=new $.svg,f=kernel.getProp("colsq1").match(x);n={U:f[0],R:f[1],F:f[2],D:f[3],L:f[4],B:f[5]};e.width=90*g;e.height=90*g;d(e,a,n,b,!0);c&&c.attr("src","data:image/svg+xml;base64,"+btoa(e.render()));return e}}}(),f=function(){function a(a,b,d,f){var e=f*f,h,g,k;5<a&&(a-=6);for(k=0;k<d;k++){for(h=0;h<f;h++){if(0==a){var l=
6*e-f*b-f+h;var m=2*e-f*b-1-h;var p=3*e-f*b-1-h;var q=5*e-f*b-f+h}else 1==a?(l=3*e+b+f*h,m=3*e+b-f*(h+1),p=e+b-f*(h+1),q=5*e+b+f*h):2==a?(l=3*e+b*f+h,m=4*e+f-1-b+f*h,p=b*f+f-1-h,q=2*e-1-b-f*h):3==a?(l=4*e+b*f+f-1-h,m=2*e+b*f+h,p=e+b*f+h,q=5*e+b*f+f-1-h):4==a?(l=6*e-1-b-f*h,m=f-1-b+f*h,p=2*e+f-1-b+f*h,q=4*e-1-b-f*h):5==a&&(l=4*e-f-b*f+h,m=2*e-f+b-f*h,p=e-1-b*f-h,q=4*e+b+f*h);var t=c[l];c[l]=c[m];c[m]=c[p];c[p]=c[q];c[q]=t}if(0==b)for(h=0;h+h<f;h++)for(g=0;g+g<f-1;g++)l=a*e+h+g*f,p=a*e+(f-1-h)+(f-1-
g)*f,3>a?(m=a*e+(f-1-g)+h*f,q=a*e+g+(f-1-h)*f):(q=a*e+(f-1-g)+h*f,m=a*e+g+(f-1-h)*f),t=c[l],c[l]=c[m],c[m]=c[p],c[p]=c[q],c[q]=t}}function b(b,d){var e=0;c=[];for(var f=0;6>f;f++)for(var h=0;h<b*b;h++)c[e++]=f;e=cubeutil.parseScramble(d,"DLBURF",!0);for(f=0;f<e.length;f++){for(h=0;h<e[f][1];h++)a(e[f][0],h,e[f][2],b);if(-1==e[f][1]){for(h=0;h<b-1;h++)a(e[f][0],h,-e[f][2],b);a((e[f][0]+3)%6,0,e[f][2]+4,b)}}return c}var c=[],d="#ff0 #fa0 #00f #fff #f00 #0d0".split(" ");return{draw:function(a,f,e){b(f,
e);a.width=30*(39*f/9+.2);a.height=30*(29*f/9+.2);d=kernel.getProp("colcube").match(x);for(var h=0;6>h;h++){var g=a,k=h,l=f,m=10/9,n=10/9;0==k?(m*=l,n*=2*l):1==k?(m*=0,n*=l):2==k?(m*=3*l,n*=l):3==k?(m*=l,n*=0):4==k?(m*=2*l,n*=l):5==k&&(m*=l,n*=l);for(var p=0;p<l;p++)for(var q=1==k||2==k?l-1-p:p,t=0;t<l;t++)y(g,d[c[(k*l+(0==k?l-1-t:t))*l+q]],[[p,p,p+1,p+1],[t,t+1,t+1,t]],[30,m+.1,n+.1])}a=e.split(/\s+/);e=[];for(h=0;h<a.length;h++)a[h]&&e.push(a[h]);return["~",e,[f,f,f].join("")]},genPosit:b}}(),q=
function(){function a(a,b,d){var f=new $.svg,g=kernel.getProp("colcube").match(x),e=3;12==a.length&&(e=2);f.width=50*(e+1.2);f.height=50*(e+1.2);for(var k=0;k<e*e;k++){var l=k%e+.5,m=~~(k/e)+.5;y(f,g["DLBURF".indexOf(a[k])]||"#888",[[l,l+1,l+1,l],[m,m,m+1,m+1]],[50,.1,.1])}for(k=0;k<4*e;k++)l=k%e,m=~~(k/e),y(f,g["DLBURF".indexOf(a[k+e*e])]||"#888",A([[l-e/2,l-e/2+1,.9*(l-e/2+1),.9*(l-e/2)],[e/2+.05,e/2+.05,e/2+.5,e/2+.5]],-m*c/2),[50,.6+e/2,.6+e/2]);b=b||[];for(k=0;k<b.length;k++){m=b[k];a=m[0]%e+
1.1;g=~~(m[0]/e)+1.1;l=m[1]%e+1.1;m=~~(m[1]/e)+1.1;var p=Math.sqrt((a-l)*(a-l)+(g-m)*(g-m));y(f,"#000",A([[.2,p-.4,p-.4,p-.1,p-.4,p-.4,.2],[.05,.05,.15,0,-.15,-.05,-.05]],Math.atan2(m-g,l-a)),[50,a,g])}d&&d.attr("src","data:image/svg+xml;base64,"+btoa(f.render()));return f}return{drawImage:a,draw:function(b,c,d){c=f.genPosit(b,c);for(var h=[],g=0;g<b*b;g++)h.push("DLBURF"[c[3*b*b+g]]);for(var e=0;4>e;e++){var k=[5,4,2,1][e]*b*b;for(g=0;g<b;g++)h.push("DLBURF"[c[k+[g,g,b-1-g,b-1-g][e]]])}return a(h.join(""),
[],d)}}}(),r=function(){var a=[[20*l,-20*l,61*l,10,10,0],[20*l,0,62*l,-10,20,61.5],[20*l,0,0,10,20,31.5]];return function(b,c){var d=new $.svg,f=kernel.getProp("colcube").match(x);d.width=122*l;d.height=121.5;for(var g=0;27>g;g++){var e=g%3,k=~~(g/3)%3;y(d,f["DLBURF".indexOf(b[g])]||"#888",[[e,e+1,e+1,e],[k,k,k+1,k+1]],a[~~(g/9)])}c&&c.attr("src","data:image/svg+xml;base64,"+btoa(d.render()));return d}}(),D=function(){return function(a,b){var d=new $.svg;d.width=120*l;d.height=120*l;for(var f=kernel.getProp("colpyr").match(x),
h=0,g=0;3>g;g++)for(var e=0;3>e;e++)for(var k=0;k<2*g+1;k++){var q=-l*g+l*k;var r=g/2;q=0==k%2?[[q,q-l,q+l],[r,r+.5,r+.5]]:[[q-l,q,q+l],[r,r+.5,r]];y(d,f["FLRD".indexOf(a[h])]||"#888",A(q,c/3*4*e),[20,3*l,3+(6*l-4.5)/2]);h++}b&&b.attr("src","data:image/svg+xml;base64,"+btoa(d.render()));return d}}(),k=function(){var a={};return function(c,d,f,g,k){var e=[],h=[];k=k||0;var m=.05,p=a[d],q=poly3d.getFamousPuzzle(d);if(null!=q)p=p||poly3d.makePuzzle.apply(poly3d,q.polyParam),q.parser=q.parser||poly3d.makePuzzleParser(p),
h=q.parser.parseScramble(f),m=q.pieceGap,e=q.colors;else debugger;DEBUG&&console.log("[polyhedron image] puzzle=",p,"moves=",h);a[d]=p;k=poly3d.renderNet(p,m,k);m=k[0];f=k[1];k=k[2];for(var r=[],n=0;n<f.length;n++)r[n]=f[n]&&f[n][2];for(var t=0;t<h.length;t++){n=h[t];var u=p.getTwistyIdx(n[0]);if(-1==u)debugger;var x=p.moveTable[u];u=p.twistyDetails[u][1];var w=(n[1]%u+u)%u,E=[];for(n=0;n<r.length;n++){var D=n;for(u=0;u<w;u++)D=0>x[D]?D:x[D];E[n]=r[D]}r=E}if("skb"==d){e=$.col2std(kernel.getProp("colskb"),
[0,2,4,3,5,1]);p=[[l,-l,2*l,.5,.5,-1],[l,0,0,-.5,1,2],[l,0,0,.5,1,-2],[l,0,0,.5,1,-2],[l,0,0,.5,1,-2],[l,0,0,-.5,1,2]];for(n=0;6>n;n++)for(u=0;6>u;u++)2!=u%3&&(p[n][u]*=8/m[0]);for(n=0;n<f.length;n++)f[n]&&(m=b(f[n],p[f[n][2]]),f[n][0]=m[0],f[n][1]=m[1]);m=[8*l,6]}p=300*Math.min(1.6/m[0],1/m[1]);c.width=m[0]*p;c.height=m[1]*p;for(n=0;n<e.length;n++)e[n]="#"+e[n].toString(16).padStart(6,"0");for(n=0;n<r.length;n++)f[n]&&y(c,e[r[n]],f[n],[p,0,0,0,p,0]);for(n=0;n<k.length;n++)0!=(g>>n&1)&&(e=k[n],c.addText(e[2].toUpperCase(),
[e[0]*p,e[1]*p],{font:"20px Arial",fill:kernel.getProp("col-font"),stroke:kernel.getProp("col-board"),"stroke-width":"3px"}));c=[];for(t=0;t<h.length;t++)c.push(q.parser.move2str(h[t]));return["~",c,d]}}(),w=function(){return function(a,b,c,d){for(var f=[],g=[[1,0],[0,1],[0,-1],[-1,0]],e=0;e<c*c;e++)f[e]=e;e=c-1;var k=c-1,l=/([ULRD\uFFEA\uFFE9\uFFEB\uFFEC])([\d]?)/;d=d.split(" ");for(var m=0;m<d.length;m++){var p=l.exec(d[m]);if(p){var q="ULRD".indexOf(p[1])%4;p=~~p[2]||1;q=g["b"==b?3-q:q];for(var n=
0;n<p;n++)mathlib.circle(f,e*c+k,(e+q[0])*c+k+q[1]),e+=q[0],k+=q[1]}}a.width=50*(c+.2);a.height=50*(c+.2);b=kernel.getProp("col15p").match(x);b[c-1]=b[b.length-1];for(e=0;e<c;e++)for(d=0;d<c;d++)g=f[d*c+e],k=Math.min(~~(g/c),g%c),g++,y(a,b[k],[[e+.05,e+.05,e+1-.05,e+1-.05],[d+.05,d+1-.05,d+1-.05,d+.05]],[50,.1,.1]),g!=c*c&&a.addText(g,[50*(e+.5+.1),50*(d+.5+.1)],{font:"30px Arial",fill:"#000"})}}(),E="222 333 444 555 666 777 888 999 101010 111111".split(" ");execMain(function(){function a(a){a&&(d=
d||$('<img style="display:block;">'),a.empty().append(d),g(tools.getCurScramble(),!0)||a.html(IMAGE_UNAVAILABLE))}$(function(){tools.regTool("image",TOOLS_IMAGE,a)})});var x=/#[0-9a-fA-F]{3}/g;return{draw:g,llImage:q,pyrllImage:D,face3Image:r,sqllImage:B.llImage}}();var cross=function(a,g,d,l,c,A,b){function y(a,b){var c=K[b][~~(a/24)];return 24*~~(c/384)+L[a%24][(c>>4)%24]}function C(a,b){var c=K[b][a>>4];return~~(c/384)<<4|O[a&15][(c>>4)%24]^c&15}function B(a,b){for(var c=3;0<=c;c--)b[c]=a&1,a>>=1}function f(a){for(var b=0,c=0;4>c;c++)b<<=1,b|=a[c];return b}function q(a,b){var c=K[b][~~(a/384)];return 384*~~(c/384)+16*L[(a>>4)%24][(c>>4)%24]+(O[a&15][(c>>4)%24]^c&15)}function r(){r=$.noop;for(var b=0;24>b;b++)L[b]=[];for(b=0;16>b;b++)O[b]=[];var e=[],k=[],
n=[];for(b=0;24>b;b++)for(var m=0;24>m;m++){l(e,b,4);l(k,m,4);for(var p=0;4>p;p++)n[p]=e[k[p]];L[b][m]=c(n,4);if(16>b){B(b,e);for(p=0;4>p;p++)n[p]=e[k[p]];O[b][m]=f(n)}}a(K,495,function(a,b){for(var d=[0,0,0,0,0,0,0,0,0,0,0,0],e=4,f=0;12>f;f++)a>=A[11-f][e]?(a-=A[11-f][e--],d[f]=e<<1):d[f]=-1;g(d,b);a=0;e=4;var h=0,k=[];for(f=0;12>f;f++)0<=d[f]&&(a+=A[11-f][e--],k[e]=d[f]>>1,h|=(d[f]&1)<<3-e);return 24*a+c(k,4)<<4|h});h=[];t=[];d(h,0,11880,5,y);d(t,0,7920,6,C)}function D(){D=$.noop;k();var a=5;d(S,
296+576*(72*a+2*a),331776,7,function(a,b){var c=a%576,d=~~(a/576);return 24*n[~~(c/24)][b]+M[c%24][b]+576*(24*n[~~(d/24)][b]+M[d%24][b])});a=6;d(H,296+576*(72*a+2*a),331776,7,function(a,b){var c=a%576,d=~~(a/576);return 24*n[~~(c/24)][b]+M[c%24][b]+576*(24*n[~~(d/24)][b]+M[d%24][b])})}function k(){function a(a,b){var c=~~(a/3);return 3*[[3,1,2,7,0,5,6,4],[0,1,6,2,4,5,7,3],[1,2,3,0,4,5,6,7],[0,5,1,3,4,6,2,7],[4,0,2,3,5,1,6,7],[0,1,2,3,7,4,5,6]][b][c]+(a%3+[[2,0,0,1,1,0,0,2],[0,0,1,2,0,0,2,1],[0,0,
0,0,0,0,0,0],[0,1,2,0,0,2,1,0],[1,2,0,0,2,1,0,0],[0,0,0,0,0,0,0,0]][b][c])%3}k=$.noop;r();for(var b=0;24>b;b++){n[b]=[];M[b]=[];for(var c=0;6>c;c++){n[b][c]=a(b,c);var f=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];f[b>>1]=b&1;g(f,c);for(var h=0;12>h;h++)if(0<=f[h]){M[b][c]=h<<1|f[h];break}}}e=[];for(b=0;4>b;b++)c=[],d(c,72*(b+4)+2*(b+4),576,5,function(a,b){return 24*n[~~(a/24)][b]+M[a%24][b]}),e[b]=c}function w(a,c,d,e,f,g,k,l){if(0==g)return 0==a&&0==c&&8==d[0]&&12==e[0]&&(10==d[1]&&15==e[1]||12==d[1]&&
18==e[1]);if(b(h,a)>g||b(t,c)>g||b(f,24*e[0]+d[0]+576*(24*e[1]+d[1]))>g)return!1;var m,p;for(p=0;6>p;p++)if(p!=k&&p!=k-3){var q=a;var r=c;var u=d;var x=e;for(m=0;3>m;m++)if(q=y(q,p),r=C(r,p),u=[M[u[0]][p],M[u[1]][p]],x=[n[x[0]][p],n[x[1]][p]],w(q,r,u,x,f,g-1,p,l))return l.push("FRUBLD".charAt(p)+" 2'".charAt(m)),!0}return!1}function E(a,c,d,f,g,k,l,m){if(0==k)return 0==a&&0==c&&d==2*(g+4)&&f==3*(g+4);if(b(h,a)>k||b(t,c)>k||b(e[g],24*f+d)>k)return!1;var p,q;for(q=0;6>q;q++)if(q!=l&&q!=l-3){var r=a;
var u=c;var x=d;var v=f;for(p=0;3>p;p++)if(r=y(r,q),u=C(u,q),x=M[x][q],v=n[v][q],E(r,u,x,v,g,k-1,q,m))return m.push("FRUBLD".charAt(q)+" 2'".charAt(p)),!0}return!1}function x(a,c,d,e,f){if(0==d)return 0==a&&0==c;if(b(h,a)>d||b(t,c)>d)return!1;var g,k;for(k=0;6>k;k++)if(k!=e&&k!=e-3){var l=a;var n=c;for(g=0;3>g;g++)if(l=y(l,k),n=C(n,k),x(l,n,d-1,k,f))return f.push("FRUBLD".charAt(k)+" 2'".charAt(g)),!0}return!1}function G(a){r();for(var b=[],c=0;6>c;c++){for(var d=0,e=0,f=0;f<a.length;f++)for(var g=
T[c].indexOf("FRUBLD".charAt(a[f][0])),h=a[f][2],k=0;k<h;k++)d=C(d,g),e=y(e,g);f=[];for(g=0;100>g&&!x(e,d,g,-1,f);g++);f.reverse();b.push(f)}return b}function u(a,b){k();for(var c=0,d=0,e=[8,10,12,14],f=[12,15,18,21],g=0;g<a.length;g++)for(var h=T[b].indexOf("FRUBLD".charAt(a[g][0])),l=a[g][2],m=0;m<l;m++){c=C(c,h);d=y(d,h);for(var p=0;4>p;p++)e[p]=M[e[p]][h],f[p]=n[f[p]][h]}g=[];h=!1;for(l=0;!h;){for(p=0;4>p;p++)if(E(d,c,e[p],f[p],p,l,-1,g)){h=!0;break}l++}g.reverse();return g}function p(){p=$.noop;
r();J=[];d(J,0,190080,7,q,6,3,6)}function m(a){var b=~~(a/384),c=(a>>4)%24,d=[],e=[],f=[],g=[];B(a&15,g);l(f,c,4);a=4;c=[7,6,5,4,10,9,8,11,3,2,1,0];for(var h=0;12>h;h++)b>=A[11-h][a]?(b-=A[11-h][a--],d[c[h]]=f[a],e[c[h]]=g[a]):d[c[h]]=e[c[h]]=-1;return[d,e]}var h,t,e,J,K=[],L=[],O=[],M=[],n=[],S=[],H=[],z="DULRFB".split(""),T="FRUBLD FLDBRU FDRBUL FULBDR URBDLF DRFULB".split(" "),P="&nbsp;&nbsp; z2 z' z&nbsp; x' x&nbsp;".split(" "),N=["FRUBLD","RBULFD","BLUFRD","LFURBD"],v;execMain(function(){function a(){var b=
$(this).parent(),c="DULRFB".indexOf(b.html()[0]);u(v,c);var d=$(this).html();if("ec"==d){var e=u(v,c);d="xx"}else if("xx"==d){var f=v;D();e=[];for(d=0;4>d;d++){for(var g=0,h=0,k=[8,10,12],l=[12,15,18],m=0;m<f.length;m++)for(var p=N[d].indexOf("FRUBLD".charAt(T[c].indexOf("FRUBLD".charAt(f[m][0])))),q=f[m][2],r=0;r<q;r++)g=C(g,p),h=y(h,p),k=[M[k[0]][p],M[k[1]][p],M[k[2]][p]],l=[n[l[0]][p],n[l[1]][p],n[l[2]][p]];e.push([h,g,k,l])}f=[];m=!1;for(g=0;!m;){for(d=0;4>d;d++){h=e[d];if(w(h[0],h[1],[h[2][0],
h[2][1]],[h[3][0],h[3][1]],S,g,-1,f)){m=!0;break}if(w(h[0],h[1],[h[2][0],h[2][2]],[h[3][0],h[3][2]],H,g,-1,f)){m=!0;break}}g++}f.reverse();for(m=0;m<f.length;m++)f[m]=N[d]["FRUBLD".indexOf(f[m][0])]+f[m][1];e=f;d="<<"}else e=G(v)[c],d="ec";d=$("<span />").html(d).addClass("click").click(a);b.empty().append(z[c]+"(",d,"): "+P[c],tools.getSolutionSpan(e),"<br>")}function b(b){if(b)if(tools.isPuzzle("333")){var c=tools.getCurScramble()[1];b.empty();v=cubeutil.parseScramble(c,"FRUBLD");c=G(v);for(var d=
0;6>d;d++){var e=$('<span class="sol"/>'),f=$("<span />").html("ec").addClass("click").click(a);e.append(z[d]+"(",f,"): "+P[d],tools.getSolutionSpan(c[d]),"<br>");b.append(e)}}else b.html(IMAGE_UNAVAILABLE)}$(function(){tools.regTool("cross",TOOLS_SOLVERS+">"+TOOLS_CROSS,b)})});return{solve:G,getEasyCross:function(a){p();var c=Math.min(a%10,8),d=Math.min(~~(a/10),8);a=Math.min(c,d);c=Math.max(c,d);d=[0,1,16,174,1568,11377,57758,155012,189978,190080];d=mathlib.rn(d[c+1]-d[a])+1;var e;for(e=0;190080>
e;e++){var f=b(J,e);if(f<=c&&f>=a&&0==--d)break}return m(e)},getEasyXCross:function(a){p();k();a=Math.max(0,Math.min(a,8));for(var c=[1,16,174,1568,11377,57758,155012,189978,190080][a],d=!1;!d;){for(var f=[],g=0;500>g;g++)f.push(mathlib.rn(c));f.sort(function(a,b){return b-a});var h=[],l=0;for(g=0;190080>g;g++)if(!(b(J,g)>a)){for(;f[f.length-1]==l;)h.push(g),f.pop();if(0==f.length)break;l++}f=mathlib.rndPerm(500);for(g=0;500>g;g++){var n=h[f[g]],q=~~(n/384),r=24*q+(n>>4)%24,t=q<<4|n&15,u=[];x(r,t,
a,-1,u);l=mathlib.rndPerm(8).slice(4);var v=mathlib.rndPerm(8),z=[0,0,0,0,0,0,0,0,0,0,0,0];u=4;for(var w=0;12>w;w++)q>=A[11-w][u]?(q-=A[11-w][u--],z[w]=-1):z[w]=v.pop();for(w=0;4>w;w++)if(l[w]=3*l[w]+mathlib.rn(3),v[w]=2*z.indexOf(w)+mathlib.rn(2),!(d||b(e[w],24*l[w]+v[w])>a))for(u=[],q=0;q<=a;q++)if(E(r,t,v[w],l[w],w,q,-1,u)){d=!0;break}if(d){a=m(n);a[2]=mathlib.valuedArray(8,-1);a[3]=mathlib.valuedArray(8,-1);c=[7,6,5,4,10,9,8,11,3,2,1,0];d=[6,5,4,7,2,1,0,3];for(g=0;4>g;g++)a[0][c[v[g]>>1]]=c[g+
4],a[1][c[v[g]>>1]]=v[g]%2,a[2][d[~~(l[g]/3)]]=d[g+4],a[3][d[~~(l[g]/3)]]=(30-l[g])%3;return a}}}}}}(mathlib.createMove,mathlib.edgeMove,mathlib.createPrun,mathlib.setNPerm,mathlib.getNPerm,mathlib.Cnk,mathlib.getPruning);var gsolver=function(){function a(a,b){for(var f=0;f<d.length;f++)b=a(b,d[f]);for(f=0;f<c.length;f++)b=a(b,c[f]);return b}function g(a,b){var c={};b=b||" 2'";for(var d in a)for(var f=0;f<b.length;f++)c[d+b[f]]=a[d];return c}var d,l,c,A=function(){function a(a,b){for(var d=a.split(""),f=c["URF".indexOf(b[0])],g="? 2'".indexOf(b[1]),k=0;k<f.length;k++)mathlib.acycle(d,f[k],g);return d.join("")}var b="URFDLB".split(""),c=[[[0,1,3,2],[4,8,16,20],[5,9,17,21]],[[4,5,7,6],[1,22,13,9],[3,20,15,11]],[[8,9,
11,10],[2,4,13,19],[3,6,12,17]]],f=new mathlib.gSolver("XXXX???????????????????? ????XXXX???????????????? ????????XXXX???????????? ????????????XXXX???????? ????????????????XXXX???? ????????????????????XXXX".split(" "),a,g({U:1,R:2,F:3}));return function(c,g){d=cubeutil.parseScramble(c,"URF");for(var k="UUUURRRRFFFFDDDDLLLLBBBB",l=0;l<d.length;l++){var q=d[l];k=a(k,"URF".charAt(q[0])+" 2'".charAt(q[2]-1))}for(q=0;6>q;q++){var p=[];for(l=0;24>l;l++)p.push(k[l]=="URFDLB".charAt(q)?"X":"?");l=f.search(p.join(""),
0);g.append(b[q]+": ",tools.getSolutionSpan(l),"<br>")}}}(),b=function(){function f(a,b){for(var c=a.split(""),d=w["URFDLBurfdlbMESxyz".indexOf(b[0])],e="? 2'".indexOf(b[1]),f=0;f<d.length;f++)mathlib.acycle(c,d[f],e);return c.join("")}function r(a,b,c){c+=" // orientation \n";for(var d=0;d<b.length&&void 0!=b[d];d++)c+=b[d].join(" ").replace(/\s+/g," ")+" // "+a[d].head+(0==b[d].length?" skip":"")+"\n";return"https://alg.cubing.net/?alg="+encodeURIComponent(c)}function y(b,d){var e=+new Date,g=[null,
0],h=[];c=[];for(var k=0;k<b.length;k++){if(!b[k].solv){b[k].solv={};for(var m in b[k].step)b[k].solv[m]=new mathlib.gSolver([m],f,b[k].move)}var n=void 0,p=f,q=b[k].solv,t=b[k].step,u=b[k].fmov||[];g=g[1];var x=b[k].maxl||10,w=0;a:for(;w<x+1;w++)for(var y in q)if((t[y]|g)==t[y]){var E=a(p,y);n=q[y].search(E,0,w);if(void 0!=n){g|=t[y];break a}for(var D=0;D<u.length;D++)if(n=p(E,u[D]),n=q[y].search(n,0,w),void 0!=n){n.unshift(u[D]);g|=t[y];break a}}g=[n,g];h[k]=g[0];if(void 0==g[0]){d.append(b[k].head+
": &nbsp;(no solution found in %d moves)".replace("%d",b[k].maxl||10),"<br>");break}d.append(b[k].head+": ",0==h[k].length?"&nbsp;(skip)":tools.getSolutionSpan(h[k]),"<br>");c=c.concat(h[k]);DEBUG&&console.log("[step solver]",b[k].head+": ",h[k],"->",g[1],a(f,mathlib.SOLVED_FACELET),+new Date-e)}d.append($('<a class="click" target="_blank">alg.cubing.net</a>').attr("href",r(b,h,M)+"&setup="+encodeURIComponent(l)))}function k(){M=C.val();b.exec(L,l,O.empty())}var w=[[[0,2,8,6],[1,5,7,3],[18,36,45,
9],[19,37,46,10],[20,38,47,11]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38]],[[27,29,35,33],[28,32,34,30],[24,15,51,42],[25,16,52,43],[26,17,53,44]],[[36,38,44,42],[37,41,43,39],[0,18,27,53],[3,21,30,50],[6,24,33,47]],[[45,47,53,51],[46,50,52,48],[2,36,33,17],[1,39,34,14],[0,42,35,11]],[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11],[21,39,48,12],[22,40,49,13],[23,41,50,14]],[[9,11,17,15],[10,
14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26],[1,52,28,19],[4,49,31,22],[7,46,34,25]],[[18,20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38],[3,10,32,43],[4,13,31,40],[5,16,30,37]],[[27,29,35,33],[28,32,34,30],[24,15,51,42],[25,16,52,43],[26,17,53,44],[21,12,48,39],[22,13,49,40],[23,14,50,41]],[[36,38,44,42],[37,41,43,39],[0,18,27,53],[3,21,30,50],[6,24,33,47],[1,19,28,52],[4,22,31,49],[7,25,34,46]],[[45,47,53,51],[46,50,52,48],[2,36,33,17],[1,39,34,14],[0,42,35,11],[5,37,30,16],[4,
40,31,13],[3,43,32,10]],[[1,19,28,52],[4,22,31,49],[7,25,34,46]],[[21,12,48,39],[22,13,49,40],[23,14,50,41]],[[3,10,32,43],[4,13,31,40],[5,16,30,37]],[[9,11,17,15],[10,14,16,12],[2,51,29,20],[5,48,32,23],[8,45,35,26],[36,42,44,38],[37,39,43,41],[0,53,27,18],[3,50,30,21],[6,47,33,24],[1,52,28,19],[4,49,31,22],[7,46,34,25]],[[0,2,8,6],[1,5,7,3],[18,36,45,9],[19,37,46,10],[20,38,47,11],[27,33,35,29],[28,30,34,32],[24,42,51,15],[25,43,52,16],[26,44,53,17],[21,39,48,12],[22,40,49,13],[23,41,50,14]],[[18,
20,26,24],[19,23,25,21],[6,9,29,44],[7,12,28,41],[8,15,27,38],[45,51,53,47],[46,48,52,50],[2,17,33,36],[1,14,34,39],[0,11,35,42],[3,10,32,43],[4,13,31,40],[5,16,30,37]]],E=g({U:0,R:17,F:34,D:48,L:65,B:82}),x=g({U:0,R:17,F:34,L:65,B:82}),A=g({U:0,R:17,M:97,r:113}),u=g({U:0,R:17,L:65}),p=[{move:E,maxl:8,head:"Cross",step:{"----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-":0}},{move:x,head:"F2L-1",step:{"----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-":1,"----U--------R--R----FF-FF-DD-DDD-D-----LL-LL----B--B-":2,
"----U--------RR-RR----F--F--D-DDD-DD----L--L----BB-BB-":4,"----U--------R--R-----F--F--D-DDDDD----LL-LL-----BB-BB":8}},{move:x,head:"F2L-2",step:{"----U-------RR-RR----FFFFFFDDDDDD-D-----LL-LL----B--B-":3,"----U-------RRRRRR----FF-FF-DDDDD-DD----L--L----BB-BB-":5,"----U--------RR-RR---FF-FF-DD-DDD-DD----LL-LL---BB-BB-":6,"----U-------RR-RR-----FF-FF-DDDDDDD----LL-LL-----BB-BB":9,"----U--------R--R----FF-FF-DD-DDDDD----LLLLLL----BB-BB":10,"----U--------RR-RR----F--F--D-DDDDDD---LL-LL----BBBBBB":12}},
{move:x,head:"F2L-3",step:{"----U-------RRRRRR---FFFFFFDDDDDD-DD----LL-LL---BB-BB-":7,"----U-------RR-RR----FFFFFFDDDDDDDD----LLLLLL----BB-BB":11,"----U-------RRRRRR----FF-FF-DDDDDDDD---LL-LL----BBBBBB":13,"----U--------RR-RR---FF-FF-DD-DDDDDD---LLLLLL---BBBBBB":14}},{move:x,head:"F2L-4",step:{"----U-------RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB":15}}],m=[{move:E,maxl:10,fmov:["x ","x2","x'"],head:"Step 1",step:{"---------------------F--F--D--D--D-----LLLLLL-----B--B":0}},{move:A,maxl:16,head:"Step 2",
step:{"------------RRRRRR---F-FF-FD-DD-DD-D---LLLLLL---B-BB-B":1}}],h=[{move:E,maxl:8,head:"2x2x2",step:{"---------------------FF-FF-DD-DD--------LL-LL---------":1,"------------------------------DD-DD----LL-LL-----BB-BB":2}},{move:E,maxl:10,head:"2x2x3",step:{"---------------------FF-FF-DD-DD-DD----LLLLLL----BB-BB":3}}],t=[{move:E,maxl:10,head:"EOLine",step:{"-H-HUH-H-----R-------HFH-F--D-HDH-D-----L-------HBH-B-":0}},{move:u,maxl:16,head:"ZZF2L1",step:{"-H-HUH-H----RRRRRR---HFF-FF-DDHDD-DD----L-------BBHBB-":1,
"-H-HUH-H-----R-------FFHFF-DD-DDHDD----LLLLLL---HBB-BB":2}},{move:u,maxl:16,head:"ZZF2L2",step:{"-H-HUH-H----RRRRRR---FFFFFFDDDDDDDDD---LLLLLL---BBBBBB":3}}],e=[{move:E,maxl:7,head:"EO",step:{"-H-HUH-H-----R-------HFH----H-HDH-H-----L-------HBH---":0}},{move:E,maxl:10,head:"DR",step:{"UUUUUUUUU---RRR------FFF---UUUUUUUUU---RRR------FFF---":1}}],B,C,L,O,M="z2";execMain(function(){for(var a="z2;;z ;z';x ;x'".split(";"),b=0;6>b;b++)for(var c=0;3>c;c++)a.push(a[b]+" y"+" 2'".charAt(c));C=$("<select>");
for(b=0;b<a.length;b++)C.append($("<option>").val(a[b]).html(a[b]))});return{exec:function(b,g,l){if("222"==b){d=cubeutil.parseScramble(g,"URFDLB");for(b=0;b<d.length;b++)d[b]="URFDLB".charAt(d[b][0])+" 2'".charAt(d[b][2]-1);g="URF UFL ULB UBR DFR DLF DBL DRB".split(" ");var n="----UU-UURR-RR-----FF-FF------------------------------ ---UU-UU----------FF-FF--------------LL-LL------------ UU-UU-------------------------------LL-LL-----BB-BB--- -UU-UU----RR-RR------------------------------BB-BB---- ------------RR-RR-----FF-FF-DD-DD--------------------- ---------------------FF-FF-DD-DD--------LL-LL--------- ------------------------------DD-DD----LL-LL-----BB-BB -------------RR-RR-------------DD-DD------------BB-BB-".split(" ");
B=B||new mathlib.gSolver(n,f,E);for(b=0;8>b;b++){l.append(g[b]+": ");c=[];var q=B.search(a(f,n[b]),0);q?l.append(tools.getSolutionSpan(q),"<br>"):l.append("no solution found<br>")}}else{O=l;L=b;n=M.split(" ");q=[0,1,2,3,4,5];for(var r=[[5,1,0,2,4,3],[0,2,4,3,5,1],[1,3,2,4,0,5]],u=0;u<n.length;u++)if(n[u][0])for(var x="xyz".indexOf(n[u][0]),w="? 2'".indexOf(n[u][1]||" "),D=0;D<w;D++)for(var A=0;6>A;A++)q[A]=r[x][q[A]];for(A=0;6>A;A++)q[A]="URFDLB".charAt(q[A]);n=q.join("");d=cubeutil.parseScramble(g,
"URFDLB");for(g=0;g<d.length;g++)d[g]=n.charAt(d[g][0])+" 2'".charAt(d[g][2]-1);l.append("Orientation:",C.unbind("change").change(k),"<br>");"cf"==b&&y(p,l);"roux"==b&&y(m,l);"petrus"==b&&y(h,l);"zz"==b&&y(t,l);"eodr"==b&&y(e,l)}},move:f}}(),y=function(){function b(a,b){if(!a)return null;b=~~b;a=a.split("|");if(0==b){var c=a[0].slice(6);a[0]=a[0].slice(0,6)+a[1].slice(6);a[1]=a[1].slice(0,6)+c}else if(c=0<b?0:1,b=Math.abs(b),a[c]=a[c].slice(b)+a[c].slice(0,b),/[a-h]/.exec(a[c][0]+a[c][6]))return null;
return a.join("|")}function f(a){for(var b=0,c=0,d=[],f=0;f<a.length;f++)0==a[f]?(0==b&&0==c?d.push("/"):d.push((b+5)%12-5+","+((c+5)%12-5)+"/"),b=c=0):0<a[f]?b+=~~a[f]:c-=~~a[f];return d}for(var g={0:33},k=1;12>k;k++)g[""+k]=0,g[""+-k]=16;var l,y;return function(k,q){l=l||new mathlib.gSolver(["0Aa0Aa0Aa0Aa|Aa0Aa0Aa0Aa0","0Aa0Aa0Aa0Aa|0Aa0Aa0Aa0Aa","Aa0Aa0Aa0Aa0|Aa0Aa0Aa0Aa0","Aa0Aa0Aa0Aa0|0Aa0Aa0Aa0Aa"],b,g);y=y||new mathlib.gSolver(["0Aa0Aa0Aa0Aa|Bb1Bb1Bb1Bb1","0Aa0Aa0Aa0Aa|1Bb1Bb1Bb1Bb","Aa0Aa0Aa0Aa0|Bb1Bb1Bb1Bb1",
"Aa0Aa0Aa0Aa0|1Bb1Bb1Bb1Bb"],b,g);d=[];for(var r=/^\s*\(\s*(-?\d+),\s*(-?\d+)\s*\)\s*$/,p=k.split("/"),m=0;m<p.length;m++){if(!/^\s*$/.exec(p[m])){var h=r.exec(p[m]);~~h[1]&&d.push((~~h[1]+12)%12);~~h[2]&&d.push(-(~~h[2]+12)%12)}d.push(0)}0<d.length&&d.pop();c=[];r=l.search(a(b,"0Aa0Aa0Aa0Aa|Aa0Aa0Aa0Aa0"),0);q.append("Shape: ",tools.getSolutionSpan(f(r)),"<br>");c=c.concat(r);r=y.search(a(b,"0Aa0Aa0Aa0Aa|Bb1Bb1Bb1Bb1"),0);q.append("Color: ",tools.getSolutionSpan(f(r)),"<br>")}}(),C=function(){function b(a,
b){for(var c=a.split(""),d=f["RULBrbxy".indexOf(b[0])],g="? '*".indexOf(b[1]),k=0;k<d.length;k++)mathlib.acycle(c,d[k],g);return c.join("")}var f=[[[5,25,15],[9,28,17],[7,29,16],[8,26,19],[23,14,4]],[[0,20,25],[2,21,27],[4,22,29],[1,23,26],[19,7,11]],[[10,15,20],[13,18,24],[11,16,23],[14,19,22],[29,1,8]],[[25,20,15],[29,23,19],[28,21,18],[27,24,17],[13,9,2]],[[0,25,5],[4,26,7],[3,27,9],[2,28,6],[17,12,21]],[[0,20,25],[2,21,27],[4,22,29],[1,23,26],[19,7,11]],[[0,25,15,10],[1,27,19,13],[2,29,18,11],
[3,26,17,14],[4,28,16,12],[6,7,9,8],[21,23,24,22]],[[5,10,20,25],[6,11,21,26],[7,12,22,27],[8,13,23,28],[9,14,24,29],[1,2,4,3],[16,18,19,17]],[]],l;return function(f,q){l=l||new mathlib.gSolver(["?L?L??B?B?UUUUU?R?R???F?F?????","?F?F??L?L?UUUUU?B?B???R?R?????","?R?R??F?F?UUUUU?L?L???B?B?????","?B?B??R?R?UUUUU?F?F???L?L?????"],b,g({R:0,r:1,B:2,b:3}," '"));d=cubeutil.parseScramble(f,"RULB");for(var k=0;k<d.length;k++)d[k]="RULB".charAt(d[k][0])+" 2'".charAt(d[k][2]-1);var r="URFDLB".split(""),w="UUUUU?RR???FF????????LL???BB?? ???BBUUUUU??L?L?FF????????R?R? ?B?B??R?R?UUUUU?F?F???L?L????? ????????RR???BBUUUUU???LL???FF ?BB????????R?R????FFUUUUU??L?L ??F?F??R?R???????B?B?L?L?UUUUU".split(" ");
for(k=0;6>k;k++){c=[];var u=["x*","y ",null,"x ","y*","y'"],p=~~(a(b,"U????R????F????D????L????B????").indexOf(r[k])/5);u[p]&&c.push(u[p]);(u=l.search(a(b,w[k]),0))?(q.append(r[k]+": "),c[0]&&q.append("&nbsp;"+c[0].replace("'","2").replace("*","'")),q.append(tools.getSolutionSpan(u),"<br>")):q.append(r[k]+": no solution found<br>")}}}(),B=function(){function b(a,b){for(var c=a.split(""),d=f["RULB".indexOf(b[0])],g="? '".indexOf(b[1]),k=0;k<d.length;k++)mathlib.acycle(c,d[k],g);return c.join("")}var f=
[[[5,9,22],[0,7,20],[1,8,18]],[[3,16,11],[1,14,6],[2,12,7]],[[4,23,15],[2,18,13],[0,19,14]],[[10,17,21],[8,12,19],[6,13,20]]],l;return function(f,q){l=l||new mathlib.gSolver(["????FF??RRR??L?L?L?DDDDD"],b,g({R:0,U:1,L:2,B:3}," '"));d=cubeutil.parseScramble(f,"RULBrulb");f=[];for(var k=0;k<d.length;k++)1==d[k][1]&&f.push("RULB".charAt(d[k][0])+" 2'".charAt(d[k][2]-1));var r=["D","L","R","F"],w=[["RULB","LUBR","BURL"],["URBL","LRUB","BRLU"],["RLBU","ULRB","BLUR"],["RBUL","UBLR","LBRU"]];for(k=0;4>k;k++){c=
[];var u,p=0;a:for(;99>p;p++)for(var m=0;3>m;m++){var h=w[k][m];d=[];for(var t=0;t<f.length;t++)d.push("RULB"[h.indexOf(f[t][0])]+f[t][1]);if(u=l.search(a(b,"????FF??RRR??L?L?L?DDDDD"),p,p)){for(t=0;t<u.length;t++)u[t]=h["RULB".indexOf(u[t][0])]+u[t][1];break a}}u?q.append(r[k]+": ",tools.getSolutionSpan(u),"<br>"):q.append(r[k]+": no solution found<br>")}}}();(function(){function a(a,b){var c=a.indexOf("-"),d=c>>2;c&=3;var e=a.split(""),f=~~b[1],g=[d<<2|c];if("V"==b[0]){if("$"==e[d<<2|f])return null;
for(var k=c>f?-1:1;c!=f;)c+=k,g.push(d<<2|c)}else{if("$"==e[f<<2|c])return null;for(k=d>f?-1:1;d!=f;)d+=k,g.push(d<<2|c)}g.reverse();mathlib.acycle(e,g);return e.join("")}function b(a){var b=[];a=a.split("");for(var c=0;c<a.length;c++)"?"==a[c]&&(a[c]="-",b.push(a.join("")),a[c]="?");return b}function d(b,d){for(var f=[],g=0;g<d.length;g++)f[g]=b[d[g]];b=f.join("");for(g=0;g<c.length;g++)b=a(b,c[g]);return b}function f(a){do{var b=mathlib.rndPerm(a*a);var c=(a-1-~~(b.indexOf(b.length-1)/a))*(a-1);
for(var d=0;d<b.length;d++)for(var e=d+1;e<b.length;e++)b[d]>b[e]&&b[d]!=b.length-1&&c++}while(0!=c%2);return b}function l(a,b){var g=+new Date,k=[],e=0;if(4==a){k[0]=f(4);for(var l=k[0],m=[],p=[0,4,8,12,1,5,9,13,2,6,10,14,3,7,11,15],q=0;16>q;q++)m[q]=p[l[p[q]]];k[1]=m;l=0;a:for(;99>l;l++)for(e=0;2>e;e++)if(m=k[e].indexOf(k[e].length-1),c=["V"+(m&3),"H"+(m>>2)],m=x.search(d("0123???????????-",k[e]),l,l)){c=c.concat(m);break a}l=A.search(d("01234???8???c??-",k[e]).replace(/[0123]/g,"$"),0);c=c.concat(l)}else if(3==
a){l=f(3);m=[5,6,7,9,10,11,13,14,15];for(p=0;16>p;p++)k[p]=m[l[m.indexOf(p)]]||p;m=k.indexOf(k.length-1);c=["V"+(m&3),"H"+(m>>2)];k=[k]}l=u.search(d("0123456789abcde-",k[e]).replace(/[012348c]/g,"$"),0);c=c.concat(l);DEBUG&&console.log("[15p solver]",e,d("0123456789abcde-",k[e]),c.join(""),c.length,+new Date-g);l=b.slice(3==a?3:4);g=[];p=1==e?"VH":"HV";e=-1==l.indexOf("a")?["DR","UL"]:["",""];k=-1!=l.indexOf("m");l=-1!=l.indexOf("p");var r=[-1,-1];for(m=0;m<c.length;m++){var n=~~c[m][1],w=p.indexOf(c[m][0]);
-1!=r[w]&&r[w]!=n&&(0<g.length&&g[g.length-1][0]==w?(q=g[g.length-1],q[1]+=n-r[w],0==q[1]&&g.pop()):g.push([w,n-r[w]]));r[w]=n}for(m=0;m<g.length;m++){q=g[m];p=e[k!=0<q[1]?0:1][q[0]];q=Math.abs(q[1]);g[m]=[];if(l)g[m].push(p+q);else for(;0<q--;)g[m].push(p);g[m]=g[m].join(" ")}g.reverse();return g.join(" ").replace(/1/g,"")}var y=g({V:0,H:1},"0123"),x=new mathlib.gSolver(b("0123????????????"),a,y),A=new mathlib.gSolver(b("$$$$4???8???c???"),a,y),u=new mathlib.gSolver(["$$$$$567$9ab$de-"],a,y);scrMgr.reg(["15prp",
"15prap","15prmp"],l.bind(null,4))(["8prp","8prap","8prmp"],l.bind(null,3))})();var f=execMain(function(){function f(a){A();var b=O[0].getBoundingClientRect(),c=a.offsetX/30*O[0].width/b.width;a=a.offsetY/30*O[0].height/b.height;for(b=0;6>b;b++)if(c>=3.3*z[b]&&c<=3.3*z[b]+3&&a>=3.3*T[b]&&a<=3.3*T[b]+3){var d=~~(c-3.3*z[b]),e=~~(a-3.3*T[b]),f=n.split("");f[9*b+3*e+d]=H;k(f.join(""));l(M,b,d,e,n)}c>=z[6]&&c<=z[6]+5&&a>=T[6]&&a<=T[6]+2&&(d=~~(c-z[6]),e=~~(a-T[6]),H="URFDLB-XYZ".charAt(2*d+e),$.ctxDrawPolygon(M,
S[H],P,[30,1.5,1.5]))}function l(a,b,c,d,e){$.ctxDrawPolygon(a,S[e[9*b+3*d+c]],[[c,c,c+1,c+1],[d,d+1,d+1,d]],[30,3.3*z[b]+.1,3.3*T[b]+.1])}function y(a){a=p.val();p.val("");kernel.blur();"input"==a?(a=prompt("U1U2...U9R1..R9F1..D1..L1..B1..B9",n),null!=a&&(N.exec(a)?k(a):logohint.push(LGHINT_INVALID))):""!=a&&k(a)}function k(a){if(n!=a){n=a;a=M;var b=n,c=kernel.getProp("imgSize")/48;O.width(39*c+"em");O.height(29*c+"em");O.attr("width",391);O.attr("height",87/9*30+1);for(c=0;6>c;c++)for(var d=0;3>
d;d++)for(var e=0;3>e;e++)l(a,c,d,e,b);for(d=0;5>d;d++)for(e=0;2>e;e++)$.ctxDrawPolygon(a,S["URFDLB-XYZ".charAt(2*d+e)],[[d,d,d+1,d+1],[e,e+1,e+1,e]],[30,7.25,.5]);$.ctxDrawPolygon(a,S[H],P,[30,1.5,1.5]);I=pat3x3gen.calcPattern(n,n);a=4.325200327448986E19/(I[0][0]*I[1][0]+I[0][1]*I[1][1]);C.html("|G:H|="+(1E8<a?a.toExponential(3):a));A()}}function w(){if(u){var a=v[1].searchNext(1E3,1E3);var b=K.length+" sol(s), @"+~~((+new Date-Y)/1E3)+"s|"+v[1].maxl+"f";a&&K.push(a.join(" ")+" ("+a.length+"f)");
if(1==u){if(e.html(a?K.join("\n"):b),a){Q=0;return}}else t.html(K.join("\n")+"\n"+b),t[0].scrollTop=t[0].scrollHeight;Q=setTimeout(w,1)}}function A(){1!=u&&2!=u||B()}function x(){v[0]!=n&&(v[0]=n,v[1]=new mathlib.gSolver([n],b.move,g({U:0,R:17,F:34,D:48,L:65,B:82})));2==u?(O.hide(),C.addClass("click"),e.hide(),t.show()):(O.show(),C.removeClass("click"),e.html("Searching...").show(),t.hide());var c=a(b.move,n);v[1].search(c,0,0);Y=+new Date;K=[];w()}function B(){0==u?(h.val("Stop!"),m.prop("disabled",
!0),u="batch"==m.val()?2:1):(h.val("Solve!"),m.prop("disabled",!1),u=0);kernel.blur();u&&x()}var u=0,p=$('<select style="font-size:0.75em;">'),m=$('<select style="font-size:0.75em;">'),h=$('<input type="button" value="Solve!" style="font-size:0.75em;">'),t=$('<textarea wrap=off rows="8" cols="30" style="font-size:0.75em; display:none;">'),e=$("<span>"),C=$('<span style="display:block;">'),K=[],L={"3x3x3":mathlib.SOLVED_FACELET,Empty:"----U--------R--------F--------D--------L--------B----","2x2x2":"----UU-UURR-RR-----FF-FF------------------------------",
"2x2x3":"---UUUUUURR-RR----FFFFFF-------------LL-LL------------",Cross:"----U--------R--R-----F--F--D-DDD-D-----L--L-----B--B-",XCross:"----U-------RR-RR-----FF-FF-DDDDD-D-----L--L-----B--B-",EOLine:"-X-XUX-X-----R-------XFX-F--D-XDX-D-----L-------XBX-B-",Roux1:"---------------------F--F--D--D--D-----LLLLLL-----B--B",Domino:"UUUUUUUUU---RRR------FFF---UUUUUUUUU---RRR------FFF---","EO&CO":"XYXYUYXYX----R-------YFY---XYXYDYXYX----L-------YBY---",Corner:"U-U---U-UR-R---R-RF-F---F-FD-D---D-DL-L---L-LB-B---B-B"},
O,M,n=mathlib.SOLVED_FACELET,S={U:"#fff",R:"#f00",F:"#0d0",D:"#ff0",L:"#fa0",B:"#00f","-":"#777",X:"#0ff",Y:"#f0f",Z:"#000"},H="-",z=[1,2,1,1,0,3,7.25],T=[0,1,1,2,1,1,.5],P=[[-.7,-.7,.7,.7],[-.7,.7,.7,-.7]],N=/^[URFDLBXYZ-]{54}$/,v=["",null],I=[[0,0],[0,0]],Y=0,Q=0;$(function(){O=$("<canvas>");if(O[0].getContext){M=O[0].getContext("2d");p.append($("<option>").val("").html("Edit subset"));for(var a in L)p.append($("<option>").val(L[a]).html(a));p.append($("<option>").val("input").html("..."));m.append($("<option>").val("single").html("Single"));
m.append($("<option>").val("batch").html("Batch"));k(L.Cross)}});return function(a,b){d=cubeutil.parseScramble(a,"URFDLB");for(var g=0;g<d.length;g++)d[g]="URFDLB".charAt(d[g][0])+" 2'".charAt(d[g][2]-1);c=[];b.empty().append($('<table class="table">').append($("<tr>").append($('<td style="padding:0;">').append(p.unbind("change").change(y),m,h.unbind("click").click(B))),$("<tr>").append($("<td>").append(t.empty(),e)),$("<tr>").append($('<td style="padding:0;">').append(O.unbind("mousedown").bind("mousedown",
f),C.unbind("click").click(function(){A();O.show();C.removeClass("click")})))));u&&(Q&&(clearTimeout(Q),Q=0),x())}});execMain(function(){function a(a,c){if(c){c.empty();var d=$('<span class="sol"/>'),g=tools.getCurScramble();l=g[1];if("222face"==a&&tools.isPuzzle("222"))A(g[1],d);else if("333udf"==a&&tools.isPuzzle("333")&&/^[URFDLB 2']+$/.exec(g[1]))f(g[1],d);else if(a.startsWith("333")&&tools.isPuzzle("333")&&/^[URFDLB 2']+$/.exec(g[1]))b.exec(a.slice(3),g[1],d);else if("sq1cs"==a&&tools.isPuzzle("sq1"))y(g[1],
d);else if("skbl1"==a&&tools.isPuzzle("skb"))C(g[1],d);else if("pyrv"==a&&tools.isPuzzle("pyr"))B(g[1],d);else{c.html(IMAGE_UNAVAILABLE);return}c.append(d)}}$(function(){tools.regTool("222face",TOOLS_SOLVERS+">"+TOOLS_222FACE,a.bind(null,"222face"));tools.regTool("333cf",TOOLS_SOLVERS+">Cross + F2L",a.bind(null,"333cf"));tools.regTool("333roux",TOOLS_SOLVERS+">Roux S1 + S2",a.bind(null,"333roux"));tools.regTool("333petrus",TOOLS_SOLVERS+">2x2x2 + 2x2x3",a.bind(null,"333petrus"));tools.regTool("333zz",
TOOLS_SOLVERS+">EOLine + ZZF2L",a.bind(null,"333zz"));tools.regTool("333222",TOOLS_SOLVERS+">2x2x2",a.bind(null,"333222"));tools.regTool("333eodr",TOOLS_SOLVERS+">EO + DR",a.bind(null,"333eodr"));tools.regTool("sq1cs",TOOLS_SOLVERS+">SQ1 S1 + S2",a.bind(null,"sq1cs"));tools.regTool("pyrv",TOOLS_SOLVERS+">Pyraminx V",a.bind(null,"pyrv"));tools.regTool("skbl1",TOOLS_SOLVERS+">Skewb Face",a.bind(null,"skbl1"));tools.regTool("333udf",TOOLS_SOLVERS+">3x3x3 General",a.bind(null,"333udf"))})});return{rubiksCube:b}}();var csTimerWorker=execBoth(function(){if(!window.Worker)return{};var a=new Worker("js/cstimer.js"),g={},d=0;a.onmessage=function(a){a=a.data;var c=g[a[0]];delete g[a[0]];c&&c(a[2])};a.postMessage([0,"set",["SCRAMBLE_NOOBST",SCRAMBLE_NOOBST]]);a.postMessage([0,"set",["SCRAMBLE_NOOBSS",SCRAMBLE_NOOBSS]]);return{getScramble:function(l,c){++d;g[d]=c;a.postMessage([d,"scramble",l]);return d}}},function(){self.kernel={getProp:function(a,c){return void 0==self[a]?c:self[a]},setProp:function(a,c){self[a]=
c}};var a={colcube:"#ff0#fa0#00f#fff#f00#0d0",colpyr:"#0f0#f00#00f#ff0",colskb:"#fff#00f#f00#ff0#0f0#f80",colmgm:"#fff#d00#060#81f#fc0#00b#ffb#8df#f83#7e0#f9f#999",colsq1:"#ff0#f80#0f0#fff#f00#00f",colclk:"#f00#37b#5cf#ff0#850",col15p:"#f99#9f9#99f#fff",colfto:"#fff#808#f00#0d0#00f#bbb#ff0#fa0",colico:"#fff#084#b36#a85#088#811#e71#b9b#05a#ed1#888#6a3#e8b#a52#6cb#c10#fa0#536#49c#ec9"},g;for(g in a)kernel.setProp(g,a[g]);var d={getScrambleTypes:function(){var a=[],c;for(c in scrMgr.scramblers)a.push(c);
return a},getScramble:function(){var a=scrMgr.scramblers[arguments[0]];return a.apply(a,arguments).replace(/<span[^>]*>(.*?)<\/span>/ig,"$1 ").replace(/~/g,"").replace(/\\n/g,"\n").replace(/`([^`]*)`/g,"$1")},setSeed:function(a){mathlib.setSeed(256,a.toString())},setGlobal:function(a,c){kernel.setProp(a,c)},getImage:function(a,c){var d=image.draw([c||"333",a]);return d&&d.render()}};self.onmessage=function(a){var c=a.data;a=c[0];var g=c[1];c=c[2];var b=void 0;switch(g){case "scrtype":b=d.getScrambleTypes();
break;case "scramble":b=d.getScramble.apply(null,c);break;case "seed":d.setSeed(c[0]);break;case "image":b=d.getImage.apply(null,c);break;case "set":d.setGlobal.apply(null,c)}postMessage([a,g,b])};"undefined"!==typeof module&&"undefined"!==typeof module.exports&&(module.exports=d)});
